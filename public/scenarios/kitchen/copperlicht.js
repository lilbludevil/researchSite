/**
  * CopperCube player implemented using the CopperLicht 3D Engine, (c) by Nikolaus Gebhardt, Ambiera e.U.
  * http://www.ambiera.com/coppercube
  */
function aa(){return function(){}}function ca(a){return function(b){this[a]=b}}function j(a){return function(){return this[a]}}function l(a){return function(){return a}}var n,q={};function da(a,b){this.Zh=this.xd=null;a=document.getElementById(a);if(a==null)q.Ck=false;else{if(this.xd=a.parentNode){this.Fg=document.createElement("div");this.xd.appendChild(this.Fg);this.Um=a=document.createTextNode("Loading...");this.Fg.appendChild(a)}b&&ea(this)}}function ea(a){if(a.Zh==null){a.Zh=document.createElement("div");a.xd.appendChild(a.Zh);var b=document.createTextNode("FPS: 0");a.cl=b;a.Zh.appendChild(b);a.frames=0;a.Ik=(new Date).getTime()}}
da.prototype.print=function(a){q.Ck!=false&&fa(this,a,false)};function ga(a,b){if(a.Fg)if(b==null)a.Fg.style.display="none";else{a.Fg.style.display="block";a.Um.nodeValue=b}}function ha(a,b,c){fa(a,b,true,c)}function ia(a,b){setTimeout(function(){throw new Error(b);},0)}
function fa(a,b,c,d){if(!(q.Ck==false&&c!=true))if(d){a.xd.appendChild(document.createElement("br"));c=document.createElement("div");a.xd.appendChild(c);c.innerHTML=b}else{a.xd.appendChild(document.createElement("br"));b=document.createTextNode(b);a.xd.appendChild(b)}}q.Ck=true;q.oa=null;function ja(a){this.$h=a;this.rb=false;if(!this.rb&&typeof XMLHttpRequest!="undefined")try{this.rb=new XMLHttpRequest}catch(b){this.rb=false}if(!this.rb&&window.Dn)try{this.rb=window.Dn()}catch(c){this.rb=false}this.load=function(d){if(this.rb==false)ha(q.oa,"Your browser doesn't support AJAX");else{var e=this;try{this.rb.open("GET",this.$h,true)}catch(f){ha(q.oa,"Could not open file "+this.$h+": "+f.message);return}this.rb.onreadystatechange=function(){if(e.rb.readyState==4){e.rb.status!=200&&e.rb.status!=
0&&e.rb.status!=null&&ha(q.oa,"Could not open file "+e.$h+" (status:"+e.rb.status+")");d(e.rb.responseText)}};try{this.rb.send(null)}catch(g){ha(q.oa,"Could not open file "+e.$h)}}};this.Ho=function(d){alert("loaded :"+d)}};q.PI=3.14159265359;q.wo=1/3.14159265359;q.ro=1.570796326795;q.vo=3.141592653589793;q.Wc=3.14159265359/180;q.Hd=57.29577951307855;q.qn=1.0E-8;q.Bh=function(a){return a*q.Hd};q.$l=function(a){return a*q.Wc};q.ka=function(a){return a<1.0E-8&&a>-1.0E-8};q.Pd=function(a){return a+1.0E-8>=1&&a-1.0E-8<=1};q.O=function(a,b){return a+1.0E-8>=b&&a-1.0E-8<=b};q.Rb=function(a,b,c){if(a<b)return b;if(a>c)return c;return a};q.Fn=function(a){return a-Math.floor(a)};
q.On=function(a,b,c){if(a>b){if(a>c)return a;return c}if(b>c)return b;return c};q.Io=function(a,b,c){if(a<b){if(a<c)return a;return c}if(b<c)return b;return c};q.Te=function(a){return(a&4278190080)>>>24};q.We=function(a){return(a&16711680)>>16};q.Ve=function(a){return(a&65280)>>8};q.Ue=function(a){return a&255};q.Zl=function(a,b,c,d){a&=255;b&=255;c&=255;d&=255;return a<<24|b<<16|c<<8|d};
q.dm=function(a,b,c){var d=1-c;return q.Zl(q.Te(a)*c+q.Te(b)*d,q.We(a)*c+q.We(b)*d,q.Ve(a)*c+q.Ve(b)*d,q.Ue(a)*c+q.Ue(b)*d)};function ka(){this.ud=this.Ad=this.Gd=this.Jh=1}n=ka.prototype;n.e=function(){var a=new la;a.Jh=this.Jh;a.Gd=this.Gd;a.Ad=this.Ad;a.ud=this.ud;return a};n.Jh=1;n.Gd=1;n.Ad=1;n.ud=1;function t(){return(new Date).getTime()};function v(a,b,c){if(a!=null){this.b=a;this.c=b;this.d=c}}n=v.prototype;n.b=0;n.c=0;n.d=0;n.set=function(a,b,c){this.b=a;this.c=b;this.d=c};n.e=function(){return new v(this.b,this.c,this.d)};n.xa=function(a){a.b=this.b;a.c=this.c;a.d=this.d};n.substract=function(a){return new v(this.b-a.b,this.c-a.c,this.d-a.d)};function ma(a,b){a.b-=b.b;a.c-=b.c;a.d-=b.d}v.prototype.add=function(a){return new v(this.b+a.b,this.c+a.c,this.d+a.d)};v.prototype.ra=function(a){this.b+=a.b;this.c+=a.c;this.d+=a.d};
function na(a,b){a.b+=b.b;a.c+=b.c;a.d+=b.d;return a}v.prototype.normalize=function(){var a=this.b*this.b+this.c*this.c+this.d*this.d;if(!(a>-1.0E-7&&a<1.0E-7)){a=1/Math.sqrt(a);this.b*=a;this.c*=a;this.d*=a}};function oa(a,b){var c=a.b*a.b+a.c*a.c+a.d*a.d;if(!(c>-1.0E-7&&c<1.0E-7)){c=b/Math.sqrt(c);a.b*=c;a.c*=c;a.d*=c}}function pa(a,b){a.b=b.b;a.c=b.c;a.d=b.d}v.prototype.O=function(a){return q.O(this.b,a.b)&&q.O(this.c,a.c)&&q.O(this.d,a.d)};
function qa(a){return q.ka(a.b)&&q.ka(a.c)&&q.ka(a.d)}v.prototype.getLength=function(){return Math.sqrt(this.b*this.b+this.c*this.c+this.d*this.d)};v.prototype.pb=function(a){var b=a.b-this.b,c=a.c-this.c;a=a.d-this.d;return Math.sqrt(b*b+c*c+a*a)};function ra(a,b){var c=b.b-a.b,d=b.c-a.c;a=b.d-a.d;return c*c+d*d+a*a}function sa(a){return a.b*a.b+a.c*a.c+a.d*a.d}function x(a,b){return new v(a.b*b,a.c*b,a.d*b)}function y(a,b){a.b*=b;a.c*=b;a.d*=b}function ta(a,b){a.b*=b;a.c*=b;a.d*=b;return a}
function ua(a,b){a.b*=b.b;a.c*=b.c;a.d*=b.d}function va(a,b){return new v(a.b*b.b,a.c*b.c,a.d*b.d)}function wa(a,b){return new v(a.b/b.b,a.c/b.c,a.d/b.d)}function xa(a,b){return new v(a.c*b.d-a.d*b.c,a.d*b.b-a.b*b.d,a.b*b.c-a.c*b.b)}v.prototype.da=function(a){return this.b*a.b+this.c*a.c+this.d*a.d};
function ya(a){var b=new v;b.c=q.Bh(Math.atan2(a.b,a.d));if(b.c<0)b.c+=360;if(b.c>=360)b.c-=360;var c=Math.sqrt(a.b*a.b+a.d*a.d);b.b=q.Bh(Math.atan2(c,a.c))-90;if(b.b<0)b.b+=360;if(b.b>=360)b.b-=360;return b}function za(a,b){b*=q.Wc;var c=Math.cos(b);b=Math.sin(b);a.b=a.b*c-a.d*b;a.d=a.b*b+a.d*c}function Aa(a,b,c){var d=1-c;return new v(b.b*d+a.b*c,b.c*d+a.c*c,b.d*d+a.d*c)}v.prototype.toString=function(){return"(x: "+this.b+" y:"+this.c+" z:"+this.d+")"};function Ba(){this.Q=new v;this.K=new v}
Ba.prototype.Q=null;Ba.prototype.K=null;function Ca(a){return a.K.substract(a.Q)}Ba.prototype.getLength=function(){return Ca(this).getLength()};function Da(a,b){if(a==null)this.c=this.b=0;else{this.b=a;this.c=b}}Da.prototype.b=0;Da.prototype.c=0;Da.prototype.set=function(a,b){this.b=a;this.c=b};function z(){this.I=new v;this.J=new v}z.prototype.I=null;z.prototype.J=null;z.prototype.e=function(){var a=new z;a.I=this.I.e();a.J=this.J.e();return a};function Ea(a){a=a.I.add(a.J);y(a,0.5);return a}function Fa(a){return a.J.substract(a.I)}
function Ga(a){var b=Ea(a);a=b.substract(a.J);var c=[];c.push(new v(b.b+a.b,b.c+a.c,b.d+a.d));c.push(new v(b.b+a.b,b.c-a.c,b.d+a.d));c.push(new v(b.b+a.b,b.c+a.c,b.d-a.d));c.push(new v(b.b+a.b,b.c-a.c,b.d-a.d));c.push(new v(b.b-a.b,b.c+a.c,b.d+a.d));c.push(new v(b.b-a.b,b.c-a.c,b.d+a.d));c.push(new v(b.b-a.b,b.c+a.c,b.d-a.d));c.push(new v(b.b-a.b,b.c-a.c,b.d-a.d));return c}
function Ha(a,b,c){var d=c.substract(b),e=d.getLength();d.normalize();b=x(b.add(c),0.5);c=e*0.5;e=x(Fa(a),0.5);a=Ea(a).substract(b);if(Math.abs(a.b)>e.b+c*Math.abs(d.b)||Math.abs(a.c)>e.c+c*Math.abs(d.c)||Math.abs(a.d)>e.d+c*Math.abs(d.d))d=false;else{b=e.c*Math.abs(d.d)+e.d*Math.abs(d.c);if(Math.abs(a.c*d.d-a.d*d.c)>b)d=false;else{b=e.b*Math.abs(d.d)+e.d*Math.abs(d.b);if(Math.abs(a.d*d.b-a.b*d.d)>b)d=false;else{b=e.b*Math.abs(d.c)+e.c*Math.abs(d.b);d=Math.abs(a.b*d.c-a.c*d.b)>b?false:true}}}return d}
function A(a,b){var c=b.b,d=b.c;b=b.d;if(c>a.J.b)a.J.b=c;if(d>a.J.c)a.J.c=d;if(b>a.J.d)a.J.d=b;if(c<a.I.b)a.I.b=c;if(d<a.I.c)a.I.c=d;if(b<a.I.d)a.I.d=b}function Ia(a,b){return a.I.b<=b.J.b&&a.I.c<=b.J.c&&a.I.d<=b.J.d&&a.J.b>=b.I.b&&a.J.c>=b.I.c&&a.J.d>=b.I.d}z.prototype.yh=function(a){return a.b>=this.I.b&&a.b<=this.J.b&&a.c>=this.I.c&&a.c<=this.J.c&&a.d>=this.I.d&&a.d<=this.J.d};z.prototype.reset=function(a,b,c){this.J.set(a,b,c);this.I.set(a,b,c)};function Ja(){this.k=new v(0,1,0);this.Ua=-(new v(0,0,0)).da(this.k)}Ja.prototype.Ua=0;Ja.prototype.k=null;Ja.prototype.e=function(){var a=new Ja(false);a.k=this.k.e();a.Ua=this.Ua;return a};Ja.prototype.normalize=function(){var a=1/this.k.getLength();this.k=x(this.k,a);this.Ua*=a};
function Ka(a,b,c,d){var e=new v,f=new v;var g=a.k.getLength(),i=a.k.da(b.k),k=b.k.getLength(),m=g*k-i*i;if(Math.abs(m)<1.0E-8)b=false;else{m=1/m;k=(k*-a.Ua+i*b.Ua)*m;g=(g*-b.Ua+i*a.Ua)*m;xa(a.k,b.k).xa(f);a=x(a.k,k);b=x(b.k,g);a.add(b).xa(e);b=true}if(b)return c.Ek(e,f,d);return false}Ja.prototype.Ek=function(a,b,c){var d=this.k.da(b);if(d==0)return false;d=-(this.k.da(a)+this.Ua)/d;a.add(x(b,d)).xa(c);return true};Ja.prototype.pb=function(a){return a.da(this.k)+this.Ua};
function La(a,b){return a.k.da(b)<=0};function B(a,b,c){this.M=a?a:new v;this.V=b?b:new v;this.X=c?c:new v}B.prototype.M=null;B.prototype.V=null;B.prototype.X=null;B.prototype.e=function(){return new B(this.M,this.V,this.X)};function Ma(a){var b=new Ja(false),c=a.M,d=a.X;b.k=xa(a.V.substract(c),d.substract(c));b.k.normalize();b.Ua=-c.da(b.k);return b}B.prototype.yh=function(a){return Na(this,a,this.M,this.V,this.X)&&Na(this,a,this.V,this.M,this.X)&&Na(this,a,this.X,this.M,this.V)};
function Na(a,b,c,d,e){a=e.substract(d);b=xa(a,b.substract(d));c=xa(a,c.substract(d));return b.da(c)>=0}function Oa(a){return xa(a.V.substract(a.M),a.X.substract(a.M))}B.prototype.Ek=function(a,b){var c=Oa(this);c.normalize();var d=c.da(b);if(q.ka(d))a=null;else{var e=this.M.da(c);c=-(c.da(a)-e)/d;a=a.add(x(b,c))}if(a==null)return null;if(this.yh(a))return a;return null};B.prototype.xa=function(a){this.M.xa(a.M);this.V.xa(a.V);this.X.xa(a.X)};function F(a){if(a==null)a=true;this.H=this.G=this.F=this.D=this.C=this.p=this.w=this.v=this.B=this.u=this.o=this.t=this.A=this.s=this.r=this.n=0;this.Da=false;if(a){this.H=this.p=this.o=this.n=1;this.Da=true}}function Pa(a){if(a.Da)return true;a.Da=q.Pd(a.n)&&q.ka(a.r)&&q.ka(a.s)&&q.ka(a.A)&&q.ka(a.t)&&q.Pd(a.o)&&q.ka(a.u)&&q.ka(a.B)&&q.ka(a.v)&&q.ka(a.w)&&q.Pd(a.p)&&q.ka(a.C)&&q.ka(a.D)&&q.ka(a.F)&&q.ka(a.G)&&q.Pd(a.H);return a.Da}
function Qa(a){if(a.Da)return true;return q.Pd(a.n)&&q.ka(a.r)&&q.ka(a.s)&&q.ka(a.A)&&q.ka(a.t)&&q.Pd(a.o)&&q.ka(a.u)&&q.ka(a.B)&&q.ka(a.v)&&q.ka(a.w)&&q.Pd(a.p)&&q.ka(a.C)&&q.Pd(a.H)}F.prototype.O=function(a){return q.O(this.n,a.n)&&q.O(this.r,a.r)&&q.O(this.s,a.s)&&q.O(this.A,a.A)&&q.O(this.t,a.t)&&q.O(this.o,a.o)&&q.O(this.u,a.u)&&q.O(this.B,a.B)&&q.O(this.v,a.v)&&q.O(this.w,a.w)&&q.O(this.p,a.p)&&q.O(this.C,a.C)&&q.O(this.D,a.D)&&q.O(this.F,a.F)&&q.O(this.G,a.G)&&q.O(this.H,a.H)};
function Ra(a){return new v(a.n,a.o,a.p)}function Sa(a,b){var c=b.e();b.b=c.b*a.n+c.c*a.t+c.d*a.v;b.c=c.b*a.r+c.c*a.o+c.d*a.w;b.d=c.b*a.s+c.c*a.u+c.d*a.p}function Ta(a,b,c){b.b=c.b*a.n+c.c*a.t+c.d*a.v;b.c=c.b*a.r+c.c*a.o+c.d*a.w;b.d=c.b*a.s+c.c*a.u+c.d*a.p}function Ua(a,b){return new v(b.b*a.n+b.c*a.t+b.d*a.v+a.D,b.b*a.r+b.c*a.o+b.d*a.w+a.F,b.b*a.s+b.c*a.u+b.d*a.p+a.G)}function Va(a,b){var c=b.b*a.r+b.c*a.o+b.d*a.w+a.F,d=b.b*a.s+b.c*a.u+b.d*a.p+a.G;b.b=b.b*a.n+b.c*a.t+b.d*a.v+a.D;b.c=c;b.d=d}
function Wa(a,b){return new v(b.b+a.D,b.c+a.F,b.d+a.G)}
function H(a,b){var c=new F(false);if(a.Da){b.xa(c);return c}if(b.Da){a.xa(c);return c}c.n=a.n*b.n+a.t*b.r+a.v*b.s+a.D*b.A;c.r=a.r*b.n+a.o*b.r+a.w*b.s+a.F*b.A;c.s=a.s*b.n+a.u*b.r+a.p*b.s+a.G*b.A;c.A=a.A*b.n+a.B*b.r+a.C*b.s+a.H*b.A;c.t=a.n*b.t+a.t*b.o+a.v*b.u+a.D*b.B;c.o=a.r*b.t+a.o*b.o+a.w*b.u+a.F*b.B;c.u=a.s*b.t+a.u*b.o+a.p*b.u+a.G*b.B;c.B=a.A*b.t+a.B*b.o+a.C*b.u+a.H*b.B;c.v=a.n*b.v+a.t*b.w+a.v*b.p+a.D*b.C;c.w=a.r*b.v+a.o*b.w+a.w*b.p+a.F*b.C;c.p=a.s*b.v+a.u*b.w+a.p*b.p+a.G*b.C;c.C=a.A*b.v+a.B*b.w+
a.C*b.p+a.H*b.C;c.D=a.n*b.D+a.t*b.F+a.v*b.G+a.D*b.H;c.F=a.r*b.D+a.o*b.F+a.w*b.G+a.F*b.H;c.G=a.s*b.D+a.u*b.F+a.p*b.G+a.G*b.H;c.H=a.A*b.D+a.B*b.F+a.C*b.G+a.H*b.H;return c}
function Xa(a,b){if(a.Da){a.xa(b);return true}var c=(a.n*a.o-a.r*a.t)*(a.p*a.H-a.C*a.G)-(a.n*a.u-a.s*a.t)*(a.w*a.H-a.C*a.F)+(a.n*a.B-a.A*a.t)*(a.w*a.G-a.p*a.F)+(a.r*a.u-a.s*a.o)*(a.v*a.H-a.C*a.D)-(a.r*a.B-a.A*a.o)*(a.v*a.G-a.p*a.D)+(a.s*a.B-a.A*a.u)*(a.v*a.F-a.w*a.D);if(c>-1.0E-7&&c<1.0E-7)return false;c=1/c;b.n=c*(a.o*(a.p*a.H-a.C*a.G)+a.u*(a.C*a.F-a.w*a.H)+a.B*(a.w*a.G-a.p*a.F));b.r=c*(a.w*(a.s*a.H-a.A*a.G)+a.p*(a.A*a.F-a.r*a.H)+a.C*(a.r*a.G-a.s*a.F));b.s=c*(a.F*(a.s*a.B-a.A*a.u)+a.G*(a.A*a.o-a.r*
a.B)+a.H*(a.r*a.u-a.s*a.o));b.A=c*(a.r*(a.B*a.p-a.u*a.C)+a.s*(a.o*a.C-a.B*a.w)+a.A*(a.u*a.w-a.o*a.p));b.t=c*(a.u*(a.v*a.H-a.C*a.D)+a.B*(a.p*a.D-a.v*a.G)+a.t*(a.C*a.G-a.p*a.H));b.o=c*(a.p*(a.n*a.H-a.A*a.D)+a.C*(a.s*a.D-a.n*a.G)+a.v*(a.A*a.G-a.s*a.H));b.u=c*(a.G*(a.n*a.B-a.A*a.t)+a.H*(a.s*a.t-a.n*a.u)+a.D*(a.A*a.u-a.s*a.B));b.B=c*(a.s*(a.B*a.v-a.t*a.C)+a.A*(a.t*a.p-a.u*a.v)+a.n*(a.u*a.C-a.B*a.p));b.v=c*(a.B*(a.v*a.F-a.w*a.D)+a.t*(a.w*a.H-a.C*a.F)+a.o*(a.C*a.D-a.v*a.H));b.w=c*(a.C*(a.n*a.F-a.r*a.D)+
a.v*(a.r*a.H-a.A*a.F)+a.w*(a.A*a.D-a.n*a.H));b.p=c*(a.H*(a.n*a.o-a.r*a.t)+a.D*(a.r*a.B-a.A*a.o)+a.F*(a.A*a.t-a.n*a.B));b.C=c*(a.A*(a.o*a.v-a.t*a.w)+a.n*(a.B*a.w-a.o*a.C)+a.r*(a.t*a.C-a.B*a.v));b.D=c*(a.t*(a.p*a.F-a.w*a.G)+a.o*(a.v*a.G-a.p*a.D)+a.u*(a.w*a.D-a.v*a.F));b.F=c*(a.v*(a.s*a.F-a.r*a.G)+a.w*(a.n*a.G-a.s*a.D)+a.p*(a.r*a.D-a.n*a.F));b.G=c*(a.D*(a.s*a.o-a.r*a.u)+a.F*(a.n*a.u-a.s*a.t)+a.G*(a.r*a.t-a.n*a.o));b.H=c*(a.n*(a.o*a.p-a.u*a.w)+a.r*(a.u*a.v-a.t*a.p)+a.s*(a.t*a.w-a.o*a.v));b.Da=a.Da;return true}
function Ya(a){var b=new F(false);if(Xa(a,b)){b.xa(a);return true}return false}function Za(a){var b=new F(false);b.n=a.n;b.r=a.t;b.s=a.v;b.A=a.D;b.t=a.r;b.o=a.o;b.u=a.w;b.B=a.F;b.v=a.s;b.w=a.u;b.p=a.p;b.C=a.G;b.D=a.A;b.F=a.B;b.G=a.C;b.H=a.H;b.Da=a.Da;return b}
function $a(a,b,c){a.Da=false;switch(b){case 0:a.n=c;break;case 1:a.r=c;break;case 2:a.s=c;break;case 3:a.A=c;break;case 4:a.t=c;break;case 5:a.o=c;break;case 6:a.u=c;break;case 7:a.B=c;break;case 8:a.v=c;break;case 9:a.w=c;break;case 10:a.p=c;break;case 11:a.C=c;break;case 12:a.D=c;break;case 13:a.F=c;break;case 14:a.G=c;break;case 15:a.H=c;break}}F.prototype.e=function(){var a=new F(false);this.xa(a);return a};
F.prototype.xa=function(a){a.n=this.n;a.r=this.r;a.s=this.s;a.A=this.A;a.t=this.t;a.o=this.o;a.u=this.u;a.B=this.B;a.v=this.v;a.w=this.w;a.p=this.p;a.C=this.C;a.D=this.D;a.F=this.F;a.G=this.G;a.H=this.H;a.Da=this.Da};function ab(a,b,c,d,e){b=1/Math.tan(b/2);a.n=b/c;a.r=0;a.s=0;a.A=0;a.t=0;a.o=b;a.u=0;a.B=0;a.v=0;a.w=0;a.p=e/(e-d);a.C=1;a.D=0;a.F=0;a.G=-d*e/(e-d);a.H=0;a.Da=false}
function bb(a,b){var c=x(b,q.Wc);b=Math.cos(c.b);var d=Math.sin(c.b),e=Math.cos(c.c),f=Math.sin(c.c),g=Math.cos(c.d);c=Math.sin(c.d);a.n=e*g;a.r=e*c;a.s=-f;var i=d*f;f=b*f;a.t=i*g-b*c;a.o=i*c+b*g;a.u=d*e;a.v=f*g+d*c;a.w=f*c-d*g;a.p=b*e;a.Da=false}
function cb(a){var b=-Math.asin(a.s),c=Math.cos(b);b*=q.Hd;var d,e;if(Math.abs(c)>1.0E-8){var f=1/c;d=a.p*f;e=a.u*f;c=Math.atan2(e,d)*q.Hd;d=a.n*f;e=a.r*f}else{c=0;d=a.o;e=-a.t}a=Math.atan2(e,d)*q.Hd;if(c<0)c+=360;if(b<0)b+=360;if(a<0)a+=360;return new v(c,b,a)}function db(a,b){a.D=b.b;a.F=b.c;a.G=b.d;a.Da=false}function eb(a,b){a.n=b.b;a.o=b.c;a.p=b.d;a.Da=false}function fb(a,b){var c=Ga(b),d;for(d=0;d<8;++d)Va(a,c[d]);a=c[0];b.I=a.e();b.J=a.e();for(d=1;d<8;++d)A(b,c[d])}
F.prototype.toString=function(){return this.n+" "+this.r+" "+this.s+" "+this.A+"\n"+this.t+" "+this.o+" "+this.u+" "+this.B+"\n"+this.v+" "+this.w+" "+this.p+" "+this.C+"\n"+this.D+" "+this.F+" "+this.G+" "+this.H};function I(a,b,c,d){this.d=this.c=this.b=0;this.qa=1;if(a!=null)this.b=a;if(b!=null)this.c=b;if(c!=null)this.d=c;if(d!=null)this.qa=d}n=I.prototype;n.b=0;n.c=0;n.d=0;n.qa=0;n.e=function(){var a=new I;this.xa(a);return a};n.xa=function(a){a.b=this.b;a.c=this.c;a.d=this.d;a.qa=this.qa};function gb(a,b){return new I(a.b*b,a.c*b,a.d*b,a.qa*b)}I.prototype.ra=function(a){this.b+=a.b;this.c+=a.c;this.d+=a.d;this.qa+=a.qa;return this};
function hb(a,b,c,d){var e=b.da(c);if(e<0){b=gb(b,-1);e*=-1}if(e+1>0.05)if(1-e>=0.05){var f=Math.acos(e),g=1/Math.sin(f);e=Math.sin(f*(1-d))*g;d=Math.sin(f*d)*g}else{e=1-d;d=d}else{c=new I(-b.c,b.b,-b.qa,b.d);e=Math.sin(q.PI*(0.5-d));d=Math.sin(q.PI*d)}b=gb(b,e).ra(gb(c,d));a.b=b.b;a.c=b.c;a.d=b.d;a.qa=b.qa}I.prototype.da=function(a){return this.b*a.b+this.c*a.c+this.d*a.d+this.qa*a.qa};
function ib(a){var b=new F(false),c=a.b,d=a.c,e=a.d;a=a.qa;b.n=1-2*d*d-2*e*e;b.t=2*c*d+2*e*a;b.v=2*c*e-2*d*a;b.D=0;b.r=2*c*d-2*e*a;b.o=1-2*c*c-2*e*e;b.w=2*e*d+2*c*a;b.F=0;b.s=2*c*e+2*d*a;b.u=2*e*d-2*c*a;b.p=1-2*c*c-2*d*d;b.G=0;b.A=0;b.B=0;b.C=0;b.H=1;b.Da=false;return b}function jb(a,b){var c=a.qa*a.qa,d=a.b*a.b,e=a.c*a.c,f=a.d*a.d;b.d=Math.atan2(2*(a.b*a.c+a.d*a.qa),d-e-f+c);b.b=Math.atan2(2*(a.c*a.d+a.b*a.qa),-d-e+f+c);b.c=Math.asin(q.Rb(-2*(a.b*a.d-a.c*a.qa),-1,1))}
function kb(a,b,c,d){var e=b*0.5;b=Math.sin(e);var f=Math.cos(e);e=c*0.5;c=Math.sin(e);var g=Math.cos(e);e=d*0.5;d=Math.sin(e);var i=Math.cos(e);e=g*i;i=c*i;g=g*d;c=c*d;a.b=b*e-f*c;a.c=f*i+b*g;a.d=f*g-b*i;a.qa=f*e+b*c;a.normalize()}I.prototype.normalize=function(){var a=this.b*this.b+this.c*this.c+this.d*this.d+this.qa*this.qa;if(a!=1){a=a=1/Math.sqrt(a);this.b*=a;this.c*=a;this.d*=a;this.qa*=a}};I.prototype.toString=function(){return"(x: "+this.b+" y:"+this.c+" z:"+this.d+" w:"+this.qa+")"};function lb(){this.Pa=[];for(var a=0;a<mb;++a)this.Pa.push(new Ja)}lb.prototype.Pa=null;var mb=6;
lb.prototype.dj=function(a){var b;b=this.Pa[2];b.k.b=a.A+a.n;b.k.c=a.B+a.t;b.k.d=a.C+a.v;b.Ua=a.H+a.D;b=this.Pa[3];b.k.b=a.A-a.n;b.k.c=a.B-a.t;b.k.d=a.C-a.v;b.Ua=a.H-a.D;b=this.Pa[5];b.k.b=a.A-a.r;b.k.c=a.B-a.o;b.k.d=a.C-a.w;b.Ua=a.H-a.F;b=this.Pa[4];b.k.b=a.A+a.r;b.k.c=a.B+a.o;b.k.d=a.C+a.w;b.Ua=a.H+a.F;b=this.Pa[0];b.k.b=a.A-a.s;b.k.c=a.B-a.u;b.k.d=a.C-a.p;b.Ua=a.H-a.G;b=this.Pa[1];b.k.b=a.s;b.k.c=a.u;b.k.d=a.p;b.Ua=a.G;for(a=a=0;a<mb;++a){b=this.Pa[a];var c=-(1/b.k.getLength());b.k=x(b.k,c);b.Ua*=
c}};function nb(a){var b=new v;Ka(a.Pa[0],a.Pa[5],a.Pa[2],b);return b}function ob(a){var b=new v;Ka(a.Pa[0],a.Pa[5],a.Pa[3],b);return b}function pb(a){var b=new v;Ka(a.Pa[0],a.Pa[4],a.Pa[3],b);return b}function qb(a){var b=new v;Ka(a.Pa[0],a.Pa[4],a.Pa[2],b);return b}lb.prototype.fb=function(a){var b=new z;b.reset(a.b,a.c,a.d);A(b,nb(this));A(b,ob(this));A(b,qb(this));A(b,pb(this));return b};function K(a){if(a){this.f=new v;this.k=new v;this.ya=4294967295;this.ua=new Da;this.Kf=new Da}}n=K.prototype;n.f=null;n.k=null;n.ya=0;n.ua=null;n.Kf=null;function rb(){this.q="";this.Yb=false;this.Vj=this.Wj=this.Ph=this.Qh=this.ab=this.Xc=null}rb.prototype.hc=function(){if(this.Xc)return this.Xc.width;if(this.Qh!=null)return this.Qh;return 0};rb.prototype.fc=function(){if(this.Xc)return this.Xc.height;if(this.Ph!=null)return this.Ph;return 0};function sb(){this.Sa="";this.Eb=null;this.T=false;this.i="SetOverlayText"}sb.prototype.h=function(a,b){var c=new sb;c.Sa=this.Sa;c.Eb=this.Eb;c.T=this.T;if(c.Eb==a)c.Eb=b;return c};
sb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.Eb!=-1)c=L(b,this.Eb);if(c&&c.Pk){var d=this.Sa.indexOf("$");if(d!=-1){a=this.Sa;for(var e=0,f=true;f;){f=false;d=a.indexOf("$",e);if(d!=-1){e=d+1;var g=a.indexOf("$",d+1);if(g!=-1){f=true;var i=a.substr(d+1,g-(d+1));if(i=tb(i,false,b)){d=a.substr(0,d);d+=ub(i);e=d.length+1;d+=a.substr(g+1,a.length-g);a=d}}}}c.Pk(a)}else c.Pk(this.Sa)}}};
function vb(){this.fi=0;this.ye=null;this.T=false;this.i="MakeSceneNodeInvisible"}vb.prototype.h=function(a,b){var c=new vb;c.fi=this.fi;c.ye=this.ye;c.T=this.T;if(c.ye==a)c.ye=b;return c};vb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.ye!=-1)c=L(b,this.ye);if(c)switch(this.fi){case 0:c.S=false;break;case 1:c.S=true;break;case 2:c.S=!c.S;break}}};function wb(){this.uc=this.jd=false;this.i="ChangeSceneNodePosition"}
wb.prototype.h=function(a,b){var c=new wb;c.Fd=this.Fd;c.rc=this.rc;c.qc=this.qc;c.T=this.T;c.te=this.te;c.ca=this.ca?this.ca.e():null;c.Lh=this.Lh?this.Lh.e():null;c.jd=this.jd;c.uc=this.uc;if(c.rc==a)c.rc=b;if(c.qc==a)c.qc=b;return c};
wb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.rc!=-1)c=L(b,this.rc);if(c){var d=null;switch(this.Fd){case 0:d=this.ca.e();break;case 1:d=c.f.add(this.ca);break;case 2:var e=null;if(this.te)e=a;else if(this.qc!=-1)e=L(b,this.qc);if(e)d=e.f.add(this.ca);break;case 3:d=this.ca.getLength();a=c.Y;b=new v(1,0,0);Sa(a,b);if(c.m()=="camera")b=c.ea.substract(c.f);oa(b,d);d=c.f.add(b);break;case 4:a=new z;a.reset(this.ca.b,this.ca.c,this.ca.d);A(a,this.Lh);d=new v;d.b=a.I.b+
Math.random()*(a.J.b-a.I.b);d.c=a.I.c+Math.random()*(a.J.c-a.I.c);d.d=a.I.d+Math.random()*(a.J.d-a.I.d);break;case 5:d=b.Cj.add(this.ca);break}if(d!=null)if(this.jd&&this.uc>0){a=new xb;a.Q=c.f.e();a.K=d;a.Mc=this.uc;a.sg=true;yb(a);zb(c,a)}else c.f=d}}};function Ab(){this.i="ChangeSceneNodeRotation"}Ab.prototype.h=function(a,b){var c=new Ab;c.hk=this.hk;c.Bf=this.Bf;c.T=this.T;c.ca=this.ca?this.ca.e():null;c.Ci=this.Ci;c.sk=this.sk;if(c.Bf==a)c.Bf=b;return c};
Ab.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.Bf!=-1)c=L(b,this.Bf);if(c){b=null;switch(this.hk){case 0:b=this.ca.e();break;case 1:b=c.P.add(this.ca);break}if(b)if(this.Ci){a=new Bb;b=b;var d=c.P,e=this.sk;a.Bl=true;a.ve=b.e();a.Yk=d.e();a.gk=a.Ba+e;zb(c,a)}else c.P=b}}};function Cb(){this.i="ChangeSceneNodeScale"}Cb.prototype.h=function(a,b){var c=new Cb;c.ik=this.ik;c.Cf=this.Cf;c.T=this.T;c.ca=this.ca?this.ca.e():null;if(c.Cf==a)c.Cf=b;return c};
Cb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.Cf!=-1)c=L(b,this.Cf);if(c)switch(this.ik){case 0:c.na=this.ca.e();break;case 1:c.na=va(c.na,this.ca);break}}};function Db(){this.i="ChangeSceneNodeTexture"}Db.prototype.h=function(a,b){var c=new Db;c.Kc=this.Kc;c.Eb=this.Eb;c.T=this.T;c.Nf=this.Nf;c.wj=this.wj;if(c.Eb==a)c.Eb=b;return c};
Db.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.Eb!=-1)c=L(b,this.Eb);if(c)if(c.m()=="2doverlay")c.ab=this.Nf;else{a=c.xc();if(this.Kc==0)for(b=0;b<a;++b){var d=c.gc(b);d.$a=this.Nf}else if(this.Kc==1){d=c.gc(this.wj);d.$a=this.Nf}}}};function Eb(){this.i="ExecuteJavaScript"}Eb.prototype.h=function(){var a=new Eb;a.zj=this.zj;return a};Eb.prototype.execute=function(){eval(this.zj)};function Fb(){this.i="OpenWebpage"}
Fb.prototype.h=function(){var a=new Fb;a.uk=this.uk;a.ea=this.ea;return a};Fb.prototype.execute=function(){window.open(this.uk,this.ea)};function Gb(){this.i="SetSceneNodeAnimation"}Gb.prototype.h=function(a,b){var c=new Gb;c.Af=this.Af;c.T=this.T;c.zb=this.zb;c.ij=this.ij;if(c.Af==a)c.Af=b;return c};Gb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.Af!=-1)c=L(b,this.Af);if(c){a=c;a.m()=="animatedmesh"&&Hb(a,this.ij,this.zb)}}};
function Ib(a){this.Ia=a;this.i="SwitchToScene"}Ib.prototype.h=function(){var a=new Ib;a.xe=this.xe;return a};Ib.prototype.execute=function(){this.Ia&&Jb(this.Ia,this.xe,true)};function Kb(a){this.Ia=a;this.i="SetActiveCamera"}Kb.prototype.h=function(a,b){var c=new Kb;c.Ze=this.Ze;if(c.Ze==a)c.Ze=b;return c};Kb.prototype.execute=function(a,b){if(a&&b){a=null;if(this.Ze!=-1)a=L(b,this.Ze);a!=null&&a.m()=="camera"&&this.Ia&&Lb(this.Ia,a)}};
function Mb(){this.jd=false;this.uc=0;this.i="SetCameraTarget"}Mb.prototype.h=function(){var a=new Mb;a.Fd=this.Fd;a.rc=this.rc;a.qc=this.qc;a.T=this.T;a.te=this.te;a.ca=this.ca?this.ca.e():null;a.jd=this.jd;a.uc=this.uc;return a};
Mb.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.rc!=-1)c=L(b,this.rc);var d=c;if(d.m()=="camera"){var e=d.ea.e();switch(this.Fd){case 0:e=this.ca.e();break;case 1:e=c.f.add(this.ca);break;case 2:var f=null;if(this.te)f=a;else if(this.qc!=-1)f=L(b,this.qc);if(f)e=f.f.add(this.ca);break}if(e!=null)if(this.jd&&this.uc>0){a=new xb;a.Q=d.ea.e();a.K=e;a.Mc=this.uc;a.sg=true;a.gg=true;yb(a);zb(c,a)}else{Nb(d,e);c=M(d,"camerafps");c!=null&&Ob(c,e)}}}};
function Pb(){this.Oh=this.wd=this.dh=0;this.Ae=-1;this.Nc=100;this.i="Shoot";this.ze=-1;this.Ki=false;this.cg=this.fg=null;this.Ji=new v}Pb.prototype.h=function(a,b){var c=new Pb;c.dh=this.dh;c.wd=this.wd;c.Oh=this.Oh;c.Ae=this.Ae;c.Nc=this.Nc;c.ze=this.ze;c.Ki=this.Ki;c.fg=this.fg;c.cg=this.cg?this.cg.h(a,b):null;c.Ji=this.Ji.e();if(c.Ae==a)c.Ae=b;if(c.ze==a)c.ze=b;return c};
Pb.prototype.execute=function(a,b){if(a&&b){var c=new Ba,d=false,e=null,f=null,g=Qb(b,"gameai");if(this.ze!=-1){var i=L(b,this.ze);if(i!=null){d=true;e=i;c.Q=Ea(i.fb());c.Q.ra(this.Ji);Va(i.Y,c.Q);f=b.fa;if(this.Ki&&f){i=new Ba;i.Q=N(f);i.K=f.ea;f=Ca(i);oa(f,this.Nc);i.K=i.Q.add(f);Rb(this,i,g,this.Nc,b);Sb(this,i,g,this.Nc,e,b);c.K=i.K}else{f=i.Y;if(this.fg){i=new F;bb(i,this.fg);f=H(f,i)}c.K.set(1,0,0);Sa(f,c.K);c.K.ra(c.Q)}}}else if(a!=null){e=a;if((f=M(a,"gameai"))&&f.nj){c=f.oj;d=true}}if(!d)if(f=
b.fa){e=f;c.Q=N(f);c.K=f.ea;d=true}if(d){d=Ca(c);oa(d,this.Nc);c.K=c.Q.add(d);Rb(this,c,g,this.Nc,b);if(this.dh==1){e=null;if(this.Ae!=-1)e=L(b,this.Ae);if(e){e=e.h(b.Aa,-1,-1);O(b.Aa,e);if(e!=null){e.f=c.Q;P(e);e.S=true;e.Qa=-1;e.q="";b=Ca(c);b=ya(b);e.P=b;b=this.Oh;if(b==0)b=1;g=new xb;g.Q=c.Q;g.K=c.K;g.Mc=c.getLength()/b;g.sg=true;yb(g);g.Ml=true;g.Fl=a;g.El=this.wd;g.Wh=true;g.Ye=this.cg;zb(e,g)}}}else if(this.dh==0){a=Sb(this,c,g,this.Nc,e,b);if(a!=null){b.Cj=c.K.e();(c=M(a,"gameai"))&&Tb(c,
this.wd,a)}}}}};function Rb(a,b,c,d,e){if(c.length!=0)if(a=M(c[0],"gameai"))if(a=a.ha){e=Ub(Vb.prototype,e,b.Q,b.K,a,true);if(e<d){d=Ca(b);oa(d,e);b.K=b.Q.add(d)}}}function Sb(a,b,c,d,e,f){a=d;d=null;for(var g=0;g<c.length;++g)if(c[g]!==e){var i=M(c[g],"gameai");if(!(i&&!(i.xb>0))){i={};i.za=0;if(Wb(Vb.prototype,f,c[g],b,false,false,null,i))if(i.za<a){a=i.za;d=c[g]}}}if(d){c=Ca(b);oa(c,a);b.K=b.Q.add(c)}return d}function Xb(){this.i="SetOrChangeAVariable"}
Xb.prototype.h=function(){var a=new Xb;a.tb=this.tb;a.Uj=this.Uj;a.Je=this.Je;a.kd=this.kd;return a};
Xb.prototype.execute=function(a,b){if(a&&b)if(this.tb!=null){a=tb(this.tb,true,b);if(a!=null){var c=null;if(this.Je==1){c=tb(this.kd,false,b);if(c==null)return}if(c==null){c=new Yb;Zb(c,this.kd)}switch(this.Uj){case 0:c=c;if(c!=null){a.Fb=c.Fb;a.tc=c.tc;a.Lb=c.Lb;a.Kb=c.Kb}break;case 1:$b(a,Q(a)+Q(c));break;case 2:$b(a,Q(a)-Q(c));break;case 3:c=Q(c);$b(a,c!=0?Q(a)/c:0);break;case 4:c=Q(c);ac(a,c!=0?Math.floor(Q(a)/c):0);break;case 5:$b(a,Q(a)*Q(c));break;case 6:ac(a,Math.floor(Q(a)*Q(c)));break}bc(a,
b)}}};function cc(){this.i="IfVariable"}cc.prototype.h=function(a,b){var c=new cc;c.tb=this.tb;c.Rh=this.Rh;c.Je=this.Je;c.kd=this.kd;c.l=this.l?this.l.h(a,b):null;c.jh=this.jh?this.jh.h(a,b):null;return c};
cc.prototype.execute=function(a,b){if(a&&b)if(this.tb!=null){var c=tb(this.tb,true,b);if(c!=null){var d=null;if(this.Je==1){d=tb(this.kd,false,b);if(d==null)return}if(d==null){d=new Yb;Zb(d,this.kd)}b=false;switch(this.Rh){case 0:case 1:b=c.Fb==0&&d.Fb==0?ub(c)==ub(d):q.O(Q(c),Q(d));if(this.Rh==1)b=!b;break;case 2:b=Q(c)>Q(d);break;case 3:b=Q(c)<Q(d);break}if(b)this.l&&this.l.execute(a);else this.jh&&this.jh.execute(a)}}};function dc(){this.bh=null;this.T=false;this.i="RestartBehaviors"}
dc.prototype.h=function(a,b){var c=new dc;c.bh=this.bh;c.T=this.T;if(c.T==a)c.T=b;return c};dc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.T)c=a;else if(this.bh!=-1)c=L(b,this.bh);if(c)for(a=0;a<c.ga.length;++a){b=c.ga[a];b!=null&&b.reset()}}};function ec(){this.i="PlaySound"}ec.prototype.h=function(a,b){var c=new ec;c.Hi=this.Hi;c.ll=this.ll;c.Yj=this.Yj?this.Yj.e():null;c.Dd=this.Dd;c.Hg=this.Hg;c.Xj=this.Xj;c.Qf=this.Qf;c.wf=this.wf;c.Lc=this.Lc;if(c.Hi==a)c.Hi=b;return c};
ec.prototype.execute=function(a,b){if(!(b==null||this.Lc==null))this.nc=fc(q.Re,this.Lc,this.Xj,this.Qf)};function gc(){this.i="StopSound"}gc.prototype.h=function(){var a=new gc;a.Il=this.Il;a.on=this.on;return a};gc.prototype.execute=function(){for(var a=q.Re,b=0;b<a.Ob.length;++b){var c=a.Ob[b];c.Gk=true;c.src.ec.pause()}a.Ob=[]};function hc(){this.i="StoreLoadVariable"}hc.prototype.h=function(){var a=new hc;a.ki=this.ki;a.tb=this.tb;return a};
function ic(a,b,c,d){a=new Date;a.setDate(a.getDate()+d);c=escape(c)+("; expires="+a.toUTCString());document.cookie=b+"="+c}function jc(a,b){a=document.cookie.split(";");for(var c=0;c<a.length;++c){var d=a[c],e=d.indexOf("="),f=d.substr(0,e);f=f.replace(/^\s+|\s+$/g,"");if(f==b)return unescape(d.substr(e+1))}return null}hc.prototype.execute=function(a,b){if(!(this.tb==null||this.tb=="")){a=tb(this.tb,this.ki,b);if(a!=null)try{this.ki?Zb(a,jc(this,a.getName())):ic(this,a.getName(),ub(a),99)}catch(c){}}};
function kc(a){this.Wd=[];this.Ma=a}kc.prototype.execute=function(a){for(var b=0;b<this.Wd.length;++b)this.Wd[b].execute(a,this.Ma)};function lc(a,b){b!=null&&a.Wd.push(b)}function mc(a,b){for(var c=0;c<a.Wd.length;++c){var d=a.Wd[c];if(d.i==b)return d}return null}kc.prototype.h=function(a,b){for(var c=new kc(this.Ma),d=0;d<this.Wd.length;++d){var e=this.Wd[d];e.h!=null&&lc(c,e.h(a,b))}return c};function nc(a){this.Ia=a;this.i="RestartScene"}nc.prototype.h=function(){var a=new nc;a.xe=this.xe;return a};
nc.prototype.execute=function(){this.Ia&&this.Ia.Nk(this.xe)};function oc(){this.i="ActionDeleteSceneNode"}oc.prototype.h=function(a,b){var c=new oc;c.Ef=this.Ef;c.rj=this.rj;c.ok=this.ok;if(c.Ef==a)c.Ef=b;return c};oc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.rj)c=a;else if(this.Ef!=-1)c=L(b,this.Ef);c!=null&&pc(b,c,this.ok)}};function qc(){this.i="ActionCloneSceneNode"}
qc.prototype.h=function(a,b){var c=new qc;c.Df=this.Df;c.kj=this.kj;c.l=this.l?this.l.h(a,b):null;if(c.Df==a)c.Df=b;return c};qc.prototype.execute=function(a,b){if(a&&b){var c=null;if(this.kj)c=a;else if(this.Df!=-1)c=L(b,this.Df);if(c){var d=c.Qa;a=-1;a=rc(b);b=c.h(c.ac,d,a);if(b!=null){b.Qa=a;O(c.ac,b);this.l&&this.l.execute(b)}}}};function sc(){this.i=0;this.dc=this.$a=null;this.Ne=true;this.Hc=this.ub=false;this.$d=true}sc.prototype.dj=function(a){if(a){this.i=a.i;this.Ne=a.Ne;this.$a=a.$a;this.dc=a.dc;this.ub=a.ub;this.Hc=a.Hc;this.$d=a.$d}};sc.prototype.e=function(){var a=new sc;a.i=this.i;a.vk=this.vk;a.Ne=this.Ne;a.$a=this.$a;a.dc=this.dc;a.ub=this.ub;a.Hc=this.Hc;a.$d=this.$d;return a};function tc(a){return a.i==uc||a.i==vc||a.i==wc}n=sc.prototype;n.i=0;n.$a=null;n.dc=null;n.Ne=true;n.vk=true;n.ub=false;n.$d=true;
n.Hc=false;var uc=12,vc=13,wc=16;function xc(){this.g=new z;this.va=new sc;this.Z=[];this.j=[];this.La=null;this.vi=this.ui=false;this.Uc=this.gd=null}n=xc.prototype;n.g=null;n.va=null;n.Z=null;n.j=null;n.La=null;n.gd=null;n.Uc=null;n.update=function(a,b){if(a)this.ui=true;else if(b)this.vi=true;else this.La=null};function yc(a){if(!a.j||a.j.length==0)a.g.reset(0,0,0);else{var b=a.j[0];a.g.I=b.f.e();a.g.J=b.f.e();for(var c=1;c<a.j.length;++c){b=a.j[c];A(a.g,b.f)}}}
xc.prototype.h=function(){var a=new xc;a.g=this.g.e();a.va=this.va.e();if(this.j)for(var b=0;b<this.j.length;++b)a.j.push(this.j[b]);if(this.Z)for(b=0;b<this.Z.length;++b)a.Z.push(this.Z[b]);if(this.gd)for(b=0;b<this.gd.length;++b)a.gd.push(this.gd[b]);if(this.Uc)for(b=0;b<this.Uc.length;++b)a.Uc.push(this.Uc[b]);return a};function zc(){this.g=new z;this.Ja=[]}zc.prototype.Rc=function(a){this.Ja.push(a)};function Ac(a){var b=0;if(a.Ja)for(var c=0;c<a.Ja.length;++c)if(a.Ja[c].Z)b+=a.Ja[c].Z.length;return b/3}zc.prototype.h=function(){var a=new zc;a.g=this.g.e();if(this.Ja)for(var b=0;b<this.Ja.length;++b)this.Ja[b]&&a.Ja.push(this.Ja[b].h());return a};q.Vm=function(){this.Gj=[]};function Bc(a,b){for(var c=0;c<a.Gj.length;++c){var d=a.Gj[c];if(d.q==b)return d}return null}q.hn=function(){this.q="";this.Gg=new F;this.aa=[];this.kg=[];this.se=[];this.Id=[];this.we=[];this.Me=[];this.bi=new F;this.gf=new F;this.nf=new F;this.ig=new v(0,0,0);this.Yd=new v(1,1,1);this.jg=new I;this.yg=new F;this.el=false;this.Mo=this.No=this.Jo=-1};q.mn=function(){this.Gh=this.Ih=this.uh=0;this.Kl=new v;this.Jl=new v};q.ln=function(){this.frame=0;this.scale=new v};
q.jn=function(){this.frame=0;this.position=new v};q.kn=function(){this.frame=0;this.rotation=new I};q.Pg=function(){this.q="";this.Jb=this.K=this.Tc=0};q.Pg.prototype.q="";q.Pg.prototype.Tc=0;q.Pg.prototype.K=0;q.Pg.prototype.Jb=0;q.kk=function(){this.q="";this.Sc=[];this.Bc=0;this.Va=[];this.Ta=[];this.ue=[];this.qj=0;this.ql=this.jf=false;this.oo=this.Tm=this.Bj=0;this.cb=new z;this.kf=1;this.Ri=[];this.Kj=[]};q.kk.prototype.Rc=function(a){this.Va.push(a)};q.kk.prototype.fb=j("cb");
function Cc(a,b,c){if(!(b==null&&c!=null))if(b==null)for(b=0;b<a.ue.length;++b)Cc(a,a.ue[b],null);else{b.bi=c==null?b.Gg.e():H(c.bi,b.Gg);b.nf=b.Gg.e();b.gf=b.bi.e();if(Pa(b.yg)){b.yg=b.bi.e();Ya(b.yg)}for(c=0;c<b.aa.length;++c)Cc(a,b.aa[c],b)}}function Dc(a,b,c){if(b==null)for(b=0;b<a.ue.length;++b)Dc(a,a.ue[b],null);else{b.gf=c==null||b.el?b.nf.e():H(c.gf,b.nf);for(c=0;c<b.aa.length;++c)Dc(a,b.aa[c],b)}}
function Ec(a,b,c,d){if(b.Me.length){c=H(b.gf,b.yg);for(var e=new v,f=new v,g=a.Va,i,k=0;k<b.Me.length;++k){var m=b.Me[k];i=m.Kl;e.b=i.b*c.n+i.c*c.t+i.d*c.v+c.D;e.c=i.b*c.r+i.c*c.o+i.d*c.w+c.F;e.d=i.b*c.s+i.c*c.u+i.d*c.p+c.G;d&&Ta(c,f,m.Jl);i=g[m.uh];i=i.j[m.Ih];if(a.Ri[m.uh][m.Ih]){i.f.ra(x(e,m.Gh));d&&i.k.ra(x(f,m.Gh))}else{a.Ri[m.uh][m.Ih]=true;i.f=x(e,m.Gh);if(d)i.k=x(f,m.Gh)}}}for(c=0;c<b.aa.length;++c)Ec(a,b.aa[c],b,d)}
function Fc(a,b){if(!b)return null;var c=a.Kj.length;b=b.toLowerCase();for(var d=0;d<c;++d){var e=a.Kj[d];if(e.q&&e.q.toLowerCase()==b)return e}return null};function Gc(){this.Oa=[];this.R=null;this.wi=""}
function Hc(a,b,c){if(b==null||b=="")return null;var d=Ic(a,b);if(d!=null)return d;if(c){d=new rb;d.q=b;Jc(a,d);d.Xc=new Image;d.Xc.onload=function(){var e=d,f=a.R;if(f!=null){var g=f.ja,i=g.createTexture(),k=e.Xc;if((k.width&k.width-1)!=0||(k.height&k.height-1)!=0){var m=document.createElement("canvas");if(m!=null){m.width=Kc(f,k.width);m.height=Kc(f,k.height);m.getContext("2d").drawImage(k,0,0,k.width,k.height,0,0,m.width,m.height);k=m}}g.bindTexture(g.TEXTURE_2D,i);Lc(f,i,k);g.generateMipmap(g.TEXTURE_2D);
g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_NEAREST);g.bindTexture(g.TEXTURE_2D,null);f.Tk=true;e.ab=i;e.Yb=true}};d.Xc.src=d.q;return d}return null}function Ic(a,b){for(var c=0;c<a.Oa.length;++c){var d=a.Oa[c];if(d.q==b)return d}return null}function Jc(a,b){if(b!=null){Ic(a,b.q)!=null&&q.oa.print("ERROR! Cannot add the texture multiple times: "+b.q);a.Oa.push(b)}};function Mc(a){this.Sl=a;this.wn=a.length;this.Ca=0;this.zo=null;this.Ao=8;this.Xl=false}function R(a){return a.wn-a.Ca}function Nc(a,b){return a.Sl.charCodeAt(b)&255}function S(a){return Oc(a,1)!=0}function Pc(a,b){for(var c=0,d=a.Ca,e=d+b;e>d;)c=c*256+Nc(a,--e);a.Ca+=b;return c}function Oc(a,b){a=Pc(a,b);if(a&1<<b*8-1)a=(~a+1)*-1;return a}function U(a){return Oc(a,4)}
function V(a){var b;var c=a.Sl,d=a.Ca;b=c.charCodeAt(d+3)&255;var e=c.charCodeAt(d+2)&255,f=c.charCodeAt(d+1)&255;d=c.charCodeAt(d+0)&255;c=(b<<1&255|e>>7)-127;e=(e&127)<<16|f<<8|d;b=e==0&&c==-127?0:(1-2*(b>>7))*(1+e*Math.pow(2,-23))*Math.pow(2,c);a.Ca+=4;return b}Mc.prototype.pa=function(a,b){this.Xl=a||0;this.buffer=[];if(b){for(var c=a=b.length,d=this.buffer=new Array(a);c;d[a-c]=b.charCodeAt(--c));this.Xl&&d.reverse()}};Mc.prototype.reset=function(){this.Ca=0;return this};function Qc(){this.ja=this.canvas=null;this.height=this.width=0;this.Tk=false;this.sb=new F;this.ld=new F;this.ha=new F;this.Gb=new ka;this.Gb.Gd=0;this.Gb.Ad=0;this.Gb.ud=0;this.Ko=this.Lo=null;this.Bb=[];this.Zb=[];this.uo=20;this.Li=this.Rj=this.Zj=this.sl=this.rl=null;this.ke=[];this.wc=null;this.am=false}Qc.prototype.Rj=null;Qc.prototype.hc=j("width");function Rc(a){var b=a.Tk;a.Tk=false;return b}Qc.prototype.fc=j("height");
function Sc(a,b){if(b!=null)for(var c=0;c<b.Ja.length;++c){var d=b.Ja[c];Tc(a,d.va);Uc(a,d)}}
function Tc(a,b){if(b!=null){var c=a.ja;if(c!=null){var d=null;try{d=b.Hc?a.Zb[b.i]:a.Bb[b.i]}catch(e){}if(d!=null){a.wc=d;c.useProgram(d);if(a.Rj!=null)try{a.Rj(b.i)}catch(f){}if(d.An){c.enable(c.BLEND);c.blendFunc(d.Bn,d.zn)}else c.disable(c.BLEND);!b.Ne||tc(b)?c.depthMask(false):c.depthMask(true);b.vk?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST);b.$d?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE);if(b.$a&&b.$a.Yb){c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,b.$a.ab);c.texParameteri(c.TEXTURE_2D,
c.TEXTURE_WRAP_S,b.ub?c.CLAMP_TO_EDGE:c.REPEAT);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,b.ub?c.CLAMP_TO_EDGE:c.REPEAT)}else{c.activeTexture(c.TEXTURE0);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture1"),0);if(b.dc&&b.dc.Yb){c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,b.dc.ab)}else{c.activeTexture(c.TEXTURE1);c.bindTexture(c.TEXTURE_2D,null)}c.uniform1i(c.getUniformLocation(d,"texture2"),1)}}}}
function Uc(a,b,c){if(b!=null)if(a.ja!=null){if(b.La==null)Vc(a,b);else if(b.vi){if(!(b.j.length==0||b.Z.length==0))if(b.La.Cm<b.j.length||b.La.Zi<b.Z.length){b.La=null;Vc(a,b)}else if(b.La!=null){for(var d=a.ja,e=b.j.length,f=b.La.pm,g=b.La.Cn,i=0;i<e;++i){var k=b.j[i];f[i*3+0]=k.f.b;f[i*3+1]=k.f.c;f[i*3+2]=k.f.d;g[i*4+0]=q.We(k.ya)/255;g[i*4+1]=q.Ve(k.ya)/255;g[i*4+2]=q.Ue(k.ya)/255;g[i*4+3]=q.Te(k.ya)/255}d.bindBuffer(d.ARRAY_BUFFER,b.La.bj);d.bufferSubData(d.ARRAY_BUFFER,0,f);d.bindBuffer(d.ARRAY_BUFFER,
b.La.zk);d.bufferSubData(d.ARRAY_BUFFER,0,g);if(b.La.Zi<b.Z.length){e=b.Z.length;f=new WebGLUnsignedShortArray(e);for(g=0;g<e;g+=3){f[g+0]=b.Z[g+0];f[g+1]=b.Z[g+2];f[g+2]=b.Z[g+1]}b.La.Yi=d.createBuffer();d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.La.Yi);d.bufferData(d.ELEMENT_ARRAY_BUFFER,f,d.STATIC_DRAW);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}b.La.Zi=b.Z.length;b.La.Cm=b.j.length}}else b.ui&&Wc(a,b);b.ui=false;b.vi=false;b=b.La;c=c;d=a.ja;e=b.Sk&&b.yk;d.enableVertexAttribArray(0);d.enableVertexAttribArray(1);
d.enableVertexAttribArray(2);d.enableVertexAttribArray(3);d.enableVertexAttribArray(4);d.bindBuffer(d.ARRAY_BUFFER,b.bj);d.vertexAttribPointer(0,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Am);d.vertexAttribPointer(1,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.Bm);d.vertexAttribPointer(2,2,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.mm);d.vertexAttribPointer(3,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.zk);d.vertexAttribPointer(4,4,d.FLOAT,false,0,0);if(e){d.enableVertexAttribArray(5);
d.enableVertexAttribArray(6);d.bindBuffer(d.ARRAY_BUFFER,b.Sk);d.vertexAttribPointer(5,3,d.FLOAT,false,0,0);d.bindBuffer(d.ARRAY_BUFFER,b.yk);d.vertexAttribPointer(6,3,d.FLOAT,false,0,0)}d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,b.Yi);g=new F(false);a.sb.xa(g);g=H(g,a.ld);g=H(g,a.ha);f=a.wc;f.im!=null&&d.uniformMatrix4fv(f.im,false,Xc(a,g));if(f.hm!=null){g=new F(true);g=H(g,a.ld);g=H(g,a.ha);Ya(g);g=Za(g);d.uniformMatrix4fv(f.hm,false,Xc(a,g))}if(f.fm!=null){g=new F(true);g=H(g,a.ld);g=H(g,a.ha);d.uniformMatrix4fv(f.fm,
false,Xc(a,g))}f.gm!=null&&d.uniformMatrix4fv(f.gm,false,Xc(a,Za(a.ha)));f.em!=null&&Yc(a,f,e,e);if(c==null)c=b.Zi;d.drawElements(d.TRIANGLES,c,d.UNSIGNED_SHORT,0);if(e){d.disableVertexAttribArray(5);d.disableVertexAttribArray(6)}}}function Wc(a,b){if(b.La!=null){a=a.ja;for(var c=b.j.length,d=b.La.pm,e=0;e<c;++e){var f=b.j[e];d[e*3+0]=f.f.b;d[e*3+1]=f.f.c;d[e*3+2]=f.f.d}a.bindBuffer(a.ARRAY_BUFFER,b.La.bj);a.bufferSubData(a.ARRAY_BUFFER,0,d)}}
function Vc(a,b){if(b.La==null){a=a.ja;var c={},d=b.j.length,e=new WebGLFloatArray(d*3),f=new WebGLFloatArray(d*3),g=new WebGLFloatArray(d*2),i=new WebGLFloatArray(d*2),k=new WebGLFloatArray(d*4),m=null,o=null;if(b.gd)m=new WebGLFloatArray(d*3);if(b.Uc)o=new WebGLFloatArray(d*3);for(var p=0;p<d;++p){var h=b.j[p];e[p*3+0]=h.f.b;e[p*3+1]=h.f.c;e[p*3+2]=h.f.d;f[p*3+0]=h.k.b;f[p*3+1]=h.k.c;f[p*3+2]=h.k.d;g[p*2+0]=h.ua.b;g[p*2+1]=h.ua.c;i[p*2+0]=h.Kf.b;i[p*2+1]=h.Kf.c;k[p*4+0]=q.We(h.ya)/255;k[p*4+1]=
q.Ve(h.ya)/255;k[p*4+2]=q.Ue(h.ya)/255;k[p*4+3]=q.Te(h.ya)/255}if(m&&o)for(p=0;p<d;++p){h=b.gd[p];m[p*3+0]=h.b;m[p*3+1]=h.c;m[p*3+2]=h.d;h=b.Uc[p];o[p*3+0]=h.b;o[p*3+1]=h.c;o[p*3+2]=h.d}p=b.Z.length;h=new WebGLUnsignedShortArray(p);for(var u=0;u<p;u+=3){h[u+0]=b.Z[u+0];h[u+1]=b.Z[u+2];h[u+2]=b.Z[u+1]}c.bj=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.bj);a.bufferData(a.ARRAY_BUFFER,e,a.DYNAMIC_DRAW);c.pm=e;c.Am=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Am);a.bufferData(a.ARRAY_BUFFER,g,a.STATIC_DRAW);
c.Bm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Bm);a.bufferData(a.ARRAY_BUFFER,i,a.STATIC_DRAW);c.mm=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.mm);a.bufferData(a.ARRAY_BUFFER,f,a.STATIC_DRAW);if(m&&o){c.Sk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.Sk);a.bufferData(a.ARRAY_BUFFER,m,a.STATIC_DRAW);c.yk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.yk);a.bufferData(a.ARRAY_BUFFER,o,a.STATIC_DRAW)}a.bindBuffer(a.ARRAY_BUFFER,null);c.zk=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,c.zk);
a.bufferData(a.ARRAY_BUFFER,k,a.STATIC_DRAW);c.Cn=k;a.bindBuffer(a.ARRAY_BUFFER,null);c.Yi=a.createBuffer();a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,c.Yi);a.bufferData(a.ELEMENT_ARRAY_BUFFER,h,a.STATIC_DRAW);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);c.ja=a;c.Zi=p;c.Cm=d;b.La=c;b.ui=false;b.vi=false}}
function Yc(a,b,c,d){var e=new ArrayBuffer(16*Float32Array.BYTES_PER_ELEMENT);e=new WebGLFloatArray(e);var f=new ArrayBuffer(20*Float32Array.BYTES_PER_ELEMENT);f=new WebGLFloatArray(f);var g=new F(true);!c&&a.ke!=null&&a.ke.length>0&&Xa(a.ha,g);for(c=0;c<4;++c){var i=c*4;if(a.ke!=null&&c<a.ke.length){var k=a.ke[c],m=Ua(g,k.Wg);e[i]=m.b;e[i+1]=m.c;e[i+2]=m.d;m=1;m=d?1/(k.ta*k.ta):k.mg;e[i+3]=m;f[i]=k.ya.Gd;f[i+1]=k.ya.Ad;f[i+2]=k.ya.ud}else{e[i]=1;e[i+1]=0;e[i+2]=0;e[i+3]=1;f[i]=0;f[i+1]=0;f[i+2]=
0}f[i+3]=1}f[16]=a.Gb.Gd;f[17]=a.Gb.Ad;f[18]=a.Gb.ud;f[19]=1;a.ja.uniform4fv(b.em,e);a.ja.uniform4fv(b.Nn,f)}
function Zc(a,b,c,d,e,f,g){if(!(d<=0||e<=0||a.width==0||a.height==0)){var i=true;if(g==null||g==false)i=false;g=a.ja;g.enableVertexAttribArray(0);g.disableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var k=2/a.width,m=2/a.height;b=b*k-1;c=c*m-1;d*=k;e*=m;k=new WebGLFloatArray(12);k[0]=b;k[1]=c;k[2]=0;k[3]=b+d;k[4]=c;k[5]=0;k[6]=b+d;k[7]=c-e;k[8]=0;k[9]=b;k[10]=c-e;k[11]=0;b=new WebGLUnsignedShortArray(6);b[0]=0;b[1]=2;
b[2]=1;b[3]=0;b[4]=3;b[5]=2;c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,k,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);d=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,d);g.bufferData(g.ELEMENT_ARRAY_BUFFER,b,g.STATIC_DRAW);a.wc=a.rl;g.useProgram(a.wc);g.uniform4f(g.getUniformLocation(a.wc,"vColor"),q.We(f)/255,q.Ve(f)/255,q.Ue(f)/255,i?q.Te(f)/255:1);g.depthMask(false);g.disable(g.DEPTH_TEST);if(i){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);
g.drawElements(g.TRIANGLES,6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(d)}}
function $c(a,b,c,d,e,f,g,i,k,m){if(!(f==null||f.Yb==false||d<=0||e<=0||a.width==0||a.height==0)){if(k==null)k=1;if(m==null)m=1;var o=true;if(g==null||g==false)o=false;g=a.ja;g.enableVertexAttribArray(0);g.enableVertexAttribArray(1);g.disableVertexAttribArray(2);g.disableVertexAttribArray(3);g.disableVertexAttribArray(4);c=a.height-c;var p=2/a.width,h=2/a.height;b=b*p-1;c=c*h-1;d*=p;e*=h;p=new WebGLFloatArray(12);p[0]=b;p[1]=c;p[2]=0;p[3]=b+d;p[4]=c;p[5]=0;p[6]=b+d;p[7]=c-e;p[8]=0;p[9]=b;p[10]=c-
e;p[11]=0;b=new WebGLFloatArray(8);b[0]=0;b[1]=0;b[2]=k;b[3]=0;b[4]=k;b[5]=m;b[6]=0;b[7]=m;k=new WebGLUnsignedShortArray(6);k[0]=0;k[1]=2;k[2]=1;k[3]=0;k[4]=3;k[5]=2;m=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,m);g.bufferData(g.ARRAY_BUFFER,p,g.STATIC_DRAW);g.vertexAttribPointer(0,3,g.FLOAT,false,0,0);c=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,c);g.bufferData(g.ARRAY_BUFFER,b,g.STATIC_DRAW);g.vertexAttribPointer(1,2,g.FLOAT,false,0,0);b=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,
b);g.bufferData(g.ELEMENT_ARRAY_BUFFER,k,g.STATIC_DRAW);a.wc=i==null?a.sl:i;g.useProgram(a.wc);g.depthMask(false);g.disable(g.DEPTH_TEST);if(o){g.enable(g.BLEND);g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA)}else g.disable(g.BLEND);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f.ab);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.activeTexture(g.TEXTURE1);g.bindTexture(g.TEXTURE_2D,null);g.drawElements(g.TRIANGLES,
6,g.UNSIGNED_SHORT,0);g.deleteBuffer(c);g.deleteBuffer(m);g.deleteBuffer(b)}}function ad(a,b,c,d,e,f,g){if(!(f==null||f.Yb==false||d<=0||e<=0||a.width==0||a.height==0)){var i=a.ja;a.wc=a.Zj;i.useProgram(a.wc);i.uniform4f(i.getUniformLocation(a.wc,"vColor"),q.We(g)/255,q.Ve(g)/255,q.Ue(g)/255,q.Te(g)/255);$c(a,b,c,d,e,f,true,a.Zj,f.Wj/f.Qh,f.Vj/f.Ph)}}
function bd(a){if(!(a.canvas==null||a.ja==null))if(!(a.width==a.canvas.width&&a.height==a.canvas.height)){a.width=a.canvas.width;a.height=a.canvas.height;var b=a.ja;b.viewport&&b.viewport(0,0,a.width,a.height)}}
Qc.prototype.Za=function(a){this.canvas=a;this.ja=null;try{a=["webgl","experimental-webgl","moz-webgl","webkit-3d","3d"];for(var b=0;b<a.length;b++)try{this.ja=this.canvas.getContext(a[b],{alpha:false});if(this.ja!=null)break}catch(c){}}catch(d){}if(this.ja==null)return false;else{if(typeof WebGLFloatArray=="undefined"&&typeof Float32Array!="undefined")try{WebGLFloatArray=Float32Array;WebGLUnsignedShortArray=Uint16Array}catch(e){ha(q.oa,"Error: Float32 array types for webgl not found.")}if(typeof WebGLFloatArray==
"undefined"&&typeof CanvasFloatArray!="undefined")try{WebGLFloatArray=CanvasFloatArray;WebGLUnsignedShortArray=CanvasUnsignedShortArray}catch(f){ha(q.oa,"Error: canvas array types for webgl not found.")}a=this.ja;a.getProgramParameter||(a.getProgramParameter=a.getProgrami);a.getShaderParameter||(a.getShaderParameter=a.getShaderi);a=this.ja;b=W(this,this.Yf,this.Qe);var g=W(this,this.Yf,this.Bk),i=W(this,this.Yf,this.Hn),k=W(this,this.Yf,this.Qe,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),m=W(this,this.Yf,
this.cm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),o=W(this,this.Yf,this.Qe,true,a.ONE,a.ONE_MINUS_SRC_COLOR),p=W(this,this.Em,this.Bk),h=W(this,this.Em,this.Bk,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA),u=W(this,this.mo,this.Qe),r=W(this,this.lo,this.In);this.rl=W(this,this.ko,this.Kn);this.sl=W(this,this.Dm,this.Jn);this.Zj=W(this,this.Dm,this.Gn);this.Bb[0]=b;this.Bb[1]=b;this.Bb[2]=g;this.Bb[3]=g;this.Bb[4]=g;this.Bb[5]=i;this.Bb[uc]=o;this.Bb[vc]=k;this.Bb[14]=m;this.Bb[11]=p;this.Bb[wc]=h;this.Bb[17]=
r;this.Bb[23]=u;b=W(this,this.gj,this.Qe);k=W(this,this.gj,this.Qe,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);W(this,this.gj,this.cm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);o=W(this,this.gj,this.Qe,true,a.ONE,a.ONE_MINUS_SRC_COLOR);p=W(this,this.Fm,this.bm);h=W(this,this.Fm,this.bm,true,a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);this.Zb[0]=b;this.Zb[1]=b;this.Zb[2]=g;this.Zb[3]=g;this.Zb[4]=g;this.Zb[5]=i;this.Zb[uc]=o;this.Zb[vc]=k;this.Zb[11]=p;this.Zb[wc]=h;this.Zb[17]=r;a.useProgram(b);this.wc=b;a.clearColor(0,
0,1,1);a.clearDepth(1E4);a.depthMask(true);a.enable(a.DEPTH_TEST);a.disable(a.BLEND);a.blendFunc(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA);a.enable(a.CULL_FACE);a.cullFace(a.BACK);bd(this)}return true};function cd(a,b,c){a=a.ja;var d=a.createShader(b);if(d==null)return null;a.shaderSource(d,c);a.compileShader(d);if(!a.getShaderParameter(d,a.COMPILE_STATUS)){ha(q.oa,"Error loading "+(b==a.VERTEX_SHADER?"vertex":"fragment")+" shader: "+a.getShaderInfoLog(d));return null}return d}
function W(a,b,c,d,e,f,g){if(g==null)g=false;g=g;var i=a.ja,k=b,m=c;if(k.indexOf("precision ")==-1)k="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+b;if(m.indexOf("precision ")==-1)m="#ifdef GL_ES\t\t\t\t\t\t\t\t\t\t\t\t\n\tprecision mediump float;\t\t\t\t\t\t\t\t\t\n\t#endif\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n"+c;b=cd(a,i.VERTEX_SHADER,k);c=cd(a,i.FRAGMENT_SHADER,m);if(!b||!c){q.oa.print("Could not create shader program");g=
null}else{m=i.createProgram();i.attachShader(m,b);i.attachShader(m,c);i.bindAttribLocation(m,0,"vPosition");i.bindAttribLocation(m,1,"vTexCoord1");i.bindAttribLocation(m,2,"vTexCoord2");i.bindAttribLocation(m,3,"vNormal");i.bindAttribLocation(m,4,"vColor");if(g){i.bindAttribLocation(m,5,"vBinormal");i.bindAttribLocation(m,6,"vTangent")}i.linkProgram(m);if(i.getProgramParameter(m,i.LINK_STATUS)){i.useProgram(m);i.uniform1i(i.getUniformLocation(m,"texture1"),0);i.uniform1i(i.getUniformLocation(m,"texture2"),
1)}else q.oa.print("Could not link program:"+i.getProgramInfoLog(m));g=m}if(g){g.An=d?d:false;g.Bn=e;g.zn=f;a=a.ja;g.im=a.getUniformLocation(g,"worldviewproj");g.hm=a.getUniformLocation(g,"normaltransform");g.fm=a.getUniformLocation(g,"modelviewtransform");g.gm=a.getUniformLocation(g,"worldtransform");g.em=a.getUniformLocation(g,"arrLightPositions");g.Nn=a.getUniformLocation(g,"arrLightColors")}return g}Qc.prototype.Qc=function(a){a&&a.xa(this.ha)};
function Xc(a,b){return new WebGLFloatArray([b.n,b.r,b.s,b.A,b.t,b.o,b.u,b.B,b.v,b.w,b.p,b.C,b.D,b.F,b.G,b.H])}Qc.prototype.deleteTexture=function(a){if(a!=null){this.ja.deleteTexture(a.ab);a.ab=null;a.Yb=false}};function Kc(a,b){--b;for(a=1;a<32;a<<=1)b|=b>>a;return b+1}
function Lc(a,b,c){b=a.ja;try{b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c)}catch(d){var e=navigator.userAgent;if(e!=null&&e.indexOf("Firefox")!=-1){a.am==false&&ha(q.oa,"<i>Firefox doesn't allow loading textures from other domains and from local disk anymore.<br/>Workaround: set security.fileuri.strict_origin_policy in about:config to 'false'</i>",true);a.am=true}else try{b.texImage2D(b.TEXTURE_2D,0,c)}catch(f){}}}
function dd(a){if(a.Li==null){var b=null;b=new xc;var c=new K(true),d=new K(true),e=new K(true),f=new K(true),g=b.Z;g.push(0);g.push(2);g.push(1);g.push(0);g.push(3);g.push(2);g=b.j;g.push(c);g.push(d);g.push(e);g.push(f);c.ua.b=1;c.ua.c=1;c.f.set(1,-1,0);d.ua.b=1;d.ua.c=0;d.f.set(1,1,0);e.ua.b=0;e.ua.c=0;e.f.set(-1,1,0);f.ua.b=0;f.ua.c=1;f.f.set(-1,-1,0);a.Li=b}}n=Qc.prototype;n.ko="\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Dm="\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\tattribute vec4 vTexCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = vPosition;\t\t\t\t\t\t\t\t\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";n.Kn="\t\t\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t         gl_FragColor = vColor;\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Gn="\t\t\t\tuniform vec4 vColor;\t\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        float alpha = texture2D(texture1, texCoord).r;\t\t        gl_FragColor = vec4(vColor.rgb, alpha);\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Yf="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.gj="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0, 0, 0, 1.0);\t\t\t\t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\tcurrentLight = currentLight * vec4(vColor.x, vColor.y, vColor.z, 1.0);\t\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.mo="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\tattribute vec4 vNormal;\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\t\tv_color = vColor;\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Em="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tgl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 n = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, n.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = (r.x / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n\t\tv_texCoord2.y = (r.y / (2.0 * m)  + 0.5);\t\t\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.Fm="\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 modelviewtransform;\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        gl_Position = worldviewproj * vPosition;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t//\tuse reflection\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 pos = normalize((modelviewtransform * vPosition).xyz);\t\t\t\t\t\n\t\tvec3 nt = normalize((normaltransform * vec4(vNormal, 1)).xyz);\t\t\n\t\tvec3 r = reflect( pos.xyz, nt.xyz );\t\t\t\t\t\t\t\n\t\tfloat m = sqrt( r.x*r.x + r.y*r.y + (r.z+1.0)*(r.z+1.0) ); \n\t\t//\ttexture coordinates\t\t\t\t\t\t\t\t\n\t\tv_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\n\t\tv_texCoord2.x = r.x / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\tv_texCoord2.y = r.y / (2.0 * m)  + 0.5;\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 n = normalize(vec3(vNormal.xyz));\t\t\t\t\t\t\tvec4 currentLight = vec4(0.0, 0.0, 0.0, 1.0);\t \t\t\t\tfor(int i=0; i<4; ++i)\t\t\t\t\t\t\t\t\t\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec3 lPos = vec3(arrLightPositions[i].xyz);\t\t\t\t\t\tvec3 vertexToLight = lPos - vec3(vPosition.xyz);\t\t\t\tfloat distance = length( vertexToLight );\t\t\t\t\t\tfloat distanceFact = 1.0 / (arrLightPositions[i].w * distance); \t\t\tvertexToLight = normalize(vertexToLight); \t\t\t\t\t\tfloat angle = max(0.0, dot(n, vertexToLight));\t\t\t\t\tfloat intensity = angle * distanceFact;\t\t\t\t\t\t\tcurrentLight = currentLight + vec4(arrLightColors[i].x*intensity, arrLightColors[i].y*intensity, arrLightColors[i].z*intensity, 1.0);\t\t\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tcurrentLight = currentLight + arrLightColors[4];\t\t\t\tcurrentLight = max(currentLight, vec4(0.0,0.0,0.0,0.0));\t\t\t//v_color = currentLight;\t\t\t\t\t\t\t\t\n\t\tv_color = min(currentLight, vec4(1.0,1.0,1.0,1.0));\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.lo="\t\t\t\t\tuniform mat4 worldviewproj;\t\t\t\t\t\t\t\t\t\n\tuniform mat4 normaltransform;\t\t\t\t\t\t\t\t\n\tuniform mat4 worldtransform;\t\t\t\t\t\t\t\t\n\tuniform vec4 arrLightPositions[4];\t\t\t\t\t\t\t\n\tuniform vec4 arrLightColors[5]; \t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vPosition;\t\t\t\t\t\t\t\t\t\n    attribute vec3 vNormal;\t\t\t\t\t\t\t\t\t\t\n\tattribute vec4 vColor;\t\t\t\t\t\t\t\t\t\t\n    attribute vec2 vTexCoord1;\t\t\t\t\t\t\t\t\t\n\tattribute vec2 vTexCoord2;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vBinormal;\t\t\t\t\t\t\t\t\t\n\tattribute vec3 vTangent;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t// Output:\t\t\t\t\t\t\t\t\t\t\t\t\t\n    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\n\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\n\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t\n    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n        gl_Position = worldviewproj * vPosition;\t\t\t\t\n        v_texCoord1 = vTexCoord1.st;\t\t\t\t\t\t\t\n\t\tv_texCoord2 = vTexCoord2.st;\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec4 pos = vec4(dot(vPosition, worldtransform[0]), dot(vPosition, worldtransform[1]), dot(vPosition, worldtransform[2]), dot(vPosition, worldtransform[3]));\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// transform normal, binormal and tangent\t\t\t\t\t\n\t\tvec3 normal = vec3(dot(vNormal.xyz, worldtransform[0].xyz), dot(vNormal.xyz, worldtransform[1].xyz), dot(vNormal.xyz, worldtransform[2].xyz));\t\t\n\t\tvec3 tangent = vec3(dot(vTangent.xyz, worldtransform[0].xyz), dot(vTangent.xyz, worldtransform[1].xyz), dot(vTangent.xyz, worldtransform[2].xyz));     \n\t\tvec3 binormal = vec3(dot(vBinormal.xyz, worldtransform[0].xyz), dot(vBinormal.xyz, worldtransform[1].xyz), dot(vBinormal.xyz, worldtransform[2].xyz));     \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 temp = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\tvec3 lightPos = vec3(arrLightPositions[i].xyz);\t\t\n\t\t\tvec3 vertexToLight = lightPos - vec3(pos.xyz); \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// transform the light vector 1 with U, V, W\t\t\n\t\t\ttemp.x = dot(tangent.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.y = dot(binormal.xyz, vertexToLight);\t\t\t\t\n\t\t\ttemp.z = dot(normal.xyz, vertexToLight);\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// normalize light vector\t\t\t\t\t\n\t\t\ttemp = normalize(temp); \t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// move from -1..1 to 0..1 and put into output\t\t\n\t\t\ttemp = temp * 0.5;\t\t\t\t\t\t\t\n\t\t\ttemp = temp + vec3(0.5,0.5,0.5);\t\t\t\n\t\t\tv_lightVector[i] = temp;\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// calculate attenuation\t\t\t\t\t\n\t\t\tfloat distanceFact = 1.0 / sqrt(dot(vertexToLight, vertexToLight) * arrLightPositions[i].w); \n\t\t\tv_lightColor[i] = min(vec3(arrLightColors[i].x*distanceFact, arrLightColors[i].y*distanceFact, arrLightColors[i].z*distanceFact), vec3(1,1,1));\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t// ambient light\n\t\tambientLight = arrLightColors[4].xyz;\t\t\t\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";
n.Jn="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord);\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Qe="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.cm="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord = vec2(v_texCoord1.s, v_texCoord1.t);\t\t        gl_FragColor = texture2D(texture1, texCoord) * v_color;\t\t\tif(gl_FragColor.a < 0.5)\t\t\t\t\t\t\t\t\t\t\tdiscard;\t\t\t\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Bk="\t\t\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2;\t\t\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.Hn="\t\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tgl_FragColor = col1 * col2 * 3.0;\t\t\t\t\t\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.bm="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec4 v_color;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t        vec2 texCoord1 = vec2(v_texCoord1.s, v_texCoord1.t);\t\t\tvec2 texCoord2 = vec2(v_texCoord2.s, v_texCoord2.t);\t        vec4 col1 = texture2D(texture1, texCoord1);\t\t\t\t\t\tvec4 col2 = texture2D(texture2, texCoord2);\t\t\t\t\t\tvec4 final = col1 * col2 * v_color;\t\t\t\t\t\t\t\tgl_FragColor = vec4(final.x, final.y, final.z, col1.w);\t    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t";
n.In="\t\tuniform sampler2D texture1;\t\t\t\t\t\t\t\t\t\tuniform sampler2D texture2;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    varying vec2 v_texCoord1;\t\t\t\t\t\t\t\t\t\tvarying vec2 v_texCoord2;\t\t\t\t\t\t\t\t\t\tvarying vec3 v_lightVector[4];\t\t\t\t\t\t\t\t\tvarying vec3 v_lightColor[4];\t\t\t\t\t\t\t\t\tvarying vec3 ambientLight;\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t    void main()\t\t\t\t\t\t\t\t\t\t\t\t\t    {\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvec4 colorMapSample = texture2D(texture1, v_texCoord1);\t\t\tvec3 normalMapVector = texture2D(texture2, v_texCoord1).xyz;\t\t//normalMapVector -= vec3(0.5, 0.5, 0.5);\t\t\t\t\t\n\t\t//normalMapVector = normalize(normalMapVector); \t\t\t\n\t\tnormalMapVector *= vec3(2.0, 2.0, 2.0);\t\t\t\t\t\n\t\tnormalMapVector -= vec3(1.0, 1.0, 1.0);\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\tvec3 totallight = vec3(0.0, 0.0, 0.0);\t\t\t\t\t\t\n\t\tfor(int i=0; i<4; ++i) \t\t\t\t\t\t\t\t\t\n\t\t{\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// process light\t\t\t\t\t\t\t\t\t\n\t\t\t//vec3 lightvect = v_lightVector[i] + vec3(-0.5, -0.5, -0.5); \n\t\t\tvec3 lightvect = (v_lightVector[i] * vec3(2.0, 2.0, 2.0)) - vec3(1.0, 1.0, 1.0); \n\t\t\tlightvect = normalize(lightvect);\t\t\t\t\t\n\t\t\tfloat luminance = dot(lightvect, normalMapVector); // normal DOT light\t\t\n\t\t\tluminance = clamp(luminance, 0.0, 1.0);\t// clamp result to positive numbers\t\t\n\t\t\tlightvect = luminance * v_lightColor[i];\t// luminance * light color \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t// add to previously calculated lights\t\t\t\t\n\t\t\ttotallight = totallight + lightvect;\t\t\t\t\n\t\t}\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\ttotallight = totallight + ambientLight;\t\t\t\t\t\n\t\tgl_FragColor = colorMapSample * vec4(totallight.x, totallight.y, totallight.z, 0.0);\t\n    }\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t";function ed(a,b){for(var c=0;c<a.lk.length;++c){var d=a.lk[c];if(d.q==b)return d}return null}function fd(a,b,c){if(b==null||b=="")return null;var d=ed(a,b);if(d!=null)return d;if(c){b=d=new gd(b);if(b!=null){ed(a,b.q)!=null&&q.oa&&q.oa.print("ERROR! Cannot add the sound multiple times: "+b.q);a.lk.push(b)}return d}return null}
function fc(a,b,c,d){if(b==null)return null;var e=null;e=typeof b=="string"?fd(a,b,true):b;if(e==null||e.ec==null)return null;hd(a);for(b=0;b<a.Ob.length;)if(a.Ob[b].src===e){a.Ob[b].src.ec.pause();a.Ob.splice(b,1)}else++b;try{e.ec.currentTime=0}catch(f){}if(typeof d==="undefined")d=1;e.ec.volume=d*a.Bd;e.ec.play();var g=new id(e);g.om=d;a.Ob.push(g);e.Hk&&e.ec.removeEventListener("ended",e.Hk,false);e.ec.Hk=null;if(c){g.jm=true;a=function(){if(!g.Gk){try{this.currentTime=0}catch(i){}this.play()}};
e.ec.addEventListener("ended",a,false);e.ec.Hk=a}return g}function jd(a,b){a.Bd=b;if(a.Bd<0)a.Bd=0;if(a.Bd>1)a.Bd=1;try{for(b=0;b<a.Ob.length;++b){var c=a.Ob[b];c.src.ec.volume=c.om*a.Bd}}catch(d){}}function hd(a){for(var b=0;b<a.Ob.length;)if(kd(a.Ob[b]))a.Ob.splice(b,1);else++b}q.Re=new function(){this.lk=[];this.Ob=[];this.Bd=1};function gd(a){this.q=a;var b=null;try{b=new Audio;b.src=a}catch(c){}this.loaded=true;this.ec=b}
function id(a){this.src=a;this.jm=this.Gk=false;this.om=1;this.startTime=(new Date).getTime()}function kd(a){if(a.Gk)return true;if(a.jm)return false;var b=(new Date).getTime(),c=a.src.duration;return c>0&&b>a.startTime+c};function ld(a,b,c,d,e,f){if((b==null||b==true)&&q.oa==null)q.oa=new da(a,d);this.Nm=a;this.Yc=document.getElementById(this.Nm);this.sa=new md;this.R=null;this.Qm=false;this.uf=null;this.Xa=new Gc;this.Ld=new q.Vm;this.sh=this.Eg=false;this.jl=0;this.Jb=60;this.Tj=this.Pj=this.Qj=this.Nb=null;this.Xm=f==null?'Error: This browser does not support WebGL (or it is disabled).<br/>See <a href="www.ambiera.com/copperlicht/browsersupport.html">here</a> for details.':f;this.xf=[];this.Ai=[];this.Ng=false;
this.Mg=this.Lg=this.mc=this.lc=0;this.Og=true;this.Dj=0;this.li=null;e!=null&&nd(this,true,e);od(this);if(c)this.Jb=c;var g=this;setInterval(function(){g.li!=null&&pd(g);if(q.oa){++g.jl;var i=0,k=0;if(g.Xa){i=g.Xa;for(var m=k=0;m<i.Oa.length;++m)i.Oa[m].Yb==false&&++k;i=k;k=g.Xa.Oa.length}if(g.sh&&i==0){g.sh=false;qd(g)}if(g.Eg||i){m="Loading";if(i>0)m="Textures loaded: "+(k-i)+"/"+k;switch(g.jl%4){case 0:m+="   ";break;case 1:m+=".  ";break;case 2:m+=".. ";break;case 3:m+="...";break}ga(q.oa,m)}else ga(q.oa,
null)}},500);rd(X(),this)}function sd(a){if(a.sa==null)return null;return a.sa.Uf()}
function td(a){document.onkeydown=function(e){ud(a,e)};document.onkeyup=function(e){vd(a,e)};var b=a.Yc;if(b!=null){b.onmousemove=function(e){e=e;if(e==null)e=window.event;if(e){a.lc=wd(a,e);a.mc=xd(a,e)}var f=sd(a);if(f!=null){var g=f.fa;g!=null&&g.Td(e);g=e;for(var i=0;i<f.pc.length;++i)f.pc[i].Td(g);yd(a,e,true)}};b.onmousedown=function(e){e=e;if(e==null)e=window.event;a.Ng=true;a.Og=true;if(e){a.Lg=wd(a,e);a.Mg=xd(a,e)}var f=sd(a);if(f!=null){var g=f.fa;g!=null&&g.nd(e);g=e;for(var i=0;i<f.pc.length;++i)f.pc[i].nd(g);
yd(a,e,true)}};b.onmouseup=function(e){e=e;if(e==null)e=window.event;a.Ng=false;var f=sd(a);if(f!=null){var g=f.fa;g!=null&&g.Oc(e);g=e;for(var i=0;i<f.pc.length;++i)f.pc[i].Oc(g);yd(a,e,true)}};b.onmouseover=function(){a.Og=true};b.onmouseout=function(){a.Og=false};try{var c=function(e){(e=e)||(e=event);if(e){e=e.detail<0||e.wheelDelta>0?1:-1;var f=sd(a);if(f!=null){var g=f.fa;g!=null&&g.Xe(e);for(g=0;g<f.pc.length;++g)f.pc[g].Xe(e)}}};b.addEventListener("mousewheel",c,false);b.addEventListener("DOMMouseScroll",
c,false)}catch(d){}}}ld.prototype.load=function(a){if(!zd(this)){nd(this,false,this.Xm);return false}var b=this;this.Eg=true;(new ja(a)).load(function(c){b.Lk(c,a)});return true};
function zd(a){if(a.R!=null)return true;var b=a.Yc;if(b==null)return false;var c=q.fk!=null&&q.fk.Fo;a.R=new Qc;if(c||a.R.Za(b)==false)if(q.fk!=null){a.R=new q.fk;if(a.R.Za(b)==false)return false}else return false;if(a.Xa)a.Xa.R=a.R;td(a);setInterval(function(){Ad(a);if(q.oa!=null){a.sa.Uf();var d=q.oa;if(d.cl!=null){d.frames+=1;var e=(new Date).getTime();if(e-d.Ik>1E3){var f="FPS: "+(d.frames/(e-d.Ik)*1E3).toFixed(2);d.cl.nodeValue=f;d.Ik=e;d.frames=0}}}},1E3/a.Jb);return true}
ld.prototype.Lk=function(a,b){this.Eg=false;var c=new Bd;a=c.Mn(a,b,this.Xa,this.Ld,this);if(a!=null){this.sa=a;if(c.il){this.fl=c.Ll;this.Sm=b}if(a.Ql)this.sh=true;else qd(this)}};function qd(a){a.Xi(a.sa.Uf());Ad(a);a.Tj!=null&&a.Tj()}
function Ad(a){if(!(a.sa==null||a.R==null))if(!(a.Eg||a.sh)){od(a);Cd(a);var b=a.sa.Uf();if(!a.Qm&&b){a.Nb&&a.Nb();var c;var d=a.R;b.ji=d;if(b.Ba==0)b.Ba=t();b.sn=null;c=false;var e;if(b.tg.length==0)e=false;else{e=t();for(var f=false,g=0;g<b.tg.length;){var i=b.tg[g];if(i.io<e){i.Xf.ac&&i.Xf.ac.removeChild(i.Xf);b.tg.splice(g,1);f=true}else++g}e=f}if(e)c=true;if(b.Aa.Nb(b,t()))c=true;if(b.fa){e=new F(false);b.fa.sb.xa(e);e=H(e,b.fa.Le);e=!e.O(b.Dg)}else e=true;d=d?Rc(d):false;if(b.uj||b.zi==0&&(e||
d)||b.zi==1&&(e||c||d)||b.zi==2||Dd(X())){b.uj=false;c=true}else c=false;if(c){d=a.R;c=b.Xk;if(d.ja!=null){bd(d);d=d.ja;d.depthMask(true);d.clearColor(q.We(c)/255,q.Ve(c)/255,q.Ue(c)/255,1);d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}a.Qj&&a.Qj();Ed(b,a.R);a.Pj&&a.Pj();b=q.Ya;b!=null&&Fd(b,a.R);b=a.R;b.ja!=null&&b.ja.flush()}}Cd(a)}}ld.prototype.Tl=function(a){if(this.sa){this.sa.bc.push(a);this.sa.bc.length==1&&this.sa.um(a)}};
function Jb(a,b,c){if(!a.sa)return false;var d=a.sa.bc;b=b;if(c)b=b.toLowerCase();for(var e=0;e<d.length;++e){var f=d[e].q;if(c)f=f.toLowerCase();if(b==f){a.Xi(d[e]);return true}}return false}
ld.prototype.Xi=function(a){if(!a)return false;var b=a.Wi()=="panorama",c=a.Wi()=="free",d=null;this.sa.um(a);if(!a.Rl){a.Rl=true;var e=false,f=Gd(a,"camera");if(f)for(var g=0;g<f.length;++g){var i=f[g];if(i&&i.Vk){d=i;e=true;Hd(d,this.R.width,this.R.height);break}}if(!e){e=4/3;if(this.R.width&&this.R.height)e=this.R.width/this.R.height;d=new Id;Jd(d,e);O(a.Aa,d);e=null;if(!b){e=new Kd(d,this);zb(d,e)}if(c){if(a.pj!=null)d.f=a.pj.e();if(a.Vh!=null)e!=null?Ob(e,a.Vh):Nb(d,a.Vh)}e&&Ld(e,!b)}a.fa=d;
a.lj=Md(a,true);Nd(this,a.Aa,a.lj)}X().Wb=a;a.zi=this.sa.tn;return a.uj=true};function Cd(a){if(a.uf!=null){var b=a.sa.Uf();if(b!=null)if(a.uf.$===b){a.R&&Hd(a.uf,a.R.hc(),a.R.fc());b.fa=a.uf;a.uf=null}}}function ud(a,b){var c=sd(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.fa;if(c!=null)d=c.Rd(b);for(c=0;c<a.xf.length;++c)if(a.Ai[c].Rd(b))d=true;return yd(a,b,d)}
function vd(a,b){var c=sd(a);if(c==null)return false;if(b==null)b=window.event;var d=false;c=c.fa;if(c!=null)d=c.Sd(b);for(c=0;c<a.xf.length;++c)if(a.xf[c].Sd(b))d=true;return yd(a,b,d)}function yd(a,b,c){if(c){try{b.preventDefault()}catch(d){}return true}return false}function od(a){for(var b=0,c=0,d=a.Yc;d!=null;){b+=d.offsetLeft;c+=d.offsetTop;d=d.offsetParent}a.Zk=b;a.$k=c}function wd(a,b){return b.pageX?b.pageX-a.Zk:b.clientX-a.Yc.offsetLeft+document.body.scrollLeft}
function xd(a,b){return b.pageY?b.pageY-a.$k:b.clientY-a.Yc.offsetTop+document.body.scrollTop}ld.prototype.Nb=null;ld.prototype.Pj=null;ld.prototype.Qj=null;ld.prototype.Tj=null;function Od(a,b,c){a=a.R;if(a==null)return null;var d=a.sb,e=a.ld;if(d==null||e==null)return null;d=H(d,e);var f=new lb;f.dj(d);d=nb(f);e=ob(f).substract(d);f=qb(f).substract(d);var g=a.hc();a=a.fc();c=c/a;return d.add(x(e,b/g)).add(x(f,c))}
function Pd(a,b){var c=new F(false),d=a.R;if(!d.sb)return null;d.sb.xa(c);c=H(c,d.ld);a=d.hc()/2;d=d.fc()/2;if(d==0||a==0)return null;b=new v(b.b,b.c,b.d);b.W=1;c=c;var e=b.e();e.qa=b.W;b.b=e.b*c.n+e.c*c.t+e.d*c.v+e.qa*c.D;b.c=e.b*c.r+e.c*c.o+e.d*c.w+e.qa*c.F;b.d=e.b*c.s+e.c*c.u+e.d*c.p+e.qa*c.G;b.W=e.b*c.A+e.c*c.B+e.d*c.C+e.qa*c.H;c=b.W==0?1:1/b.W;if(b.d<0)return null;e=new Da;e.b=a*b.b*c+a;e.c=d-d*b.c*c;return e}function Lb(a,b){if(b!=null)a.uf=b}
function Nd(a,b,c){if(b){for(var d=0;d<b.ga.length;++d){var e=b.ga[d];if(e)if(e.m()=="collisionresponse")e.Qc(c);else if(e.m()=="onclick"||e.m()=="onmove")e.ha=c;else if(e.m()=="gameai")e.ha=c;else if(e.m()=="3rdpersoncamera")e.ha=c}for(d=0;d<b.aa.length;++d)(e=b.aa[d])&&Nd(a,e,c)}}
ld.prototype.Nk=function(a){if(!a||!this.sa)return false;if(this.fl==null)return false;for(var b=null,c=-1,d=0;d<this.sa.bc.length;++d)if(a==this.sa.bc[d].q){c=d;b=this.sa.bc[d];break}if(c==-1)return false;a=(new Bd).Nk(this.fl,b,c,this.Sm,this.Xa,this.Ld,this);if(a!=null){b=this.sa.Uf()==b;this.sa.bc[c]=a;b&&this.Xi(a)}return true};function pd(a){if(!a.Eg&&!a.sh){a.li.style.display="none";a.li=null}}
function nd(a,b,c){if(a.Yc!=null){var d=document.createElement("div");a.Yc.parentNode.appendChild(d);var e=document.createElement("div");od(a);var f=b?23:100,g=b?30:0,i=a.Zk+(a.Yc.width-200)/2,k=a.$k+a.Yc.height/2;b||(k+=30);c=c.replace("$PROGRESS$","");e.style.cssText="position: absolute; left:"+i+"px; top:"+k+"px; color:#ffffff; padding:5px; background-color:#000000; height:"+f+"px; width:200px; border-radius:5px; border:1px solid #777777;  opacity:0.5;";c='<p style="margin:0; padding-left:'+g+
'px; padding-bottom:5px;">'+c+"</p> ";if(b)c+='<img style="position:absolute; left:5px; top:3px;" src="copperlichtdata/loading.gif" />';e.innerHTML=c;d.appendChild(e);if(b)a.li=d}};function Y(){this.i=-1;this.f=new v;this.P=new v;this.na=new v(1,1,1);this.S=true;this.q="";this.hb=0;this.Qa=-1;this.ac=null;this.aa=[];this.ga=[];this.Y=new F;this.sc=this.$=null}n=Y.prototype;n.Za=function(){this.f=new v;this.P=new v;this.na=new v(1,1,1);this.aa=[];this.ga=[];this.Y=new F};n.f=null;n.P=null;n.na=null;n.S=true;n.q="";n.Qa=-1;n.sc=null;n.ac=null;n.m=l("none");n.fb=function(){return new z};
function M(a,b){for(var c=0;c<a.ga.length;++c){var d=a.ga[c];if(d.m()==b)return d}return null}function Qd(a,b){for(var c=0;c<a.ga.length;++c){var d=a.ga[c].Pe(b);if(d!=null)return d}return null}function Z(a){var b=a.fb().e();fb(a.Y,b);return b}
function Rd(a,b,c,d,e){b.q=new String(a.q);b.S=a.S;b.hb=a.hb;b.f=a.f.e();b.P=a.P.e();b.na=a.na.e();b.i=a.i;c&&O(c,b);for(c=0;c<a.aa.length;++c){var f=a.aa[c];if(f){f=f.h(b,-1,-1);f!=null&&O(b,f)}}for(c=0;c<a.ga.length;++c)zb(b,a.ga[c].h(a,a.$,d,e));if(a.Y)b.Y=a.Y.e();b.$=a.$}Y.prototype.h=l(null);function zb(a,b){b!=null&&a.ga.push(b)}function Sd(a,b){if(b!=null){var c;for(c=0;c<a.ga.length;++c)if(a.ga[c]===b){a.ga.splice(c,1);return}}}
function O(a,b){if(b){b.$=a.$;b.ac&&b.ac.removeChild(b);b.ac=a;a.aa.push(b)}}Y.prototype.removeChild=function(a){for(var b=0;b<this.aa.length;++b)if(this.aa[b]===a){a.ac=null;this.aa.splice(b,1);return}};Y.prototype.Ka=function(a){if(this.S)for(var b=0;b<this.aa.length;++b)this.aa[b].Ka(a)};
Y.prototype.Nb=function(a,b){var c=false;if(this.S){var d,e=this.ga.length;for(d=0;d<e;){c=this.ga[d].Wa(this,b)||c;var f=e;e=this.ga.length;f>=e&&++d}P(this);for(d=0;d<this.aa.length;++d)c=this.aa[d].Nb(a,b)||c}return c};Y.prototype.Fk=function(){var a=new F;bb(a,this.P);db(a,this.f);if(this.na.b!=1||this.na.c!=1||this.na.d!=1){var b=new F;eb(b,this.na);a=H(a,b)}return a};function P(a){a.Y=a.ac!=null?H(a.ac.Y,a.Fk()):a.Fk()}Y.prototype.qb=aa();function N(a){return new v(a.Y.D,a.Y.F,a.Y.G)}
Y.prototype.xc=l(0);Y.prototype.gc=l(null);function Id(){this.Za();this.g=new z;this.Vk=this.Dc=false;this.ea=new v(0,0,10);this.Qb=new v(0,1,0);this.sb=new F;this.Le=new F;this.Fc=q.PI/2.5;this.ic=4/3;this.Sf=0.1;this.Rf=3E3;this.rn=true;ab(this.sb,this.Fc,this.ic,this.Sf,this.Rf)}Id.prototype=new Y;function Td(a){ab(a.sb,a.Fc,a.ic,a.Sf,a.Rf)}Id.prototype.m=l("camera");function Jd(a,b){if(!q.O(a.ic,b)){a.ic=b;Td(a)}}function Ud(a,b){if(!q.O(a.Fc,b))if(!isNaN(b)){a.Fc=b;Td(a)}}
function Nb(a,b){if(b){a.ea=b.e();if(a.rn){P(a);a.P=ya(b.substract(N(a)))}}}Id.prototype.Nb=function(a,b){a=Y.prototype.Nb.call(this,a,b);Vd(this);return a};function Vd(a){var b=N(a),c=a.ea.e();if(b.O(c))c.b+=1;var d=a.Le;a=a.Qb;c=c.substract(b);c.normalize();a=xa(a,c);a.normalize();var e=xa(c,a);d.n=a.b;d.r=e.b;d.s=c.b;d.A=0;d.t=a.c;d.o=e.c;d.u=c.c;d.B=0;d.v=a.d;d.w=e.d;d.p=c.d;d.C=0;d.D=-a.da(b);d.F=-e.da(b);d.G=-c.da(b);d.H=1;d.Da=false}n=Id.prototype;
n.Ka=function(a){if(a.fa===this){Wd(a,this,2);Y.prototype.Ka.call(this,a)}};n.qb=function(a){Vd(this);if(this.ic==0){Hd(this,a.width,a.height);this.ic==0&&Jd(this,0.75)}this.sb.xa(a.sb);this.Le.xa(a.ld)};n.nd=function(a){for(var b=0;b<this.ga.length;++b)this.ga[b].nd(a)};n.Xe=function(a){for(var b=0;b<this.ga.length;++b)this.ga[b].Xe(a)};n.Oc=function(a){for(var b=0;b<this.ga.length;++b)this.ga[b].Oc(a)};n.Td=function(a){for(var b=0;b<this.ga.length;++b)this.ga[b].Td(a)};
n.Rd=function(a){for(var b=false,c=0;c<this.ga.length;++c)if(this.ga[c].Rd(a))b=true;return b};n.Sd=function(a){for(var b=false,c=0;c<this.ga.length;++c)if(this.ga[c].Sd(a))b=true;return b};n.h=function(a,b,c){var d=new Id;Rd(this,d,a,b,c);if(this.ea)d.ea=this.ea.e();if(this.Qb)d.Qb=this.Qb.e();if(this.sb)d.sb=this.sb.e();if(this.Le)d.Le=this.Le.e();d.Fc=this.Fc;d.ic=this.ic;d.Sf=this.Sf;d.Rf=this.Rf;if(this.g)d.g=this.g.e();return d};function Hd(a,b,c){b==0||c==0||q.O(a.ic,0)&&Jd(a,b/c)};function Xd(){this.Za();this.g=new z;this.Dc=false;this.ba=null;this.yo=true;this.sc=null}Xd.prototype=new Y;n=Xd.prototype;n.fb=function(){if(this.ba)return this.ba.g;return this.g};n.Ln=j("ba");n.vm=ca("ba");n.m=l("mesh");n.Ka=function(a){var b=this.ba;if(this.S&&b){for(var c=false,d=false,e=0;e<b.Ja.length;++e)if(tc(b.Ja[e].va))c=true;else d=true;c&&Wd(a,this,Yd);d&&Wd(a,this,Zd);Y.prototype.Ka.call(this,a)}};n.qb=function(a){a.Qc(this.Y);Sc(a,this.ba)};
n.xc=function(){if(this.ba)return this.ba.Ja.length;return 0};n.gc=function(a){if(this.ba!=null)if(a>=0&&a<this.ba.Ja.length)return this.ba.Ja[a].va;return null};n.h=function(a,b,c){var d=new Xd;Rd(this,d,a,b,c);if(this.ba)d.ba=this.ba.h();d.ck=this.ck;d.Dc=this.Dc;if(this.g)d.g=this.g.e();return d};function $d(){this.ba=new zc;var a=[0,1,2,0,2,3],b=new xc;this.ba.Rc(b);b.va.ub=true;b.Z=a;b.j.push(this.Ea(-1,-1,-1,0,0,1,1,1));b.j.push(this.Ea(1,-1,-1,0,0,1,0,1));b.j.push(this.Ea(1,1,-1,0,0,1,0,0));b.j.push(this.Ea(-1,1,-1,0,0,1,1,0));b=new xc;this.ba.Rc(b);b.va.ub=true;b.Z=a;b.j.push(this.Ea(1,-1,-1,-1,0,0,1,1));b.j.push(this.Ea(1,-1,1,-1,0,0,0,1));b.j.push(this.Ea(1,1,1,-1,0,0,0,0));b.j.push(this.Ea(1,1,-1,-1,0,0,1,0));b=new xc;this.ba.Rc(b);b.va.ub=true;b.Z=a;b.j.push(this.Ea(-1,-1,1,1,0,0,
1,1));b.j.push(this.Ea(-1,-1,-1,1,0,0,0,1));b.j.push(this.Ea(-1,1,-1,1,0,0,0,0));b.j.push(this.Ea(-1,1,1,1,0,0,1,0));b=new xc;this.ba.Rc(b);b.va.ub=true;b.Z=a;b.j.push(this.Ea(1,-1,1,0,0,-1,1,1));b.j.push(this.Ea(-1,-1,1,0,0,-1,0,1));b.j.push(this.Ea(-1,1,1,0,0,-1,0,0));b.j.push(this.Ea(1,1,1,0,0,-1,1,0));b=new xc;this.ba.Rc(b);b.va.ub=true;b.Z=a;b.j.push(this.Ea(1,1,-1,0,-1,0,1,1));b.j.push(this.Ea(1,1,1,0,-1,0,0,1));b.j.push(this.Ea(-1,1,1,0,-1,0,0,0));b.j.push(this.Ea(-1,1,-1,0,-1,0,1,0));b=new xc;
this.ba.Rc(b);b.va.ub=true;b.Z=a;b.j.push(this.Ea(1,-1,1,0,1,0,1,1));b.j.push(this.Ea(1,-1,-1,0,1,0,0,1));b.j.push(this.Ea(-1,-1,-1,0,1,0,0,0));b.j.push(this.Ea(-1,-1,1,0,1,0,1,0))}$d.prototype=new Xd;n=$d.prototype;n.m=l("sky");n.Ea=function(a,b,c,d,e,f,g,i){d=new K(true);d.f.b=a;d.f.c=b;d.f.d=c;d.ua.b=g;d.ua.c=i;return d};n.Ka=function(a){if(this.S){Wd(a,this,1);Y.prototype.Ka.call(this,a)}};
n.qb=function(a){var b=this.$.fa;if(b&&this.ba){var c=new F(false);this.Y.xa(c);db(c,N(b));b=(b.Sf+b.Rf)*0.5;var d=new F;eb(d,new v(b,b,b));a.Qc(H(c,d));Sc(a,this.ba)}};n.h=function(a,b,c){var d=new $d;Rd(this,d,a,b,c);if(this.ba)d.ba=this.ba.e();d.ck=this.ck;d.Dc=this.Dc;if(this.g)d.g=this.g.e();return d};new Xd;function ae(){this.Za();this.g=new z;this.If=this.eh=10;this.Bg=false;this.$b=new xc;this.Zf=new K(true);this.$f=new K(true);this.ag=new K(true);this.bg=new K(true);var a=this.$b.Z;a.push(0);a.push(2);a.push(1);a.push(0);a.push(3);a.push(2);a=this.$b.j;a.push(this.Zf);a.push(this.$f);a.push(this.ag);a.push(this.bg);this.Zf.ua.b=1;this.Zf.ua.c=1;this.$f.ua.b=1;this.$f.ua.c=0;this.ag.ua.b=0;this.ag.ua.c=0;this.bg.ua.b=0;this.bg.ua.c=1;for(var b=0;b<4;++b)A(this.g,a[b].f)}ae.prototype=new Y;n=ae.prototype;
n.fb=j("g");n.m=l("billboard");n.Ka=function(a){if(this.S){Wd(a,this,tc(this.$b.va)?Yd:Zd);Y.prototype.Ka.call(this,a)}};
n.qb=function(a){var b=this.$.fa;if(b)if(this.Bg){e=N(this);var c=N(b),d=b.Qb;b=b.ea.substract(c);b.normalize();c=xa(d,b);sa(c)==0&&c.set(d.c,d.b,d.d);c.normalize();y(c,0.5*this.eh);d=xa(c,b);d.normalize();y(d,0.5*this.If);this.Bg&&d.set(0,-0.5*this.If,0);y(b,1);pa(this.Zf.f,e);this.Zf.f.ra(c);this.Zf.f.ra(d);pa(this.$f.f,e);this.$f.f.ra(c);ma(this.$f.f,d);pa(this.ag.f,e);ma(this.ag.f,c);ma(this.ag.f,d);pa(this.bg.f,e);ma(this.bg.f,c);this.bg.f.ra(d);this.$b.update(true);e=new F(true);a.Qc(e);Tc(a,
this.$b.va);Uc(a,this.$b)}else{var e=N(this);a.Li==null&&dd(a);d=a.Li;b=new F(true);eb(b,new v(this.eh*0.5,this.If*0.5,0));c=a.ld.e();db(c,new v(0,0,0));var f=new F(true);Xa(c,f);db(f,e);b=H(f,b);a.Qc(b);Tc(a,this.$b.va);Uc(a,d)}};n.xc=l(1);n.gc=function(){return this.$b.va};n.h=function(a,b,c){var d=new ae;Rd(this,d,a,b,c);if(this.g)d.g=this.g.e();d.eh=this.eh;d.If=this.If;d.Bg=this.Bg;d.$b.va=this.$b.va.e();return d};function be(){this.Za();this.g=new z;this.pa=new xc;this.vb=new v(0,-0.03,0);this.wb=new v(0,0,0);this.Pi=this.hi=0;this.Ra=[]}be.prototype=new Y;n=be.prototype;n.vb=null;n.Ic=10;n.wb=null;n.me=1E3;n.Ig=2E3;n.Jg=200;n.qf=10;n.ni=20;n.qi=4278190080;n.oi=4294967295;n.rf=5;n.sf=5;n.of=7;n.Kg=7;n.wg=false;n.ff=500;n.ff=0;n.hf=false;n.ci=500;n.Xb=null;n.zf=false;n.Fi=20;n.Gi=20;
n.h=function(a,b,c){var d=new be;Rd(this,d,a,b,c);if(this.g)d.g=this.g.e();d.vb=this.vb.e();d.Ic=this.Ic;d.wb=this.wb.e();d.me=this.me;d.Ig=this.Ig;d.Jg=this.Jg;d.qf=this.qf;d.ni=this.ni;d.qi=this.qi;d.oi=this.oi;d.rf=this.rf;d.sf=this.sf;d.of=this.of;d.Kg=this.Kg;d.wg=true;d.ff=this.ff;d.sj=this.sj;d.hf=this.hf;d.ci=this.ci;d.Xb=this.Xb;d.zf=this.zf;d.Fi=this.Fi;d.Gi=this.Gi;d.pa.va=this.pa.va.e();return d};n.fb=j("g");n.m=l("particlesystem");
n.Ka=function(a){if(this.S){Wd(a,this,tc(this.pa.va)?Yd:Zd);Y.prototype.Ka.call(this,a)}};n.qb=aa();n.xc=l(1);n.gc=function(){return this.pa.va};
n.Nb=function(a,b){var c=false;if(this.S)if(this.hi==0){this.hi=b;c=false}else{c=b-this.hi;this.hi=b;if(this.S){var d=false;d=this.ni-this.qf;var e=1E3/(d?this.qf+Math.random()*d:this.qf);d=this.Ra.length;this.Pi+=c;if(this.Pi<=e)d=false;else{e=this.Pi/e+0.5;this.Pi=0;if(d+e>this.Jg)e-=d+e-this.Jg;if(e<=0)d=false;else{var f=this.vb.e();Sa(this.Y,f);for(var g=Ra(this.Y).b,i=qa(this.wb),k=d;k<d+e;++k){var m=new ce;m.yc=new v(0,0,0);if(!i){if(this.wb.b!=0)m.yc.b=Math.random()*this.wb.b-this.wb.b*0.5;
if(this.wb.c!=0)m.yc.c=Math.random()*this.wb.c-this.wb.c*0.5;if(this.wb.d!=0)m.yc.d=Math.random()*this.wb.d-this.wb.d*0.5}m.startTime=b;m.Hh=f.e();if(this.Ic){var o=f.e(),p=Math.random()*this.Ic*2-this.Ic;p*=q.Wc;var h=Math.cos(p);p=Math.sin(p);o.b=o.b*h-o.c*p;o.c=o.b*p+o.c*h;p=Math.random()*this.Ic*2-this.Ic;p*=q.Wc;h=Math.cos(p);p=Math.sin(p);o.c=o.c*h-o.d*p;o.d=o.c*p+o.d*h;za(o,Math.random()*this.Ic*2-this.Ic);m.Hh=o}m.vh=this.Ig-this.me==0?b+this.me:b+this.me+Math.random()*(this.Ig-this.me);m.color=
q.dm(this.qi,this.oi,Math.random()*100/100);m.xm=m.color;m.ym=m.Hh.e();if(this.rf==this.of&&this.sf==this.Kg){m.Eh=this.rf;m.Fh=this.sf}else{o=Math.random()*100/100;h=1-o;m.Eh=this.rf*o+this.of*h;m.Fh=this.sf*o+this.Kg*h}m.Eh*=g;m.Fh*=g;m.Qk=m.Eh;m.Rk=m.Fh;Va(this.Y,m.yc);this.Ra.unshift(m)}d=true}}if(!this.wg&&!this.hf&&!this.zf)e=false;else{e=0;f=null;if(this.wg)for(e=0;e<this.Ra.length;++e){f=this.Ra[e];if(f.vh-b<this.ff)f.color=q.dm(f.xm,this.sj,(f.vh-b)/this.ff)}if(this.hf){g=va(this.Xb,Ra(this.Y));
for(e=0;e<this.Ra.length;++e){f=this.Ra[e];i=(b-f.startTime)/this.ci;i=q.Rb(i,0,1);i=1-i;f.Hh=Aa(f.ym,g,i)}}if(this.zf){g=Ra(this.Y).b;for(e=0;e<this.Ra.length;++e){f=this.Ra[e];i=(b-f.startTime)/(f.vh-f.startTime);f.Qk=f.Eh+this.Fi*i*g;f.Rk=f.Fh+this.Gi*i*g}}e=true}d=e||d;e=new v(this.Y.D,this.Y.F,this.Y.G);this.pa.g.reset(e.b,e.c,e.d);if(this.Ra.length!=0)d=true;for(e=0;e<this.Ra.length;){f=this.Ra[e];if(b>f.vh)this.Ra.splice(e,1);else{f.yc.ra(x(f.Hh,c));A(this.pa.g,f.yc);++e}}c=this.of*0.5;this.pa.g.J.b+=
c;this.pa.g.J.c+=c;this.pa.g.J.d+=c;this.pa.g.I.b-=c;this.pa.g.I.c-=c;this.pa.g.I.d-=c;c=new F(false);Xa(this.Y,c);fb(c,this.pa.g);c=d}else c=false}return Y.prototype.Nb.call(this,a,b)||c};n.Ka=function(a){if(this.S){if(this.Ra.length!=0)Wd(a,this,tc(this.pa.va)?Yd:Zd);Y.prototype.Ka.call(this,a)}};
n.qb=function(a){if(this.$.fa)if(this.Ra.length!=0){if(this.Ra.length*4>this.pa.j.length||this.Ra.length*6>this.pa.Z.length){for(var b=this.pa.j.length,c=this.pa.j;this.pa.j.length<this.Ra.length*4;){var d=null;d=new K(true);d.ua.set(0,0);c.push(d);d=new K(true);d.ua.set(0,1);c.push(d);d=new K(true);d.ua.set(1,1);c.push(d);d=new K(true);d.ua.set(1,0);c.push(d)}b=b;c=this.Ra.length*6;d=this.pa.Z;for(var e=this.pa.Z.length;e<c;e+=6){d.push(0+b);d.push(2+b);d.push(1+b);d.push(0+b);d.push(3+b);d.push(2+
b);b+=4}}b=a.ld;c=new v(-b.s,-b.u,-b.p);d=0;var f=null;for(e=0;e<this.Ra.length;++e){var g=this.Ra[e];f=0.5*g.Qk;var i=new v(b.n*f,b.t*f,b.v*f);f=-0.5*g.Rk;var k=new v(b.r*f,b.o*f,b.w*f);f=this.pa.j[0+d];f.f=g.yc.add(i).add(k);f.ya=g.color;f.k=c;f=this.pa.j[1+d];f.f=g.yc.add(i).substract(k);f.ya=g.color;f.k=c;f=this.pa.j[2+d];f.f=g.yc.substract(i).substract(k);f.ya=g.color;f.k=c;f=this.pa.j[3+d];f.f=g.yc.substract(i).add(k);f.ya=g.color;f.k=c;d+=4}b=new F(true);a.Qc(b);this.pa.update(false,true);
Tc(a,this.pa.va);Uc(a,this.pa,this.Ra.length*2*3)}};function ce(){this.Hh=this.yc=null;this.xm=this.color=this.vh=this.startTime=0;this.ym=null;this.Fh=this.Eh=this.Rk=this.Qk=0};function la(){this.Wg=new v(0,0,0);this.ya=new ka;this.ta=100;this.mg=0.01}n=la.prototype;n.e=function(){var a=new la;a.Wg=this.Wg.e();a.ya=this.ya.e();a.ta=this.ta;a.mg=this.mg;return a};n.Wg=null;n.ya=null;n.mg=null;n.ta=null;function de(){this.Gc=new la;this.g=new z;this.Za()}de.prototype=new Y;n=de.prototype;n.m=l("light");n.Gc=null;n.h=function(a,b,c){var d=new de;Rd(this,d,a,b,c);d.Gc=this.Gc.e();d.g=this.g.e();return d};
n.Ka=function(a){this.S&&Wd(a,this,ee);Y.prototype.Ka.call(this,a);this.Gc.Wg=N(this)};n.fb=j("g");n.qb=function(a){a.ke.push(this.Gc)};function fe(){this.Za();this.g=new z;this.Pf=0;this.ge=false;this.nb=[]}fe.prototype=new Y;n=fe.prototype;n.Pf=0;n.ge=false;n.nb=[];n.fb=j("g");n.m=l("path");n.h=function(a,b,c){var d=new fe;Rd(this,d,a,b,c);if(this.g)d.g=this.g.e();d.Pf=this.Pf;d.ge=this.ge;d.nb=[];for(a=0;a<this.nb.length;++a)d.nb.push(this.nb[a].e());return d};function ge(a,b){if(b<0||b>=a.nb.length)return new v(0,0,0);a.Y||P(a);b=a.nb[b];b=b.e();Va(a.Y,b);return b}
function he(a,b,c){if(a.ge)return b<0?c+b:b>=c?b-c:b;return b<0?0:b>=c?c-1:b}
function ie(a,b,c){var d=a.nb.length;if(a.ge)b*=d;else{b=q.Rb(b,0,1);b*=d-1}var e=new v;if(d==0)return e;if(d==1)return e;b=b;var f=q.Fn(b),g=Math.floor(b)%d,i=a.nb[he(a,g-1,d)];e=a.nb[he(a,g+0,d)];b=a.nb[he(a,g+1,d)];var k=a.nb[he(a,g+2,d)],m=2*f*f*f-3*f*f+1;d=-2*f*f*f+3*f*f;g=f*f*f-2*f*f+f;f=f*f*f-f*f;i=b.substract(i);y(i,a.Pf);k=k.substract(e);y(k,a.Pf);e=x(e,m);e.ra(x(b,d));e.ra(x(i,g));e.ra(x(k,f));if(!c){a.Y||P(a);Va(a.Y,e)}return e};function je(){this.Za();this.g=new z;this.ml=this.Hg=this.Dd=0;this.Mm=false;this.Qf=this.Hj=this.kl=0;this.wf=false;this.nc=null;this.pn=false;this.nl=this.rk=0}je.prototype=new Y;je.prototype.fb=j("g");je.prototype.m=l("sound");je.prototype.Ka=function(a){if(this.S){Wd(a,this,Zd);Y.prototype.Ka.call(this,a)}};
function ke(a,b,c,d){var e=a.Qf;if(d)if(b)if(d=d.fa){var f=N(d);d.ea.substract(f);c=f.pb(c);if(!(c<a.Dd)){c-=a.Dd;d=a.Hg-a.Dd;if(d>0){if(c>d)c=d;d=10;if(c!=0)d=a.Dd/c;e*=d;if(e>10)e=10}else e=10}if(e>1)e=1;if(b)try{b.src.ec.volume=e}catch(g){}}}function le(a,b){if(!a.nc&&a.Lc){a.pn=false;a.nc=fc(q.Re,a.Lc,b);if(!a.wf){b=N(a);ke(a,a.nc,b,a.$)}}}
je.prototype.Nb=function(a,b){try{var c=N(this);this.nc&&!this.wf&&ke(this,this.nc,c,a);switch(this.ml){case 0:break;case 1:if(this.nc&&kd(this.nc)){this.nc=null;var d=this.kl-this.Hj;if(d<2)d=2;this.rk=b+Math.random()*d+this.Hj}else if(!this.nc&&(!this.rk||b>this.rk))this.Lc&&le(this,false);break;case 2:this.nc||this.Lc&&le(this,true);break;case 3:if(!this.nl)if(this.Lc){le(this,true);++this.nl}break}}catch(e){}return false};
je.prototype.h=function(a,b,c){var d=new je;Rd(this,d,a,b,c);if(this.g)d.g=this.g.e();return d};function me(a){this.Za();this.Ga=a;this.g=new z;this.pe=this.oe=100;this.Be=this.Ce=50;this.re=this.qe=0.5;this.Ee=1/6;this.De=1/6;this.Hf=this.cd=true;this.jc=0;this.Kd=this.ab=null;this.yf=true;this.ee=false;this.Lf=1;this.Ec=this.Sa="";this.Fe=0;this.Qg=this.zg=this.Rg=this.di=this.Sj=this.hg=false;this.gh=this.hh=null;this.al=this.bl="";this.Sh=0}me.prototype=new Y;n=me.prototype;n.Ec="";n.Fe=0;n.Lf=1;n.Yl=l(false);n.fb=j("g");n.m=l("2doverlay");
n.Pk=function(a){this.Sa=a;this.ee=this.Sa!=null&&this.Sa!="";if(this.Ec=="")this.Ec="12;default;arial;normal;bold;true"};n.Ka=function(a){if(this.S){Wd(a,this,ne);Y.prototype.Ka.call(this,a)}};
n.qb=function(a){var b=oe(this,true,a),c=false;if(this.Ga!=null&&this.hg){c=this.Ga.lc;var d=this.Ga.mc;c=b.x<=c&&b.y<=d&&b.x+b.Ha>=c&&b.y+b.Fa>=d}if(c&&this.Rg)Zc(a,b.x,b.y,b.Ha,b.Fa,this.zg,true);else this.Hf&&Zc(a,b.x,b.y,b.Ha,b.Fa,this.jc,true);d=this.ab;if(c&&this.Kd&&this.Qg)d=this.Kd;if(d!=null&&d.Yb){var e=d.hc(),f=d.fc();if(this.yf){if(e&&f&&b.Fa&&b.Ha){var g=b.Ha;e=g*(f/e);if(e>b.Fa){f=b.Fa/e;g*=f;e*=f}b.Ha=g;b.Fa=e;$c(a,b.x,b.y,b.Ha,b.Fa,d,true)}}else $c(a,b.x,b.y,b.Ha,b.Fa,d,true)}if(this.ee&&
this.Ec&&this.Sa!=""){a:{e=b.Ha;(d=this.hh==null||false)||(d=this.bl!=this.Sa||this.al!=this.Ec);if(d){pe(this,a);d=document.createElement("canvas");if(d!=null){d.width=1;d.height=1;g=null;try{g=d.getContext("2d");if(g==null)break a}catch(i){break a}var k=this.Ec;f=12;var m="Arial",o=false,p=false;if(k.indexOf("#fnt_")==0)k=k.substr(5);k=k.split(";");for(var h=0;h<k.length;++h){var u=k[h],r=u.toLowerCase();if(h==0)f=parseInt(r);else if(h==2)m=u;else if(h==3){if(r.indexOf("italic")!=-1)o=true}else if(h==
4)if(r.indexOf("bold")!=-1)p=true}k="";if(o)k+="italic ";if(p)k+="bold ";this.Sh=f*96/72;k+=this.Sh+"px ";k+=m;f=k;g.font=f;if(this.Lf==2){m=[];o=this.Sa;p=g;u=h=k="";r=o.length;for(var J=0,D=e-6,w="c",C=0;C<r;++C){w=o.charAt(C);var E=false;if(w=="\r"){E=true;w=" ";if(o.charAt(C+1)=="\n"){o=o.substr(0,C).concat(o.substr(C+2));--r}}else if(w=="\n"){E=true;w=" "}if(w==" "||w==0||C==r-1){if(h.length){var G=p.measureText(u).width,T=p.measureText(h).width;if(J+T+G>D){J=T;m.push(k);k=h}else{k=k.concat(u);
k=k.concat(h);J+=G+T}u=h=""}u=u.concat(w);if(E){k=k.concat(u);k=k.concat(h);m.push(k);u=h=k="";J=0}}else h=h.concat(w)}k=k.concat(u);k=k.concat(h);m.push(k);o=this.Sh*1.2;k=m.length;p=0;d.width=e;d.height=Math.max(1,k*o);g.fillStyle="rgba(0, 0, 0, 1)";g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;for(e=0;e<m.length;++e){g.fillText(m[e],0,p);p+=o}}else{e=g.measureText(this.Sa);d.width=e.width;d.height=this.Sh*1.2;g.fillStyle="rgba(0, 0, 0, 1)";
g.fillRect(0,0,d.width,d.height);g.fillStyle="rgba(255, 255, 255, 1)";g.textBaseline="top";g.font=f;g.fillText(this.Sa,0,0)}m=d;o=a.ja;d=o.createTexture();o.bindTexture(o.TEXTURE_2D,d);g=m.width;e=m.height;f=g;p=e;if((m.width&m.width-1)!=0||(m.height&m.height-1)!=0){p=document.createElement("canvas");p.width=Kc(a,m.width);p.height=Kc(a,m.height);p.getContext("2d").drawImage(m,0,0,m.width,m.height,0,0,m.width,m.height);m=p;f=p.width;p=p.height}Lc(a,d,m);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,
o.NEAREST);o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST);o.generateMipmap(o.TEXTURE_2D);o.bindTexture(o.TEXTURE_2D,null);m=new rb;m.q="";m.ab=d;m.Xc=null;m.Yb=true;m.Qh=f;m.Ph=p;m.Wj=g;m.Vj=e;this.gh=this.hh=m;this.bl=this.Sa;this.al=this.Ec}}}d=this.hh;g=this.Fe;if(c){if(this.gh)d=this.gh;g=this.di}if(d){c=d.Wj;e=d.Vj;this.Lf==1?ad(a,b.x+(b.Ha-c)/2,b.y+(b.Fa-e)/2,c,e,d,g):ad(a,b.x,b.y,c,e,d,g)}}else pe(this,a)};
function pe(a,b){b.deleteTexture(a.hh);b.deleteTexture(a.gh);a.hh=null;a.gh=null}me.prototype.xc=l(0);function oe(a,b,c){b=c.hc();c=c.fc();var d={};if(a.cd){d.x=a.oe;d.y=a.pe;d.Ha=a.Ce;d.Fa=a.Be}else{d.x=a.qe*b;d.y=a.re*c;d.Ha=a.Ee*b;d.Fa=a.De*c}return d}
me.prototype.h=function(a,b,c){var d=new me;Rd(this,d,a,b,c);d.oe=this.oe;d.pe=this.pe;d.Ce=this.Ce;d.Be=this.Be;d.qe=this.qe;d.re=this.re;d.Ee=this.Ee;d.De=this.De;d.cd=this.cd;d.Hf=this.Hf;d.jc=this.jc;d.ab=this.ab;d.Kd=this.Kd;d.yf=this.yf;d.ee=this.ee;d.Lf=this.Lf;d.Sa=this.Sa;d.Ec=this.Ec;d.Fe=this.Fe;d.hg=this.hg;d.Sj=this.Sj;d.di=this.di;d.Rg=this.Rg;d.zg=this.zg;d.Qg=this.Qg;return d};function qe(a,b){me.call(this,a);this.cf=null;this.Ib=this.Hb=0;this.ri=false;this.kc=this.ei=this.Al=this.zl=this.dk=this.ek=0;zb(this,new re(a,b,this))}qe.prototype=new me;qe.prototype.m=l("mobile2dinput");qe.prototype.Yl=l(true);
qe.prototype.qb=function(a){var b=oe(this,true,a),c=false;if(this.Ga!=null){var d=this.Ga.lc,e=this.Ga.mc;this.ri=b.x<=d&&b.y<=e&&b.x+b.Ha>=d&&b.y+b.Fa>=e;if(this.hg)c=this.ri}if(c&&this.Rg)Zc(a,b.x,b.y,b.Ha,b.Fa,this.zg,true);else this.Hf&&Zc(a,b.x,b.y,b.Ha,b.Fa,this.jc,true);d=this.ab;if(c&&this.Kd&&this.Qg)d=this.Kd;e=c=0;if(d!=null&&d.Yb){var f=d.hc(),g=d.fc();if(this.yf){if(f&&g&&b.Fa&&b.Ha){c=b.Ha;e=c*(g/f);if(e>b.Fa){f=b.Fa/e;c*=f;e*=f}b.Ha=c;b.Fa=e;$c(a,b.x,b.y,b.Ha,b.Fa,d,true);c=b.Ha;e=
b.Fa}}else{$c(a,b.x,b.y,b.Ha,b.Fa,d,true);c=b.Ha;e=b.Fa}}this.ek=c;this.dk=e;this.zl=b.x;this.Al=b.y;if(this.ei==0&&this.cf!=null&&this.cf.Yb&&d!=null&&d.Yb){f=this.Hb*Math.sqrt(1-0.5*this.Ib*this.Ib);g=this.Ib*Math.sqrt(1-0.5*this.Hb*this.Hb);f=(f+1)*0.5;g=(g+1)*0.5;var i=1/(d.hc()/Number(this.cf.hc()));d=1/(d.fc()/Number(this.cf.fc()));i=i*c;d=d*e;$c(a,b.x+f*c-i*0.5,b.y+g*e-d*0.5,i,d,this.cf,true)}};function se(){this.Za();this.g=new z;this.Dc=false;this.sc=this.lb=null;this.ph=this.oh=this.Cg=0;this.kb=[];this.jb=0.25;this.vd=t();this.ib=this.Na=this.vj=0;this.Ab=false;this.de=0;this.Ij=20}se.prototype=new Y;se.prototype.fb=j("g");se.prototype.Pc=function(a){if(!this.lb)return false;a=Fc(this.lb,a);if(!a)return false;te(this,a.Tc,a.K);this.jb=a.Jb;return true};
function Hb(a,b,c){if(!a.lb)return false;var d=a.lb;if(!d)return false;var e=Fc(d,b);if(e){te(a,e.Tc,e.K);e.Jb!=0&&ue(a,e.Jb);a.Ab=c}else if(b){b=b.toLowerCase();if(b=="all"){te(a,0,Math.floor(d.Bc));d.qj!=0&&ue(a,d.qj);a.Ab=c}else if(b=="none"){te(a,0,0);a.Ab=c}}return true}n=se.prototype;n.vm=function(a){if(a){this.lb=a;this.g=a.fb();te(this,0,Math.floor(a.Bc))}};n.m=l("animatedmesh");
n.Ka=function(a){if(this.S&&this.lb){var b=this.kb,c=false;if(b!=null)for(var d=0;d<b.length;++d)if(tc(b[d]))c=true;c?Wd(a,this,Yd):Wd(a,this,Zd);Y.prototype.Ka.call(this,a)}};n.xc=function(){if(this.kb!=null)return this.kb.length;if(this.ba)return this.ba.Ja.length;return 0};n.gc=function(a){if(this.kb)if(a>=0&&a<this.kb.length)return this.kb[a];else if(this.lb&&this.lb.Sc&&a>=0&&this.kb.length==a&&a<256){a=new sc;this.kb.push(a);return a}return null};
n.h=function(a,b,c){var d=new se;Rd(this,d,a,b,c);d.lb=this.lb;if(this.g)d.g=this.g.e();d.Dc=this.Dc;d.sc=this.sc;d.Cg=this.Cg;d.oh=this.oh;d.ph=this.ph;d.kb=[];for(a=0;a<this.kb.length;++a)d.kb.push(this.kb[a].e());d.jb=this.jb;d.vd=this.vd;d.vj=this.vj;d.Na=this.Na;d.ib=this.ib;d.Ab=this.Ab;d.de=this.de;d.Ij=this.Ij;return d};function ue(a,b){a.jb=b}function ve(a,b){a.Ab=b}
function te(a,b,c){if(!a.lb)return false;var d=Math.floor(a.lb.Bc)-1,e=a.Na,f=a.ib;if(c<b){a.Na=q.Rb(c,0,d);a.ib=q.Rb(b,a.Na,d)}else{a.Na=q.Rb(b,0,d);a.ib=q.Rb(c,a.Na,d)}if(e!=a.Na||f!=a.ib){a.de=q.Rb(a.Na,a.Na,a.ib);a.vd=t()-Math.floor((a.de-a.Na)/a.jb)}return true}
se.prototype.Nb=function(a,b){var c=t();if(this.Cg==0||c-this.Cg>this.Ij){var d;d=0;if(this.oh!=0){this.ph=(b-this.vd)*this.oh;if(this.ph>1)this.ph=this.oh=0}if(this.Na==this.ib)d=this.Na;else if(this.jb==0)d=this.Na;else{d=0;if(this.Ab){d=Math.abs(Math.floor((this.ib-this.Na)/this.jb));d=this.jb>0?this.Na+(b-this.vd)%d*this.jb:this.ib-(b-this.vd)%d*-this.jb}else if(this.jb>0){d=(b-this.vd)*this.jb;d=this.Na+d;if(d>this.ib)d=this.ib}else{d=(b-this.vd)*-this.jb;d=this.ib-d;if(d<this.Na)d=this.Na}d=
d}this.de=d;this.Cg=c}return Y.prototype.Nb.call(this,a,b)};
se.prototype.qb=function(a){var b=this.$.mj;if(b){a:{var c=Z(this);c=Ga(c);for(var d=0;d<6;++d){for(var e=false,f=0;f<8;++f){var g;g=b.Pa[d];g=g.k.da(c[f])+g.Ua;g=g<-1.0E-6?1:g>1.0E-6?0:2;if(g!=0){e=true;break}}if(!e){b=false;break a}}b=true}if(!b)return}if(b=this.lb){a.Qc(this.Y);if(c=this.lb){d=false;d=this.de;e=1;if(e==null)e=1;if(!c.jf||q.O(c.Bj,d))d=false;else{c.Bj=d;if(e<=0)d=false;else{for(e=0;e<c.Ta.length;++e){f=c.Ta[e];g=f.ig.e();var i=f.Yd.e(),k=f.jg.e(),m=-1,o=m=-1,p=f.se;o=f.Id;var h=
f.we,u=undefined,r=u=u=undefined;m=r=undefined;if(p.length){m=-1;if(m==-1)for(r=0;r<p.length;++r){u=p[r];if(u.frame>=d){m=r;break}}if(m!=-1)if(c.kf==0||m==0){u=p[m];u.position.e()}else if(c.kf==1){u=p[m];p=p[m-1];r=d-u.frame;m=p.frame-d;pa(g,na(ta(ta(p.position.substract(u.position),1/(r+m)),r),u.position))}}if(o.length){m=-1;if(m==-1)for(r=0;r<o.length;++r){u=o[r];if(u.frame>=d){m=r;break}}if(m!=-1)if(c.kf==0||m==0){u=o[m];u.scale.e()}else if(c.kf==1){u=o[m];o=o[m-1];r=d-u.frame;m=o.frame-d;pa(i,
na(ta(ta(o.scale.substract(u.scale),1/(r+m)),r),u.scale))}}if(h.length){o=-1;if(o==-1)for(r=0;r<h.length;++r){u=h[r];if(u.frame>=d){o=r;break}}if(o!=-1)if(c.kf==0||o==0){u=h[o];u.rotation.e()}else if(c.kf==1){u=h[o];h=h[o-1];r=d-u.frame;m=h.frame-d;hb(k,u.rotation,h.rotation,r/(r+m))}}f.ig=g.e();f.Yd=i.e();f.jg=k.e()}for(d=0;d<c.Ta.length;++d){e=c.Ta[d];if(e.se.length||e.Id.length||e.we.length){if(!e.jg)e.jg=new I;if(!e.ig)e.ig=new v;e.nf=ib(e.jg);f=e.nf;g=e.ig;f.n+=g.b*f.A;f.r+=g.c*f.A;f.s+=g.d*
f.A;f.t+=g.b*f.B;f.o+=g.c*f.B;f.u+=g.d*f.B;f.v+=g.b*f.C;f.w+=g.c*f.C;f.p+=g.d*f.C;f.D+=g.b*f.H;f.F+=g.c*f.H;f.G+=g.d*f.H;f.Da=false;e.el=false;if(e.Id.length&&e.Yd&&!(q.O(e.Yd.b,1)&&q.O(e.Yd.c,1)&&q.O(e.Yd.d,1))){g=e.Yd;f.n*=g.b;f.r*=g.b;f.s*=g.b;f.A*=g.b;f.t*=g.c;f.o*=g.c;f.u*=g.c;f.B*=g.c;f.v*=g.d;f.w*=g.d;f.p*=g.d;f.C*=g.d}}else e.nf=e.Gg.e()}d=true}}if(d){a:{for(d=0;d<this.kb.length;++d)if(this.kb[d].Hc){d=true;break a}d=false}if(c.jf){Dc(c,null,null);for(e=f=e=0;e<c.Ta.length;++e){i=c.Ta[e];
for(f=0;f<i.kg.length;++f){g=c.Va[i.kg[f]];g.Md=i.gf.e()}}for(e=0;e<c.Va.length;++e){g=c.Ri[e];for(f=0;f<g.length;++f)g[f]=false}for(e=0;e<c.ue.length;++e)Ec(c,c.ue[e],null,d)}c.cb.I.set(0,0,0);c.cb.J.set(0,0,0);if(c.Va.length){d=c.Va[0];yc(d);c.cb.I=d.g.I.e();c.cb.J=d.g.J.e();for(e=1;e<c.Va.length;++e){d=c.Va[e];yc(d);if(d.Md==null){A(c.cb,d.g.I);A(c.cb,d.g.J)}else{f=d.g.e();fb(d.Md,f);A(c.cb,f.I);A(c.cb,f.J)}}}this.g=c.fb().e();for(d=0;d<c.Va.length;++d)c.Va[d].update(true)}this.vj=this.de}for(c=
0;c<b.Va.length;++c){d=b.Va[c];if(c<this.kb.length)d.va=this.kb[c];d.Md!=null&&a.Qc(H(this.Y,d.Md));Tc(a,d.va);Uc(a,d);d.Md!=null&&a.Qc(this.Y)}}};function we(){this.g=new z;this.Pm=this.vn=0}we.prototype=new Y;function xe(){this.Za();this.g=new z;this.Zg=new F}xe.prototype=new Y;xe.prototype.h=function(a,b,c){var d=new xe;Rd(this,d,a,b,c);if(this.g)d.g=this.g.e();if(this.Zg)d.Zg=this.Zg;return d};xe.prototype.Fk=j("Zg");function ye(){this.Aa=new Y;this.Aa.$=this;this.q="";this.Xk=0;this.lj=null;this.Gb=new ka;this.Gb.Gd=0;this.Gb.Ad=0;this.Gb.ud=0;this.ji=null;this.Ba=0;this.fa=null;this.uj=false;this.Dg=new F;this.sn=null;this.zi=2;this.bf=0;this.Ii=[];this.Gf=[];this.le=[];this.Sg=[];this.pc=[];this.nn=this.Ym=0;this.un=false;this.mj=null;this.Rl=false;this.tg=[];this.Cj=new v}ye.prototype.Za=function(){this.Aa=new Y;this.Aa.$=this;this.q="";this.Dg=new F};ye.prototype.Wi=l("unknown");
function Ed(a,b){a.Ii=[];a.Gf=[];a.le=[];a.Sg=[];a.Aa.Ka(a);a.mj=null;a.nn=0;a.bf=ze;var c=null;if(a.fa){c=N(a.fa);a.fa.qb(b)}a.bf=Ae;a.Gl&&a.Gl.qb(b);b.ke=[];b.Gb=a.Gb.e();var d,e=0;c!=null&&a.le.length>0&&a.le.sort(function(k,m){k=ra(c,N(k));m=ra(c,N(m));if(k>m)return 1;if(k<m)return-1;return 0});a.bf=ee;for(d=0;d<a.le.length;++d)a.le[d].qb(b);e+=a.le.length;var f=null;d=null;var g=b.sb,i=b.ld;if(g!=null&&i!=null&&c!=null){d=new lb;d.dj(H(g,i));if(a.un)f=d.fb(c)}a.mj=d;a.bf=Zd;for(d=0;d<a.Ii.length;++d){g=
a.Ii[d];if(f==null||Ia(f,Z(g))){g.qb(b);e+=1}}a.bf=Yd;c!=null&&a.Gf.length>0&&a.Gf.sort(function(k,m){k=ra(c,N(k));m=ra(c,N(m));if(k<m)return 1;if(k>m)return-1;return 0});for(d=0;d<a.Gf.length;++d){g=a.Gf[d];if(f==null||Ia(f,Z(g))){g.qb(b);e+=1}}a.bf=ne;for(d=0;d<a.Sg.length;++d)a.Sg[d].qb(b);e+=a.Sg.length;a.Ym=e;Be(a)}function Be(a){if(a.fa){a.fa.sb.xa(a.Dg);a.Dg=H(a.Dg,a.fa.Le)}}ye.prototype.getName=j("q");ye.prototype.Ok=ca("q");function Ce(a,b){a.fa=b}
function Wd(a,b,c){if(c==null)c=Zd;switch(c){case Ae:a.Gl=b;break;case Zd:a.Ii.push(b);break;case ee:a.le.push(b);break;case ze:break;case Yd:a.Gf.push(b);break;case ne:a.Sg.push(b);break}}function Gd(a,b){if(a.Aa==null)return null;var c=[];De(a,a.Aa,b,c);return c}function De(a,b,c,d){b.m()==c&&d.push(b);for(var e=0;e<b.aa.length;++e)De(a,b.aa[e],c,d)}function Qb(a,b){if(a.Aa==null)return null;var c=[];Ee(a,a.Aa,b,c);return c}
function Ee(a,b,c,d){M(b,c)!=null&&d.push(b);for(var e=0;e<b.aa.length;++e)Ee(a,b.aa[e],c,d)}function Fe(a,b){if(a.Aa==null)return null;return Ge(a,a.Aa,b)}function Ge(a,b,c){if(b.q==c)return b;for(var d=0;d<b.aa.length;++d){var e=Ge(a,b.aa[d],c);if(e)return e}return null}function L(a,b){if(a.Aa==null)return null;return He(a,a.Aa,b)}function He(a,b,c){if(b.Qa==c)return b;for(var d=0;d<b.aa.length;++d){var e=He(a,b.aa[d],c);if(e)return e}return null}
function Ie(a,b){if(b!=null){for(var c=0;c<a.pc.length;++c)if(a.pc[c]===b)return;a.pc.push(b)}}function Md(a,b,c){a=Gd(a,"mesh");if(a==null)return null;var d=null;if(c){c.clear();d=c}else d=new Je;for(c=0;c<a.length;++c){var e=a[c];if(e&&e.Dc){var f=null;f=e.sc?e.sc:e.ba&&Ac(e.ba)>100?new Ke(e.ba,e):new Le(e.ba,e);if(b&&e.sc==null)e.sc=f;d.Jd.push(f)}}return d}function pc(a,b,c){var d={};d.Xf=b;d.io=c+t();a.tg.push(d)}
function Me(a,b,c,d,e){if(b&&b.S&&(b.m()=="2doverlay"||b.m()=="mobile2dinput"))if(!e||e&&b.Yl()){var f=oe(b,true,a.ji);if(f.x<=c&&f.y<=d&&f.x+f.Ha>=c&&f.y+f.Fa>=d)return b}for(f=0;f<b.aa.length;++f){var g=Me(a,b.aa[f],c,d,e);if(g)return g}return null}function rc(a){for(var b=0;b<1E3;++b){var c=Math.round(Math.random()*1E4+10);if(L(a,c)==null)return c}return-1}var Ae=1,Zd=0,ee=2,ze=3,Yd=4,ne=5;function Ne(){this.Za()}Ne.prototype=new ye;Ne.prototype.Wi=l("panorama");function Oe(){this.Za();this.pj=new v;this.Vh=new v}Oe.prototype=new ye;Oe.prototype.Wi=l("free");function Bd(){this.a=this.sa=null;this.tj="";this.mb=0;this.U=this.Xa=null;this.wi="";this.Ll=this.Ld=null;this.il=false;this.Mn=function(a,b,c,d,e){this.tj=b;this.Xa=c;this.U=e;this.Ld=d;if(this.Xa!=null)X().Xa=c;if(a.length==0){ha(q.oa,"Error: Could not load file '"+b+"'");a=navigator.appVersion;a!=null&&a.indexOf("Chrome")!=-1&&ha(q.oa,"<i>For using local files with Chrome, add the parameter '--allow-file-access-from-files' when starting the browser. Or use Firefox instead.</i>",true);return null}if(b.indexOf(".ccbjs"))a=
q.yn(a);this.sa=b=new md;this.wm();this.a=new Mc(a);if(!this.Lk())return null;this.Ll=a;return b};this.wm=function(){var a=this.tj,b=a.lastIndexOf("/");if(b!=-1)a=a.substring(0,b+1);this.wi=a};this.Lk=function(){if(U(this.a)!=1701014630)return false;U(this.a);Pc(this.a,4);for(var a=0;R(this.a)>0;){var b=this.bb();++a;if(a==1&&b!=1)return false;switch(b){case 1:this.Pn();break;case 12:this.Qn();break;default:this.wa()}}return true};this.wa=function(){this.a.Ca=0+this.mb};this.bb=function(){var a=0;
a=Pc(this.a,2);var b=0;this.Th=b=Pc(this.a,4);this.mb=this.a.Ca+b;return a};this.vl=function(){var a=new F(false);this.cn(a);return a};this.cn=function(a){for(var b=0;b<16;++b)$a(a,b,V(this.a))};this.en=function(){var a=new I;a.qa=V(this.a);a.b=V(this.a);a.c=V(this.a);a.d=V(this.a);return a};this.tm=function(a){for(var b=0,c=[],d=[0,12416,925824,63447168,4194836608,2181570688],e=[],f=0;f<a;++f)e.push(Pc(this.a,1));for(;b<a;){f=0;var g=this.jo[e[b]];if(b+g>=a)return c.join("");for(var i=g;i>=0;--i){f+=
e[b];++b;if(i!=0)f<<=6}if(b>a)break;f-=d[g];if(f<1114111)c.push(this.En(f));else return c.join("")}return c.join("")};this.N=function(){var a=Pc(this.a,4);if(a>104857600)return"";if(a<=0)return"";return this.tm(a)};this.jo=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,5,5,5,5];this.En=function(a){if(a>65535){a-=65536;return String.fromCharCode(55296+(a>>10),56320+(a&1023))}else return String.fromCharCode(a)};this.Pn=function(){for(var a=this.mb;R(this.a)>0&&this.a.Ca<a;)switch(this.bb()){case 1004:this.sa.rg=U(this.a);break;case 20:this.bo();
break;case 2:var b=null;switch(U(this.a)){case 0:b=new Oe;this.rm(b);break;case 1:b=new Ne;this.sm(b);break;default:this.wa()}this.sa.Tl(b);break;default:this.wa()}};this.Nk=function(a,b,c,d,e,f,g){this.tj=d;this.Xa=e;this.U=g;this.Ld=f;this.a=new Mc(a);this.wm();U(this.a);U(this.a);Pc(this.a,4);a=-1;d=this.bb();if(d!=1)return null;for(b=this.mb;R(this.a)>0&&this.a.Ca<b;){d=this.bb();switch(d){case 2:d=U(this.a);++a;if(a==c){c=null;switch(d){case 0:c=new Oe;this.rm(c);break;case 1:c=new Ne;this.sm(c);
break;default:this.wa()}return c}else this.wa();default:this.wa()}}return null};this.bo=function(){U(this.a);this.sa.Hm=this.N();for(var a=this.mb;R(this.a)>0&&this.a.Ca<a;)switch(this.bb()){case 35:U(this.a);U(this.a);U(this.a);U(this.a);var b=U(this.a);if((b&1)!=0)this.sa.Ql=true;this.wa();break;case 37:b=U(this.a);U(this.a);if((b&1)!=0)if(q.oa==null)q.oa=new da(elementIdOfCanvas,showFPSCounter);else ea(q.oa);if((b&2)!=0){U(this.a);this.N()}break;default:this.wa()}};this.rm=function(a){var b=this.mb;
for(this.co(a);R(this.a)>0&&this.a.Ca<b;)switch(this.bb()){case 1007:a.pj=this.L();a.Vh=this.L();break;case 8:this.fn(a);break;default:this.wa()}};this.sm=function(){this.wa()};this.L=function(){var a=new v;a.b=V(this.a);a.c=V(this.a);a.d=V(this.a);return a};this.ak=function(){var a=new ka;a.Gd=V(this.a);a.Ad=V(this.a);a.ud=V(this.a);a.Jh=V(this.a);return a};this.xo=function(){var a=V(this.a),b=V(this.a),c=V(this.a),d=V(this.a);if(a>1)a=1;if(b>1)b=1;if(c>1)c=1;if(d>1)d=1;return q.Zl(d*255,a*255,b*
255,c*255)};this.Yg=function(){var a=new Da;a.b=V(this.a);a.c=V(this.a);return a};this.oc=function(){var a=new z;a.I=this.L();a.J=this.L();return a};this.co=function(a){if(this.bb()==26){a.q=this.N();a.Xk=U(this.a)}else this.Rm()};this.Rm=function(){this.a.position-=10};this.fn=function(a){for(var b=this.mb;R(this.a)>0&&this.a.Ca<b;)switch(this.bb()){case 9:this.xl(a,a.Aa,0);break;default:this.wa()}};this.xl=function(a,b,c){if(b!=null){var d=this.mb,e=U(this.a),f=U(this.a),g=this.N(),i=this.L(),k=
this.L(),m=this.L(),o=S(this.a),p=U(this.a),h=null,u=0;if(c==0){b.S=o;b.q=g;b.hb=p}for(;R(this.a)>0&&this.a.Ca<d;)switch(this.bb()){case 9:this.xl(a,h?h:b,c+1);break;case 10:switch(e){case 2037085030:h=new $d;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.qm(h);O(b,h);h=h;P(h);break;case 1752395110:h=new Xd;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.qm(h);O(b,h);h=h;P(h);break;case 1835950438:h=new se;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Un(h);
O(b,h);h=h;P(h);break;case 1953526632:h=new we(this.U,null);h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Xn(h);O(b,h);h=h;P(h);break;case 1819042406:h=new ae;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Vn(h);O(b,h);h=h;P(h);break;case 1835098982:h=new Id;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.$=a;h.Qa=f;this.Wn(h);O(b,h);h=h;P(h);break;case 1751608422:h=new de;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Yn(h);O(b,h);h=h;P(h);break;case 1935946598:h=
new je;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Tn(h);O(b,h);h=h;P(h);break;case 1752461414:h=new fe;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Zn(h);O(b,h);h=h;P(h);break;case 1954112614:h=new xe;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;h.g=this.oc();for(var r=0;r<16;++r)$a(h.Zg,r,V(this.a));O(b,h);h=h;P(h);break;case 1868837478:h=new me(this.U);h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Sn(h);O(b,h);h=h;P(h);break;case 1668575334:h=
new be;h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.ao(h);O(b,h);h=h;P(h);break;case 1835283046:h=new qe(this.U,a);h.i=e;h.f=i;h.P=k;h.na=m;h.S=o;h.q=g;h.hb=p;h.Qa=f;h.$=a;this.Rn(h);O(b,h);h=h;P(h);break;default:if(c==0)a.Gb=this.ak();this.wa();break}break;case 11:r=this.ul();h&&h.gc(u)&&h.gc(u).dj(r);++u;break;case 25:r=h;if(r==null&&c==0)r=a.Aa;this.bn(r,a);break;default:this.wa()}}};this.qm=function(a){var b=this.mb;a.g=this.oc();S(this.a);S(this.a);a.Dc=S(this.a);for(S(this.a);R(this.a)>
0&&this.a.Ca<b;)switch(this.bb()){case 14:var c=this.dn();a.ba=c;break;default:this.wa()}};this.dn=function(){var a=new zc;a.g=this.oc();for(var b=this.mb;R(this.a)>0&&this.a.Ca<b;)switch(this.bb()){case 15:var c=this.wl();c!=null&&a.Rc(c);break;default:this.wa()}return a};this.wl=function(){var a=new xc;a.g=this.oc();for(var b=this.mb;R(this.a)>0&&this.a.Ca<b;)switch(this.bb()){case 11:a.va=this.ul();break;case 16:for(var c=Math.floor(this.Th/2),d=0;d<c;++d)a.Z.push(Pc(this.a,2));break;case 17:c=
Math.floor(this.Th/36);for(d=0;d<c;++d){var e=new K;e.f=this.L();e.k=this.L();e.ya=U(this.a);e.ua=this.Yg();e.Kf=new Da;a.j.push(e)}break;case 18:c=Math.floor(this.Th/44);for(d=0;d<c;++d){e=new K;e.f=this.L();e.k=this.L();e.ya=U(this.a);e.ua=this.Yg();e.Kf=this.Yg();a.j.push(e)}break;case 19:c=this.Th/60;a.gd=[];a.Uc=[];for(d=0;d<c;++d){e=new K;e.f=this.L();e.k=this.L();e.ya=U(this.a);e.ua=this.Yg();e.Kf=new Da;a.gd.push(this.L());a.Uc.push(this.L());a.j.push(e)}break;default:this.wa()}return a};
this.ul=function(){var a=new sc;a.i=U(this.a);U(this.a);U(this.a);U(this.a);U(this.a);V(this.a);U(this.a);U(this.a);S(this.a);S(this.a);a.Hc=S(this.a);a.Ne=S(this.a);Oc(this.a,1);a.$d=S(this.a);S(this.a);S(this.a);S(this.a);for(var b=0;b<4;++b){var c=this.Jc();switch(b){case 0:a.$a=c;break;case 1:a.dc=c;break}S(this.a);S(this.a);S(this.a);if(Pc(this.a,2)!=0)switch(b){case 0:a.ub=true;break;case 1:break}}return a};this.bk=function(){return this.N()};this.yl=function(){var a=this.wi+this.bk();return fd(q.Re,
a,true)};this.Jc=function(){var a=this.bk(),b=this.wi+a;if(this.Xa!=null&&a!="")return Hc(this.Xa,b,true);return null};this.Xn=function(a){var b=this.mb;a.g=this.oc();a.vn=U(this.a);for(a.Pm=U(this.a);R(this.a)>0&&this.a.Ca<b;)switch(this.bb()){case 3:this.$n(a);break;default:this.wa()}};this.$n=function(a){var b=this.mb;a.caption=this.N();a.Nf=this.Jc();this.Yg();U(this.a);a.Eo=this.N();for(a.Oo=S(this.a);R(this.a)>0&&this.a.Ca<b;)switch(this.bb()){case 6:a.Bo=true;a.Go=this.N();break;case 4:a.Co=
true;a.Xi=this.N();break;case 5:a.Do=true;a.Po=this.N();a.Qo=this.N();break;default:this.wa()}};this.Wn=function(a){a.g=this.oc();a.ea=this.L();a.Qb=this.L();a.Fc=V(this.a);a.ic=V(this.a);a.Sf=V(this.a);a.Rf=V(this.a);a.Vk=S(this.a);Td(a)};this.Yn=function(a){a.g=this.oc();U(this.a);a.Gc.ya=this.ak();this.ak();S(this.a);this.L();var b=V(this.a);a.Gc.ta=b;if(b!=0)a.Gc.mg=1/b};this.Vn=function(a){a.$b.g=this.oc();a.g=a.$b.g;a.eh=V(this.a);a.If=V(this.a);var b=Oc(this.a,1);a.Bg=(b&2)!=0};this.Tn=function(a){a.g=
this.oc();a.Lc=this.yl();a.Dd=V(this.a);a.Hg=V(this.a);a.ml=U(this.a);a.Mm=S(this.a);a.kl=U(this.a);a.Hj=U(this.a);a.Qf=V(this.a);a.wf=S(this.a);U(this.a)};this.Zn=function(a){a.g=this.oc();a.Pf=V(this.a);a.ge=S(this.a);U(this.a);for(var b=U(this.a),c=0;c<b;++c)a.nb.push(this.L())};this.ao=function(a){a.vb=this.L();a.Ic=U(this.a);a.wb=this.L();a.me=U(this.a);a.Ig=U(this.a);a.Jg=U(this.a);a.qf=U(this.a);a.ni=U(this.a);a.qi=U(this.a);a.oi=U(this.a);a.rf=V(this.a);a.sf=V(this.a);a.of=V(this.a);a.Kg=
V(this.a);var b=U(this.a);if(b&1){a.wg=true;a.ff=U(this.a);a.sj=U(this.a)}else a.wg=false;if(b&2){a.hf=true;a.ci=U(this.a);a.Xb=this.L()}else a.hf=false;if(b&4){a.zf=true;a.Fi=V(this.a);a.Gi=V(this.a)}else a.zf=false};this.Rn=function(a){U(this.a);a.cd=S(this.a);if(a.cd){a.oe=U(this.a);a.pe=U(this.a);a.Ce=U(this.a);a.Be=U(this.a)}else{a.qe=V(this.a);a.re=V(this.a);a.Ee=V(this.a);a.De=V(this.a)}a.Hf=S(this.a);a.jc=U(this.a);a.ab=this.Jc();a.Kd=this.Jc();a.yf=S(this.a);a.cf=this.Jc();a.ei=U(this.a);
if(a.ei==1)a.kc=U(this.a)};this.Sn=function(a){U(this.a);a.cd=S(this.a);if(a.cd){a.oe=U(this.a);a.pe=U(this.a);a.Ce=U(this.a);a.Be=U(this.a)}else{a.qe=V(this.a);a.re=V(this.a);a.Ee=V(this.a);a.De=V(this.a)}a.Hf=S(this.a);a.jc=U(this.a);a.ab=this.Jc();a.Kd=this.Jc();a.yf=S(this.a);a.ee=S(this.a);a.Lf=Oc(this.a,1);a.Sa=this.N();a.Ec=this.N();a.Fe=U(this.a);a.hg=S(this.a);a.Sj=S(this.a);a.di=U(this.a);a.Rg=S(this.a);a.zg=U(this.a);a.Qg=S(this.a)};this.bn=function(a,b){if(a){var c=null;switch(U(this.a)){case 100:b=
new Bb;b.ve=this.L();c=b;break;case 101:b=new xb;b.Q=this.L();b.K=this.L();b.Mc=U(this.a);b.zb=S(this.a);yb(b);c=b;break;case 102:b=new Pe;b.pg=this.L();b.vb=this.L();b.ta=V(this.a);b.fh=V(this.a);b.Za();c=b;break;case 103:b=new Qe;b.ta=this.L();b.Xb=this.L();b.Ie=this.L();c=U(this.a);U(this.a);U(this.a);if(c&1)b.Qi=true;b.ob=V(this.a);c=b;break;case 104:b=new Kd(a,this.U);b.pf=V(this.a);b.Cb=V(this.a);b.Db=V(this.a);b.ie=V(this.a);b.ne=S(this.a);c=U(this.a);if(c&1){b.aj=false;b.Wf=true}else{b.aj=
true;b.Wf=false}if(a){b.zm=q.Bh(a.Fc);b.Jk=b.zm+10;b.no=(b.Jk-b.km)/50}c=b;break;case 105:b=new Re(a,this.U);b.ta=V(this.a);b.Db=V(this.a);b.ne=S(this.a);c=U(this.a);if(c&2){b.Hl=true;b.ob=V(this.a)}if(c&4){b.Wk=true;b.Ed=V(this.a);b.Cd=V(this.a);b.th=V(this.a)}c=b;break;case 106:var d=new Se(b);d.nh=U(this.a);d.mi=S(this.a);d.Ug=this.N();d.ti=S(this.a);d.Xd=this.L();d.ef=Oc(this.a,1);d.ng=this.N();c=U(this.a);if(c&1)d.kh=U(this.a);if(d.ef==3||d.ef==4)d.l=this.eb(b);c=d;break;case 107:c=new Vb(b,
this.U);c.ae=S(this.a);c.Vb=S(this.a);U(this.a);c.l=this.eb(b);c=c;break;case 108:c=new Te(b);c.vg=U(this.a);c.xi=U(this.a);c.yi=V(this.a);c.Ff=U(this.a);U(this.a);c.l=this.eb(b);c=c;break;case 109:b=new Ue;b.Kc=U(this.a);b.He=U(this.a);b.Mf=U(this.a);b.zb=S(this.a);c=U(this.a);b.Oa=[];for(d=0;d<c;++d)b.Oa.push(this.Jc());c=b;break;case 110:c=new Ve(b,this.U);c.ae=S(this.a);c.Vb=S(this.a);U(this.a);c.td=this.eb(b);c.rd=this.eb(b);c=c;break;case 111:c=new We(b);c.Of=U(this.a);U(this.a);c.l=this.eb(b);
c=c;break;case 112:c=new Xe(b,this.U);c.lf=U(this.a);c.kc=U(this.a);c.so=S(this.a);U(this.a);c.l=this.eb(b);c=c;break;case 113:d=new Ye(b);d.zc=U(this.a);d.$c=V(this.a);d.eg=V(this.a);d.og=S(this.a);d.xb=U(this.a);d.Ni=this.N();d.lg=this.N();d.Vg=V(this.a);d.$g=U(this.a);d.gb=this.L();d.fd=this.N();d.md=this.N();d.Xh=this.N();d.Mh=this.N();if(d.zc==3)d.Tg=U(this.a);c=U(this.a);if(c&1)d.vf=U(this.a);else{d.vf=1E4;if(d.$c!=0)d.vf=d.Vg/(d.$c/1E3)}d.Ac=this.eb(b);d.pd=this.eb(b);d.sd=this.eb(b);d.qd=
this.eb(b);c=d;break;case 114:b=new Ze;b.ah=U(this.a);b.gb=this.L();b.ai=U(this.a);b.zd=V(this.a);b.Oi=V(this.a);c=U(this.a);b.Vb=c&1?true:false;c=b;break;case 115:b=new $e(b,this.U);U(this.a);b.Ei=V(this.a);b.Cb=V(this.a);b.Db=V(this.a);b.ie=V(this.a);b.gb=this.L();b.fd=this.N();b.md=this.N();b.gi=this.N();b.Di=this.N();c=U(this.a);if(c&1)b.Yh=true;if(c&2){b.qh=true;b.Kh=V(this.a);b.df=V(this.a)}c=b;break;case 116:c=new af(b);c.Gm=S(this.a);U(this.a);c.l=this.eb(b);c=c;break;case 117:c=new q.Zd(b);
c.yb=this.N();U(this.a);this.tl(c.Pb,b);c=c;break;default:this.wa();return}c&&zb(a,c)}else this.wa()};this.tl=function(a,b){for(var c=U(this.a),d=0;d<c;++d){var e=new bf;e.i=U(this.a);e.q=this.N();switch(e.i){case 1:e.Kb=V(this.a);break;case 2:e.tc=this.N();break;case 6:e.Ke=this.L();break;case 7:e.ih=this.Jc();break;case 9:e.dg=this.eb(b);break;case 0:case 4:case 5:case 8:case 3:default:e.Lb=U(this.a);break}a.push(e)}};this.eb=function(a){if(U(this.a)){var b=new kc(a);this.$m(b,a);return b}return null};
this.$m=function(a,b){var c=this.bb();if(c!=29)this.wa();else for(var d=this.mb;R(this.a)>0&&this.a.Ca<d;){c=this.bb();if(c==30)(c=this.Zm(U(this.a),b))&&lc(a,c);else this.wa()}};this.Qn=function(){for(var a=this.mb;R(this.a)>0&&this.a.Ca<a;)switch(this.bb()){case 13:var b=U(this.a),c=this.N(),d=U(this.a);if(b&4)(b=Bc(this.Ld,c))&&this.eo(b,d);else if(b&8){b=null;try{b=this.tm(d)}catch(e){ha(q.oa,"error reading script: "+e)}if(b!=null){d=X();cf(d,b)}}this.wa();break;default:this.wa()}};this.Un=function(a){a.g=
this.oc();S(this.a);U(this.a);var b=U(this.a),c=U(this.a);a.jb=V(this.a);Oc(this.a,1);a.Ab=S(this.a);U(this.a);a.vm(this.an(a));a.Na=b;a.ib=c};this.an=function(a){var b=this.bk(),c=Bc(this.Ld,b);if(c==null){c=new q.kk;c.q=b;c!=null&&this.Ld.Gj.push(c);c=c}if(a!=null&&c!=null){if(c.Sc==null)c.Sc=[];c.Sc.push(a)}return c};this.eo=function(a,b){if(a!=null){U(this.a);a.qj=V(this.a);var c=this.mb;b=this.a.Ca+b;for(var d=[],e=0;R(this.a)>0&&this.a.Ca<c&&this.a.Ca<b;){var f=this.bb();if(f==33){f=new q.hn;
f.q=this.N();f.Gg=this.vl();f.yg=this.vl();a.Ta.push(f);e=U(this.a);d.push(f);e>=0&&e<d.length&&d[e].aa.push(f);e=U(this.a);for(var g=0;g<e;++g)f.kg.push(U(this.a));g=U(this.a);for(e=0;e<g;++e){var i=new q.jn;i.frame=V(this.a);i.position=this.L();f.se.push(i)}g=U(this.a);for(e=0;e<g;++e){i=new q.ln;i.frame=V(this.a);i.scale=this.L();f.Id.push(i)}g=U(this.a);for(e=0;e<g;++e){i=new q.kn;i.frame=V(this.a);i.rotation=this.en();f.we.push(i)}g=U(this.a);for(e=0;e<g;++e){i=new q.mn;i.uh=Pc(this.a,2);i.Ih=
U(this.a);i.Gh=V(this.a);f.Me.push(i)}}else if(f==15){f=this.wl();f!=null&&a.Rc(f)}else if(f==34){f=new q.Pg;f.q=this.N();f.Tc=V(this.a);f.K=V(this.a);f.Jb=V(this.a);a.Kj.push(f)}else this.wa()}try{a.Bj=-1;a.Tm=-1;b=c=0;var k,m;for(d=0;d<a.Ta.length;++d){f=false;for(c=0;c<a.Ta.length;++c){m=a.Ta[c];for(e=0;e<m.aa.length;++e)if(m.aa[e]===a.Ta[d])f=true}f||a.ue.push(a.Ta[d])}for(c=0;c<a.Va.length;++c){d=[];a.Ri.push(d);k=a.Va[c];var o=k.j.length;for(f=0;f<o;++f)d.push(false)}a.jf=false;d=o=0;var p,
h;for(o=0;o<a.Ta.length;++o){h=a.Ta[o];if(h.se.length||h.Id.length||h.we.length||h.Me.length){a.jf=true;break}}if(a.jf)for(o=a.Bc=0;o<a.Ta.length;++o){h=a.Ta[o];if(h.se.length){var u=h.se[h.se.length-1];if(u.frame>a.Bc)a.Bc=u.frame}if(h.Id.length){var r=h.Id[h.Id.length-1];if(r.frame>a.Bc)a.Bc=r.frame}if(h.we.length){var J=h.we[h.we.length-1];if(J.frame>a.Bc)a.Bc=J.frame}}if(a.jf&&!a.ql){a.ql=true;for(o=0;o<a.Ta.length;++o){h=a.Ta[o];for(d=0;d<h.Me.length;++d){var D=h.Me[d],w=D.Ih;p=a.Va[D.uh];var C=
p.j[w];D.Kl=C.f.e();D.Jl=C.k.e()}}}Cc(a,null,null);for(c=0;c<a.Ta.length;++c){m=a.Ta[c];for(b=0;b<m.kg.length;++b){k=a.Va[m.kg[b]];k.Md=m.gf.e()}}if(a.Va.length==0){a.cb.I.set(0,0,0);a.cb.J.set(0,0,0)}else{k=a.Va[0];a.cb.I=k.g.I.e();a.cb.J=k.g.J.e();for(c=1;c<a.Va.length;++c){k=a.Va[c];if(k.Md==null){A(a.cb,k.g.I);A(a.cb,k.g.J)}else{var E=k.g.e();fb(k.Md,E);A(a.cb,E.I);A(a.cb,E.J)}}}}catch(G){ha(q.oa,"error finalizing skinned mesh: "+G)}if(a.Sc&&a.Sc.length){for(e=0;e<a.Sc.length;++e)(k=a.Sc[e])&&
te(k,k.Na,k.ib);a.Sc=null}}};this.Zm=function(a,b){var c=0;switch(a){case 0:c=new vb;c.fi=U(this.a);c.ye=U(this.a);c.T=S(this.a);U(this.a);return c;case 1:b=new wb;b.Fd=U(this.a);b.rc=U(this.a);b.T=S(this.a);b.ca=this.L();if(b.Fd==4)b.Lh=this.L();b.te=S(this.a);b.qc=U(this.a);c=U(this.a);if(c&1){b.jd=true;b.uc=U(this.a)}return b;case 2:b=new Ab;b.hk=U(this.a);b.Bf=U(this.a);b.T=S(this.a);b.ca=this.L();b.Ci=false;c=U(this.a);if(c&1){b.Ci=true;b.sk=U(this.a)}return b;case 3:c=new Cb;c.ik=U(this.a);
c.Cf=U(this.a);c.T=S(this.a);c.ca=this.L();U(this.a);return c;case 4:c=new Db;c.Kc=U(this.a);c.Eb=U(this.a);c.T=S(this.a);c.Nf=this.Jc();if(c.Kc==1)c.wj=U(this.a);U(this.a);return c;case 5:b=new ec;c=U(this.a);b.Xj=(c&1)!=0;b.Lc=this.yl();b.Dd=V(this.a);b.Hg=V(this.a);b.Qf=V(this.a);b.wf=S(this.a);b.Hi=U(this.a);b.ll=S(this.a);b.Yj=this.L();return b;case 6:c=new gc;c.Il=U(this.a);return c;case 7:c=new Eb;U(this.a);c.zj=this.N();return c;case 8:c=new Fb;U(this.a);c.uk=this.N();c.ea=this.N();return c;
case 9:c=new Gb;c.Af=U(this.a);c.T=S(this.a);c.zb=S(this.a);c.ij=this.N();U(this.a);return c;case 10:c=new Ib(this.U);c.xe=this.N();U(this.a);return c;case 11:c=new Kb(this.U);c.Ze=U(this.a);U(this.a);return c;case 12:b=new Mb;b.Fd=U(this.a);b.rc=U(this.a);b.T=S(this.a);b.ca=this.L();b.te=S(this.a);b.qc=U(this.a);c=U(this.a);if(c&1){b.jd=true;b.uc=U(this.a)}return b;case 13:a=new Pb;a.dh=U(this.a);a.wd=U(this.a);a.Oh=V(this.a);a.Ae=U(this.a);a.Nc=V(this.a);c=U(this.a);if(c&1){a.ze=U(this.a);a.Ki=
S(this.a);a.fg=this.L()}if(c&2)a.cg=this.eb(b);if(c&4)a.Ji=this.L();return a;case 14:this.wa();return null;case 15:c=new sb;U(this.a);c.Eb=U(this.a);c.T=S(this.a);c.Sa=this.N();return c;case 16:c=new Xb;U(this.a);c.tb=this.N();c.Uj=U(this.a);c.Je=U(this.a);c.kd=this.N();return c;case 17:a=new cc;c=U(this.a);a.tb=this.N();a.Rh=U(this.a);a.Je=U(this.a);a.kd=this.N();a.l=this.eb(b);if(c&1)a.jh=this.eb(b);return a;case 18:c=new dc;c.bh=U(this.a);c.T=S(this.a);U(this.a);return c;case 19:c=new hc;U(this.a);
c.tb=this.N();c.ki=S(this.a);return c;case 20:c=new nc(this.U);U(this.a);c.xe=this.N();this.il=true;return c;case 22:c=new qc;c.Df=U(this.a);c.kj=S(this.a);U(this.a);c.l=this.eb(b);return c;case 23:c=new oc;c.Ef=U(this.a);c.rj=S(this.a);c.ok=U(this.a);U(this.a);return c;case 24:c=new df;c.yb=this.N();U(this.a);this.tl(c.Pb,b);return c;default:this.wa()}return null}};function $(){this.i=-1}n=$.prototype;n.m=l("none");n.Wa=l(false);n.nd=aa();n.Xe=aa();n.Oc=aa();n.Td=aa();n.Rd=l(false);n.Sd=l(false);n.reset=aa();n.Pe=l(null);n.h=l(null);function Kd(a,b){this.i=-1;this.Tb=0;this.ne=false;this.Wf=true;this.zh=this.Od=this.Vd=this.Ud=this.Qd=this.Kk=this.aj=false;this.Mk=this.od=0;this.km=20;this.Jk=100;this.no=(this.Jk-this.km)/50;this.zm=90;this.Tb=t();this.la=a;this.U=b;a&&Ob(this,a.ea)}Kd.prototype=new $;n=Kd.prototype;n.m=l("camerafps");n.pf=88;n.Cb=0.06;n.Db=200;n.ie=0;n.ne=false;n.pi=true;function Ld(a,b){a.pi=b}function Ob(a,b){if(a.la!=null){b=b.substract(a.la.f);b=ya(b);a.od=b.b;a.Mk=b.c;if(a.od>a.pf)a.od-=360}}n=Kd.prototype;
n.Wa=function(a){if(this.la==null)return false;if(this.la.$.fa!==this.la)return false;var b=t(),c=b-this.Tb;if(c>250)c=250;this.Tb=b;var d=this.la.f.e();if(this.pi&&(this.Vd||this.Od)){var e=this.la.f.substract(this.la.ea);if(this.ne)e.c=0;e.normalize();this.Vd&&d.ra(x(e,this.Cb*-c));this.Od&&d.ra(x(e,this.Cb*c))}if(this.pi&&(this.Qd||this.Ud)){e=xa(this.la.f.substract(this.la.ea),this.la.Qb);e.normalize();if(this.Qd){e=x(e,this.Cb*-c);d.ra(e);Nb(this.la,this.la.ea.add(e))}if(this.Ud){e=x(e,this.Cb*
c);d.ra(e);Nb(this.la,this.la.ea.add(e))}}this.la.f=d;d=new v(0,0,1);e=new F;bb(e,new v(this.od,this.Mk,0));Va(e,d);var f=0;var g=e=2.0E-5,i=false;if(this.U!=null&&a.$!=null){i=a.$;i=i.Aa==null||i.ji==null?null:Me(i,i.Aa,this.U.lc,this.U.mc,true);i=i!=null}if(this.Wf){e*=3;g*=3}if(!i)if(this.aj){var k=this.U.R.fc(),m=this.U.mc;if(k>0&&m>0&&this.U.Og)f=Math.sin((m-k/2)/k)*100*0.5}else if(this.Wf||this.Kk)if(this.U.Ng){f=this.U.mc-this.U.Mg;if(f!=0)this.U.Dj=b}f+=0;if(f>300)f=300;if(f<-300)f=-300;this.od+=
f*c*this.Db*g;if(this.od<-this.pf)this.od=-this.pf;if(this.od>this.pf)this.od=this.pf;f=0;if(!i)if(this.aj){b=this.U.R.hc();g=this.U.lc;if(b>0&&g>0&&this.U.Og)f=Math.sin((g-b/2)/b)*100*0.5}else if(this.Wf||this.Kk)if(this.U.Ng){f=this.U.lc-this.U.Lg;if(f!=0)this.U.Dj=b}f+=0;if(f>300)f=300;if(f<-300)f=-300;this.Mk+=f*c*this.Db*e;if(this.Wf||this.Kk){c=this.U;c.Lg=c.lc;c.Mg=c.mc}if(this.pi&&this.zh)(a=M(a,"collisionresponse"))&&!a.yd&&ef(a,this.ie);Nb(this.la,this.la.f.add(d));return false};
n.nd=function(a){$.prototype.nd.call(this,a)};n.Xe=aa();n.Oc=function(a){$.prototype.Oc.call(this,a)};n.Td=function(a){$.prototype.Td.call(this,a)};n.Ch=function(a,b){if(b==37||b==65){if(this.Qd=a)this.Ud=false;return true}if(b==39||b==68){if(this.Ud=a)this.Qd=false;return true}if(b==38||b==87){if(this.Vd=a)this.Od=false;return true}if(b==40||b==83){if(this.Od=a)this.Vd=false;return true}if(b==32){this.zh=a;return true}return false};n.Rd=function(a){return this.Ch(true,a.keyCode)};
n.Sd=function(a){return this.Ch(false,a.keyCode)};function Re(a,b){this.i=-1;this.Db=1E4;this.ta=100;this.ne=false;this.Tb=t();this.la=a;this.U=b;this.Hl=false;this.ed=this.dd=this.ob=0;this.Wk=false;this.th=this.Cd=this.Ed=0;this.cc=90}Re.prototype=new $;n=Re.prototype;n.m=l("cameramodelviewer");n.Db=0.06;n.ta=100;n.ne=false;
n.Wa=function(){if(this.la==null)return false;if(this.la.$.fa!==this.la)return false;var a=t(),b=a-this.Tb;if(b>250)b=250;this.Tb=a;a=this.la.f.e();var c=this.la.ea.e(),d=c.substract(N(this.la)),e=0,f=0;if(this.U.Ng){e=(this.U.lc-this.U.Lg)*this.Db/5E4;f=(this.U.mc-this.U.Mg)*this.Db/5E4}if(this.Hl&&this.ob!=0){if(q.ka(e)){e=this.dd;this.dd*=0.9;if(this.dd>0)this.dd=Math.max(0,this.dd-b/this.ob);else if(this.dd<0)this.dd=Math.min(0,this.dd+b/this.ob)}else this.dd=e*(this.ob/1E3);if(q.ka(f)){f=this.ed;
this.ed*=0.9;if(this.ed>0)this.ed=Math.max(0,this.ed-b/this.ob);else if(this.ed<0)this.ed=Math.min(0,this.ed+b/this.ob)}else this.ed=f*(this.ob/1E3)}d=xa(d,this.la.Qb);d.c=0;d.normalize();if(!q.ka(e)){y(d,b*e);a.ra(d)}if(!this.ne&&!q.ka(f)){e=this.la.Qb.e();e.normalize();b=a.add(x(e,b*f));f=b.e();f.c=c.c;e=this.ta/10;if(f.pb(c)>e)a=b}b=this.U;b.Lg=b.lc;b.Mg=b.mc;if(this.Wk){b=q.Bh(this.la.Fc);if(this.cc<this.Ed)this.cc=this.Ed;if(this.cc>this.Cd)this.cc=this.Cd;f=this.th;f=Math.abs(this.cc-b)/8;if(f<
this.th)f=this.th;if(b<this.Cd-f&&b<this.cc){b+=f;if(b>this.Cd)b=this.Cd}if(b>this.Ed+f&&b>this.cc){b-=f;if(b<this.Ed)b=this.Ed}Ud(this.la,q.$l(b))}d=a.substract(c);oa(d,this.ta);a=c.add(d);this.la.f=a;return false};n.Xe=function(a){this.cc+=a*this.th;if(this.cc<this.Ed)this.cc=this.Ed;if(this.cc>this.Cd)this.cc=this.Cd};function Se(a){this.nh=5E3;this.mi=this.xj=this.Ol=false;this.ti=true;this.kh=0;this.Fj=true;this.ef=ff;this.Mi=false;this.Zc=a;this.Ba=0;this.Ol=false;this.ad=this.ii=null;this.Mi=false;this.Ug=null;this.kh=0;this.ng=this.Xd=null;this.gl=0;this.Vl=false}Se.prototype=new $;var ff=0;Se.prototype.m=l("followpath");
Se.prototype.h=function(a,b,c,d){a=new Se;a.nh=this.nh;a.mi=this.mi;a.ti=this.ti;a.Ug=this.Ug;a.kh=this.kh;a.Xd=this.Xd?this.Xd.e():null;a.ef=this.ef;a.ng=this.ng;a.l=this.l?this.l.h(c,d):null;return a};
Se.prototype.Wa=function(a,b){if(a==null||!this.Zc||!this.nh)return false;if(a!==this.ii){if(this.ii=a)this.xj=this.ii.m()=="camera";return false}if(!this.ad)if(!this.Ol)if(this.Ug.length)if(this.Zc){var c=Fe(this.Zc,this.Ug);c&&c.m()=="path"&&gf(this,c)}if(this.ad==null)return false;c=false;var d=null;if(this.xj&&this.ti){c=!this.Fj;d=a;if(this.Zc.fa!==d){if(this.ad.nb.length)d.f=ge(this.ad,0);this.Fj=true;return false}else this.Fj=false;if(!this.Ba||!c)this.Ba=b}if(!this.Ba)this.Ba=this.Zc.Ba;d=
(b-this.Ba+this.kh)/this.nh;if(d>1&&!this.ad.ge)switch(this.ef){case ff:d%=1;break;case 1:d=1;break;case 2:d=1;if(!this.Mi){if(this.Zc)if(this.ng.length)if((c=Fe(this.Zc,this.ng))&&c.m()=="camera"){(b=this.Zc.ji)&&Hd(c,b.hc(),b.fc());this.Zc.fa=c}this.Mi=true}break;case 3:if(d>this.gl+1&&this.l!=null){this.l.execute(a);this.gl=d}d%=1;break;case 4:d=1;if(!this.Vl&&this.l!=null){this.l.execute(a);this.Vl=true}break}else this.Mi=false;b=ie(this.ad,d);c=!b.O(a.f);a.f=b;if(this.mi&&this.ad.nb.length){d=
ie(this.ad,d+0.0010);if(!q.ka(d.pb(b))){var e=d.substract(b);oa(e,100);if(this.xj){d=a;a=b.add(e);c=c||!a.O(d.ea);Nb(d,a)}else{if(!this.Xd||qa(this.Xd))d=ya(e);else{d=new F;bb(d,ya(e));b=new F;bb(b,this.Xd);d=H(d,b);d=cb(d)}c=c||!d.O(a.P);a.P=d}}}return c};function gf(a,b){a.ad=b}Se.prototype.Pe=function(a){if(this.l)return mc(this.l,a);return null};function xb(a,b,c,d,e,f){this.Q=new v(0,0,0);this.K=new v(40,40,40);this.Ba=t();this.Mc=3E3;this.Ml=this.gg=this.sg=this.zb=false;this.Fl=null;this.El=0;this.Ye=this.Wh=false;if(a)this.Q=a.e();if(b)this.K=b.e();if(c)this.Mc=c;if(d)this.zb=d;yb(this);if(e)this.sg=e;if(f)this.gg=f}xb.prototype=new $;xb.prototype.m=l("flystraight");
xb.prototype.h=function(a,b,c,d){a=new xb;a.Q=this.Q.e();a.K=this.K.e();a.ca=this.ca.e();a.tk=this.tk;a.pk=this.pk;a.Mc=this.Mc;a.zb=this.zb;a.gg=this.gg;a.Wh=this.Wh;a.Ye=this.Ye?this.Ye.h(c,d):null;return a};
xb.prototype.Wa=function(a,b){var c=b-this.Ba,d=false;if(c!=0){var e=this.Q.e();if(!this.zb&&c>=this.Mc){e=this.K.e();d=true}else e.ra(x(this.ca,c%this.Mc*this.pk));if(this.gg){if(a.m()=="camera"){Nb(a,e);c=M(a,"camerafps");c!=null&&Ob(c,e)}}else a.f=e;if(this.Ml&&this.Ba!=b){if(a){P(a);b=Z(a);e=false;c=Qb(a.$,"gameai");for(var f=0;f<c.length;++f)if(c[f]!==this.Fl){var g=M(c[f],"gameai");if(!(g&&!(g.xb>0)))if(Ia(b,Z(c[f]))){Tb(g,this.El,c[f]);e=true;break}}b=e}else b=false;d=b||d}if(d){if(a.$)a.$.Cj=
a.f.e();this.Ye&&this.Ye.execute(a);this.sg&&Sd(a,this);this.Wh&&a.$&&pc(a.$,a,0)}return true}return false};function yb(a){a.ca=a.K.substract(a.Q);a.tk=a.ca.getLength();a.ca.normalize();a.pk=a.tk/a.Mc};function Pe(a,b,c,d){this.pg=new v;this.vb=new v(0,1,0);this.rh=new v;this.Nd=new v;this.Ba=t();this.fh=0.01;this.ta=100;if(a)this.pg=a.e();if(b)this.ta=b;if(c)this.vb=c.e();if(d)this.fh=d;this.Za()}Pe.prototype=new $;Pe.prototype.m=l("flycircle");Pe.prototype.h=function(){var a=new Pe;a.pg=this.pg.e();a.vb=this.vb.e();a.rh=this.rh.e();a.Nd=this.Nd.e();a.fh=this.fh;a.ta=this.ta;return a};
Pe.prototype.Wa=function(a,b){b=b-this.Ba;if(b!=0){b=b*this.fh;b=x(this.rh,Math.cos(b)).add(x(this.Nd,Math.sin(b)));y(b,this.ta);a.f=this.pg.add(b);return true}return false};Pe.prototype.Za=function(){this.vb.normalize();this.Nd=this.vb.c!=0?new v(50,0,0):new v(0,50,0);this.Nd=xa(this.Nd,this.vb);this.Nd.normalize();this.rh=xa(this.Nd,this.vb);this.rh.normalize()};function Bb(a){this.ve=new v;if(a)this.ve=a.e();this.Ba=t();this.Bl=false;this.gk=0;this.Yk=null}Bb.prototype=new $;Bb.prototype.m=l("rotation");Bb.prototype.h=function(){var a=new Bb(this.Ma,this.Ga);a.ve=this.ve.e();a.Ba=this.Ba;return a};
Bb.prototype.Wa=function(a,b){var c=b-this.Ba;if(this.Bl){if(this.gk-this.Ba==0)return false;b=(b-this.Ba)/(this.gk-this.Ba);if(b>1)Sd(a,this);else{c=new I;var d=x(this.ve,q.Wc);kb(c,d.b,d.c,d.d);var e=new I;d=x(this.Yk,q.Wc);kb(e,d.b,d.c,d.d);hb(e,e,c,b);d=new v;jb(e,d);y(d,q.Hd);a.P=d;return true}}else if(c!=0){a.P.ra(x(this.ve,c/10));this.Ba=b;return true}return false};function Ue(a,b,c){this.Oa=[];this.zb=true;this.He=20;this.Jj=this.Mf=this.Kc=0;if(a)this.Oa=a;if(b)this.He=b;if(c==true)this.loop=false}Ue.prototype=new $;Ue.prototype.m=l("animatetexture");Ue.prototype.h=function(){var a=new Ue;a.Oa=this.Oa;a.zb=this.zb;a.He=this.He;a.Kc=this.Kc;a.Mf=this.Mf;return a};
Ue.prototype.Wa=function(a,b){if(a==null||this.Oa==null)return false;var c=false,d=null;if(this.Oa.length){var e=this.Jj==0?a.$.Ba:this.Jj;d=b-e;var f=e+this.He*this.Oa.length;e=0;e=!this.zb&&b>=f?this.Oa.length-1:this.He>0?Math.floor(d/this.He%this.Oa.length):0;if(e<this.Oa.length)if(this.Kc==1){if(this.Mf>=0&&this.Mf<a.xc())if((d=a.gc(this.Mf))&&d.$a!==this.Oa[e]){d.$a=this.Oa[e];c=true}}else{b=a.xc();for(f=0;f<b;++f)if((d=a.gc(f))&&d.$a!==this.Oa[e]){d.$a=this.Oa[e];c=true}}}return c};
Ue.prototype.reset=function(){this.Jj=t()};function Vb(a,b,c,d){this.Ga=b;this.lh=0;this.pl=this.ol=-1;this.gn=false;this.to=null;this.Ma=a;this.xg=c;this.ae=true;this.Vb=false;this.ha=this.l=null;d!=true&&Ie(a,this)}Vb.prototype=new $;n=Vb.prototype;n.m=l("onclick");n.h=function(a,b,c,d){a=new Vb(this.Ma,this.Ga);a.ae=this.ae;a.Vb=this.Vb;a.l=this.l?this.l.h(c,d):null;a.ha=this.ha;return a};
n.Wa=function(a){if(a==null)return false;if(this.lh){var b=t();if(b-this.lh<1500){this.lh=0;if(b-this.Ga.Dj<250)return false;if(a.S&&hf(this,a,this.ol,this.pl)){this.xg&&this.xg();this.$i(a);return true}}}return false};n.Oc=function(a){this.ol=wd(this.Ga,a);this.pl=xd(this.Ga,a);this.lh=t()};n.$i=function(a){this.l&&this.l.execute(a)};
function hf(a,b,c,d){if(b==null)return false;if(b.m()=="2doverlay"){var e=oe(b,false,a.Ga.R);if(e.x<=c&&e.y<=d&&e.x+e.Ha>=c&&e.y+e.Fa>=d)return true}c=Od(a.Ga,c,d);if(c==null)return false;d=a.Ma.fa;if(d==null)return false;d=N(d);e=new Ba;e.Q=d;e.K=c;return Wb(a,a.Ma,b,e,a.ae,a.Vb,a.ha,null)}function Ub(a,b,c,d,e,f){if(!e||!b)return 999999999999;if(a=e.Tf(c,d,true,null,f))return c.pb(a);return 999999999999}
function Wb(a,b,c,d,e,f,g,i){var k=c.fb(),m=0;m=new F(false);if(Xa(c.Y,m))if(Ha(k,Ua(m,d.Q),Ua(m,d.K))){m=null;if(c.Ln&&c.ba)m=c;e=m==null||e;if(!e){k=m.sc;if(k==null){k=m.ba&&Ac(m.ba)>100?new Ke(m.ba,m,0):new Le(m.ba,m);m.sc=k}if(k){k=k.Tf(d.Q,d.K,true,null,true);if(k!=null)if(f){m=Ub(a,b,d.Q,k,g,true);a=k.pb(d.Q);if(m+q.qn<a)return false;else{if(i!=null)i.za=k.pb(d.Q);return true}}else{if(i!=null)i.za=d.Q.pb(Ea(Z(c)));return true}}else e=true}if(e)if(f){d=d.Q.e();k=Z(c);m=Fa(k);y(m,0.5);f=q.On(m.b,
m.c,m.d);f=Math.sqrt(f*f+f*f);c=Ea(Z(c));m=Ub(a,b,d,c,g,true);a=c.pb(d)-f;if(m<a)return false;else{if(i!=null)i.za=a;return true}}else{if(i!=null)i.za=d.Q.pb(Ea(Z(c)));return true}}return false}Vb.prototype.Pe=function(a){if(this.l)return mc(this.l,a);return null};function Ve(a,b){this.Ga=b;this.Ma=a;this.td=this.rd=null;this.xk=this.qk=0}Ve.prototype=new Vb(null,null,null,true);Ve.prototype.m=l("onmove");Ve.prototype.h=function(a,b,c,d){a=new Ve(this.Ma,this.Ga);a.ae=this.ae;a.Vb=this.Vb;a.l=this.l?this.l.h(c,d):null;a.ha=this.ha;a.rd=this.rd?this.rd.h(c,d):null;a.td=this.td?this.td.h(c,d):null;return a};
Ve.prototype.Wa=function(a){var b=this.qk==0,c=t();if(b||c-this.qk>100){this.qk=c;c=hf(this,a,this.Ga.lc,this.Ga.mc);if(b)this.xk=c;else if(c!=this.xk){if((this.xk=c)&&this.rd)this.rd.execute(a);else!c&&this.td&&this.td.execute(a);return true}}return false};Ve.prototype.Pe=function(a){var b=null;if(this.td)if(b=mc(this.td,a))return b;if(this.rd)if(b=mc(this.rd,a))return b;return null};function Te(a,b,c,d,e){this.lh=0;this.cj=a;this.Ff=this.yi=this.xi=this.vg=0;this.l=null;this.xg=d;if(b)this.ta=b;if(c)this.Ff=c;if(e)this.vg=1;this.yj=false}Te.prototype=new $;n=Te.prototype;n.m=l("oncollide");n.h=function(a,b,c,d){a=new Te(this.cj);a.vg=this.vg;a.xi=this.xi;a.yi=this.yi;a.Ff=this.Ff;a.l=this.l?this.l.h(c,d):null;return a};
n.Wa=function(a){if(a==null||this.cj==null)return false;var b=false,c=null;if(this.xi==0)c=this.cj.fa;else if(this.Ff!=-1)c=L(this.cj,this.Ff);if(c){if(a===c)return false;var d=N(c);a=N(a);d=d.pb(a)<this.yi;switch(this.vg){case 0:if(d&&!this.yj){this.$i(c);b=true}break;case 1:if(!d&&this.yj){this.$i(c);b=true}break}this.yj=d}return b};n.$i=function(a){this.xg&&this.xg.call(a);this.l&&this.l.execute(a)};n.Pe=function(a){if(this.l)return mc(this.l,a);return null};function Qe(a,b,c,d,e){this.ta=a;this.Xb=b;this.Ie=c;this.ha=d;this.ob=e;this.Pl=false;this.mf=this.db=null;this.je=new v(0,0,0);this.yd=false;this.he=this.dl=0;this.Qi=false;if(this.Xb==null)this.Xb=new v(0,1,0);if(this.ta==null)this.ta=new v(30,50,30);if(this.Ie==null)this.Ie=new v(0,0,0);if(this.ob==null)this.ob=5.0E-4;this.reset()}Qe.prototype=new $;n=Qe.prototype;n.m=l("collisionresponse");
n.h=function(){var a=new Qe;a.ta=this.ta.e();a.Xb=this.Xb.e();a.Ie=this.Ie.e();a.je=this.je.e();a.Qi=this.Qi;a.ha=this.ha;return a};n.reset=function(){this.db=null;this.mf=t()};n.Qc=ca("ha");
n.Wa=function(a,b){var c=b-this.mf;if(!this.ha)return false;if(c>150)c=150;this.mf=b;if(this.db!==a){this.db=a;this.je=a.f.e()}var d=a.f.e(),e=a.f.substract(this.je);d=x(this.Xb,c);if(this.yd){var f=(b-this.dl)/1E3;if(f>5)f=5;y(d,f)}else y(d,0.0010);if(this.he>0){f=x(this.Xb,c*this.he*0.0010);ma(d,f);this.he-=c;if(this.he<0)this.he=0}c=e.add(d);if(!qa(c)){if(!this.Pl)this.ob=this.ta.getLength()*1.0E-6;c=null;if(a&&a.m()=="camera")c=a;var g;if(c)g=c.ea.substract(c.f);f=new B;var i={};i.za=0;this.ha.Dh(a);
var k=this.ha,m=this.je.substract(this.Ie),o=this.ta,p=this.ob;if(!k||o.b==0||o.c==0||o.d==0)d=m;else{var h={};h.Xg=m.e();h.$j=e.e();h.Sb=o.e();h.Ah=9.99999999E7;h.fo=k;h.ho=p;h.ej=0;h.wh=new v;k=wa(h.Xg,h.Sb);e=wa(h.$j,h.Sb);k=jf(this,0,h,k,e);i.za=0;if(!qa(d)){h.Xg=va(k,h.Sb);h.$j=d.e();h.ej=0;e=wa(d,h.Sb);k=jf(this,0,h,k,e);i.za=h.ej==0?1:0;if(i.za<0.5&&h.xh){d=Oa(h.xh);d.normalize();if(!(Math.abs(d.c)>Math.abs(d.b)&&Math.abs(d.c)>Math.abs(d.d)))i.za=1}}if(h.ej&&f!=null){f.M=h.xh.M.e();f.V=h.xh.V.e();
f.X=h.xh.X.e();ua(f.M,h.Sb);ua(f.V,h.Sb);ua(f.X,h.Sb)}ua(k,h.Sb);d=k}this.ha.Dh(null);d.ra(this.Ie);if(i.za<0.5)this.yd=false;else{if(!this.yd)this.dl=b;this.yd=true}if(a.f.O(d))return false;a.f=d.e();if(this.Qi)if(!this.yd)if(!(qa(f.M)&&qa(f.V)&&qa(f.X))){b=a.P.c;d=f.M.add(f.V).add(f.X);y(d,1/3);f.M.b-=d.b;f.M.d-=d.d;f.V.b-=d.b;f.V.d-=d.d;f.X.b-=d.b;f.X.d-=d.d;za(f.M,b);za(f.V,b);za(f.X,b);f.M.b+=d.b;f.M.d+=d.d;f.V.b+=d.b;f.V.d+=d.d;f.X.b+=d.b;f.X.d+=d.d;b=Oa(f);d=new v;d.b=Math.atan2(b.d,b.c)*q.Hd;
d.c=a.P.c;d.d=-Math.atan2(b.b,b.c)*q.Hd;a.P=d}if(c&&g){b=true;for(d=0;d<a.ga.length;++d)if((f=a.ga[d])&&f.m()=="cameramodelviewer"){b=false;break}if(b)c.ea=a.f.add(g)}}this.je.O(a.f);this.je=a.f.e();return false};
function jf(a,b,c,d,e){var f=c.ho;if(b>5)return d.e();c.fj=e.e();c.nm=e.e();c.nm.normalize();c.Ti=d.e();c.Ak=false;c.Ah=9.99999999E7;var g=new z;c.Xg.xa(g.I);c.Xg.xa(g.J);A(g,c.Xg.add(c.$j));ma(g.I,c.Sb);g.J.ra(c.Sb);var i=[],k=new F,m=1/c.Sb.c,o=1/c.Sb.d;k.n=1/c.Sb.b;k.o=m;k.p=o;k.Da=false;c.fo.Vf(g,k,i);for(g=0;g<i.length;++g)a:{k=i[g];var p=Ma(k);if(La(p,c.nm)){var h=m=0,u=false,r=0;m=p.pb(c.Ti);o=p.k.da(c.fj);if(q.ka(o))if(Math.abs(m)>=1)break a;else{u=true;h=0}else{o=1/o;h=(-1-m)*o;m=(1-m)*o;
if(h>m){o=m;m=h;h=o}if(h>1||m<0)break a;h=q.Rb(h,0,1);q.Rb(m,0,1)}m=new v;o=false;var J=1;if(!u){p=c.Ti.substract(p.k).add(x(c.fj,h));r=k.V.substract(k.M);var D=k.X.substract(k.M);u=r.da(r);var w=r.da(D),C=D.da(D),E=p.substract(k.M);r=E.da(r);E=E.da(D);D=r*C-E*w;r=E*u-r*w;if(D+r-(u*C-w*w)<0&&!(D<0||r<0)){o=true;J=h;m=p.e()}}if(!o){h=c.fj.e();p=c.Ti.e();u=sa(h);var G=D=r=0;w={};w.za=0;r=u;D=2*h.da(p.substract(k.M));G=sa(k.M.substract(p))-1;if(kf(a,r,D,G,J,w)){J=w.za;o=true;m=k.M.e()}if(!o){D=2*h.da(p.substract(k.V));
G=sa(k.V.substract(p))-1;if(kf(a,r,D,G,J,w)){J=w.za;o=true;m=k.V.e()}}if(!o){D=2*h.da(p.substract(k.X));G=sa(k.X.substract(p))-1;if(kf(a,r,D,G,J,w)){J=w.za;o=true;m=k.X.e()}}C=k.V.substract(k.M);G=k.M.substract(p);E=sa(C);var T=C.da(h),ba=C.da(G);r=E*-u+T*T;D=E*2*h.da(G)-2*T*ba;G=E*(1-sa(G))+ba*ba;if(kf(a,r,D,G,J,w)){r=(T*w.za-ba)/E;if(r>=0&&r<=1){J=w.za;o=true;m=k.M.add(x(C,r))}}C=k.X.substract(k.V);G=k.V.substract(p);E=sa(C);T=C.da(h);ba=C.da(G);r=E*-u+T*T;D=E*2*h.da(G)-2*T*ba;G=E*(1-sa(G))+ba*
ba;if(kf(a,r,D,G,J,w)){r=(T*w.za-ba)/E;if(r>=0&&r<=1){J=w.za;o=true;m=k.V.add(x(C,r))}}C=k.M.substract(k.X);G=k.X.substract(p);E=sa(C);T=C.da(h);ba=C.da(G);r=E*-u+T*T;D=E*2*h.da(G)-2*T*ba;G=E*(1-sa(G))+ba*ba;if(kf(a,r,D,G,J,w)){r=(T*w.za-ba)/E;if(r>=0&&r<=1){J=w.za;o=true;m=k.X.add(x(C,r))}}}if(o){o=J*c.fj.getLength();if(!c.Ak||o<c.Ah){c.Ah=o;c.wh=m.e();c.Ak=true;c.xh=k;++c.ej}}}}if(!c.Ak)return d.add(e);i=d.add(e);d=d.e();if(c.Ah>=f){e=e.e();oa(e,c.Ah-f);d=c.Ti.add(e);e.normalize();ma(c.wh,x(e,f))}e=
c.wh.e();g=d.substract(c.wh);g.normalize();k=new Ja;k.k=g.e();k.Ua=-e.da(k.k);e=i.substract(x(g,k.pb(i))).substract(c.wh);if(e.getLength()<f)return d;return jf(a,b+1,c,d,e)}function kf(a,b,c,d,e,f){a=c*c-4*b*d;if(a<0)return false;d=Math.sqrt(a);a=(-c-d)/(2*b);b=(-c+d)/(2*b);if(a>b){c=b;b=a;a=c}if(a>0&&a<e){f.za=a;return true}if(b>0&&b<e){f.za=b;return true}return false}function ef(a,b){if(a.he==0)a.he=b*100};function We(a){this.mh=0;this.Ma=a;this.l=null;this.Of=0;this.mh=t()}We.prototype=new $;We.prototype.m=l("timer");We.prototype.h=function(a,b,c,d){a=new We(this.Ma);a.l=this.l?this.l.h(c,d):null;a.mh=this.mh;a.Of=this.Of;return a};We.prototype.Wa=function(a){if(a==null)return false;if(this.Of>0){var b=t();if(b-this.mh>this.Of){this.mh=b;this.l&&this.l.execute(a);return true}}return false};
function Xe(a,b){this.Ma=a;this.Ia=b;this.l=null;this.hd=this.Of=0;this!=null&&b.xf.push(this);this!=null&&b.Ai.push(this);Ie(a,this)}Xe.prototype=new $;n=Xe.prototype;n.m=l("keypress");n.h=function(a,b,c,d){a=new Xe(this.Ma,this.Ia);a.lf=this.lf;a.kc=this.kc;a.l=this.l?this.l.h(c,d):null;return a};n.Wa=function(a){if(a==null)return false;if(this.hd)if(t()-this.hd<1E3){this.hd=0;this.l&&this.l.execute(a);return true}return false};n.Rd=function(a){if(this.lf==0&&a.keyCode==this.kc){this.hd=t();return true}return false};
n.Sd=function(a){if(this.lf==1&&a.keyCode==this.kc){this.hd=t();return true}return false};n.Oc=function(a){if(this.lf==1)if(a.button>1&&this.kc==2)this.hd=t();else if(a.button<=1&&this.kc==1)this.hd=t()};n.nd=function(a){if(this.lf==0)if(a.button>1&&this.kc==2)this.hd=t();else if(a.button<=1&&this.kc==1)this.hd=t()};n.Pe=function(a){if(this.l)return mc(this.l,a);return null};
function Ye(a){this.eg=this.$c=this.zc=0;this.og=false;this.xb=100;this.vf=3E3;this.Tg=-1;this.lg=this.Ni="";this.Vg=100;this.$g=0;this.gb=new v;this.Mh=this.Xh=this.md=this.fd="";this.qd=this.sd=this.pd=this.Ac=null;this.Ej=this.Nj=this.Cc=0;this.af=null;this.Nh=this.ce=this.Vc=this.qg=0;this.Om=null;this.nj=this.Uk=this.jj=false;this.oj=new Ba;this.si=0;this.nk=this.ha=null;this.Ge=a;this.hl=0;this.mk=new v;this.Lj=null;this.Mj=0}Ye.prototype=new $;Ye.prototype.m=l("gameai");
Ye.prototype.h=function(a,b,c,d){a=new Ye(this.Ge);a.zc=this.zc;a.$c=this.$c;a.eg=this.eg;a.og=this.og;a.xb=this.xb;a.Ni=this.Ni;a.lg=this.lg;a.Vg=this.Vg;a.$g=this.$g;a.Tg=this.Tg;a.vf=this.vf;a.gb=this.gb?this.gb.e():null;a.fd=this.fd;a.md=this.md;a.Xh=this.Xh;a.Mh=this.Mh;a.Ac=this.Ac?this.Ac.h(c,d):null;a.pd=this.pd?this.pd.h(c,d):null;a.sd=this.sd?this.sd.h(c,d):null;a.qd=this.qd?this.qd.h(c,d):null;return a};
Ye.prototype.Wa=function(a,b){if(a==null||this.Ge==null)return false;var c=b-this.hl;if(c>150)c=150;this.hl=b;var d=0,e=false;if(this.nk!==a){this.nk=a;P(a);this.mk=N(a)}var f=N(a);if(this.Cc!=3)if(this.Cc==1){d=lf(this,a);if(this.af.substract(f).getLength()<d){this.Cc=0;this.Pc(a,0);e=true}else{e=false;if(this.Vc>2){d=this.Vc*(this.$c/1E3);if(this.Nh.substract(f).getLength()*1.2<d){this.Cc=0;this.Pc(a,0);e=true}}if(!e){this.Vc+=c;e=this.af.substract(f);oa(e,this.$c/1E3*c);a.f.ra(e)}e=mf(this,a,b-
this.qg,this.af.substract(f),this.$g)}}else if(this.Cc==2){this.Vc+=c;if(!this.jj&&this.Vc>this.ce/2){this.nj=true;this.Ac&&this.Ac.execute(a);this.nj=false;e=this.jj=true}if(this.Vc>this.ce)this.Cc=0;else e=mf(this,a,b-this.qg,this.af.substract(f),Math.min(this.$g,this.ce))}else if(this.Cc==0)if(this.zc==1||this.zc==2||this.zc==3){if(this.eg<=0||!this.nk||this.lg.length==0||!this.Ge)c=null;else if(!this.Nj||b>this.Nj){this.Mj=this.eg;this.Lj=null;nf(this,this.Ge.Aa,f,this.lg);this.Nj=b+500+Math.random()*
1E3;c=this.Lj}else c=null;if(c!=null){e=1E3;if(this.Ac)if(d=mc(this.Ac,"Shoot"))e=d.Nc;d=e;!this.Uk&&this.pd&&this.pd.execute(a);e=this.Uk=true;if(N(c).pb(f)<d)if(!c||!a?false:of(this,Ea(Z(c)),Ea(Z(a)))){this.oj.Q=Ea(Z(a));this.oj.K=Ea(Z(c));d=c;c=N(c);this.Cc=2;this.af=c;this.qg=b;this.Om=d;this.Nh=f;this.Vc=0;this.ce=500;this.jj=false;a=this.Pc(a,2);if(a!=0)this.ce=a}else pf(this,a,N(c),f,b);else pf(this,a,N(c),f,b)}else if(this.zc==2||this.zc==3)if(!this.Ej||b>this.Ej+this.vf){d=lf(this,a);c=null;
if(this.zc==3){var g=null;if(this.Tg!=-1&&this.Ge!=null)g=L(this.Ge,this.Tg);if(g!=null&&g.m()=="path"){if(this.si>=g.nb.length)this.si=0;c=ge(g,this.si)}++this.si}else{c=this.Vg;this.Ej=b;c=new v((Math.random()-0.5)*c,(Math.random()-0.5)*c,(Math.random()-0.5)*c);c.ra(this.mk);if(!this.og)c.c=this.mk.c}if(!(c.substract(f).getLength()<d)){pf(this,a,c,f,b);e=true}}}return e};
function mf(a,b,c,d,e){if(!b)return false;if(b.m()=="camera")return false;if(!a.og)d.c=0;var f=new F;bb(f,ya(d));d=new F;bb(d,a.gb);f=H(f,d);a=cb(f);f=b.P.e();c=Math.min(c,e)/e;c=q.Rb(c,0,1);y(a,q.Wc);y(f,q.Wc);e=new I;kb(e,a.b,a.c,a.d);d=new I;kb(d,f.b,f.c,f.d);hb(d,d,e,c);jb(d,a);y(a,q.Hd);if(b.P.O(a))return false;b.P=a;return true}function pf(a,b,c,d,e){a.Cc=1;a.af=c;a.qg=e;a.Nh=d;a.Vc=0;a.ce=0;a.Pc(b,1)}
function of(a,b,c){if(!a.ha||!a.Ge)return true;if(a.ha.Tf(b,c,true,null,true)!=null)return false;return true}function nf(a,b,c,d){if(b&&b.S){var e=false,f=c.pb(N(b));if(f<a.Mj){var g=M(b,"gameai");if(g&&d!=""&&g!==a&&g.xb>0)e=g.Ni.indexOf(d)!=-1}if(e){a.Mj=f;a.Lj=b}for(e=0;e<b.aa.length;++e)nf(a,b.aa[e],c,d)}}function lf(a,b){if(b!=null)return 10;a=Fa(Z(b));a.c=0;return a.getLength()}Ye.prototype.Dk=function(a){switch(a){case 0:return this.fd;case 1:return this.md;case 2:return this.Mh;case 3:return this.Xh}return""};
Ye.prototype.Pc=function(a,b){if(!a||a.m()!="animatedmesh")return 0;var c=a.lb;if(!c)return 0;if(c=Fc(c,this.Dk(b))){te(a,c.Tc,c.K);c.Jb!=0&&ue(a,c.Jb);a.Ab=b==1||b==0;return(c.K-c.Tc)*c.Jb*1E3}else{te(a,1,1);a.Ab=false}return 0};function Tb(a,b,c){if(c)if(a.xb!=0){a.xb-=b;if(a.xb<0)a.xb=0;if(a.xb==0){a.qd!=null&&a.qd.execute(c);b=N(c);a.Cc=3;a.qg=0;a.Nh=b;a.Vc=0;a.ce=500;a.Pc(c,3)}else a.sd!=null&&a.sd.execute(c)}}
Ye.prototype.Pe=function(a){var b=null;if(this.Ac)if(b=mc(this.Ac,a))return b;if(this.pd)if(b=mc(this.pd,a))return b;if(this.sd)if(b=mc(this.sd,a))return b;if(this.qd)if(b=mc(this.qd,a))return b;return null};q.Jm=[];function Yb(){this.tc=this.q="";this.Kb=this.Lb=this.Fb=0}
function tb(a,b,c){if(a==null)return null;for(var d=a.toLowerCase(),e=q.Jm,f=0;f<e.length;++f){var g=e[f];if(g!=null&&g.getName().toLowerCase()==d)return g}f=qf(a,c);if(f==null)c=null;else{c=new Yb;c.Ok(a);ac(c,0);d=f.Xf;if(f.vc=="health"&&d!=null){d=M(d,"gameai");d!=null&&ac(c,d.xb)}else if(f.vc=="movementspeed"&&d!=null){f=M(d,"gameai");g=M(d,"keyboardcontrolled");if(d=M(d,"camerafps"))$b(c,d.Cb);else if(g)$b(c,g.Cb);else f&&$b(c,f.$c)}else if(f.vc=="damage"&&d!=null)(d=Qd(d,"Shoot"))&&ac(c,d.wd);
else if(f.vc=="colsmalldistance"&&d!=null){d=M(d,"collisionresponse");d!=null&&$b(c,d.ob)}else f.vc=="soundvolume"&&$b(c,q.Re.Bd*100);c=c}if(c)return c;if(b==true){b=new Yb;b.Ok(a);e.push(b);return b}return null}
function bc(a,b){var c=qf(a.q,b);if(c!=null){b=c.Xf;if(c.vc=="health"&&b!=null){c=M(b,"gameai");if(c!=null){var d=c.xb;a=rf(a);d=d-a;if(d>0)Tb(c,d,b);else c.xb=a}}else if(c.vc=="movementspeed"&&b!=null){c=M(b,"gameai");d=M(b,"keyboardcontrolled");if(b=M(b,"camerafps"))b.Cb=Q(a);else if(d)d.Cb=Q(a);else if(c)c.$c=Q(a)}else if(c.vc=="damage"&&b!=null){if(b=Qd(b,"Shoot"))b.wd=rf(a)}else if(c.vc=="damage"&&b!=null){if(b=Qd(b,"Shoot"))b.wd=rf(a)}else if(c.vc=="colsmalldistance"&&b!=null){b=M(b,"collisionresponse");
if(b!=null){b.ob=rf(a);b.Pl=true}}else c.vc=="soundvolume"&&jd(q.Re,Q(a)/100)}}function qf(a,b){if(a.length==0||b==null)return null;if(a[0]!="#")return null;var c=a.indexOf(".");if(c==-1)return null;var d=a.substr(c+1,a.length-c);if(d.length==0)return null;c=a.substr(1,c-1);a=null;if(c!="system"){a=Fe(b,c);if(a==null)return null}b={};b.Xf=a;b.vc=d;return b}Yb.prototype.getName=j("q");Yb.prototype.Ok=ca("q");
function ub(a){switch(a.Fb){case 1:return String(a.Lb);case 2:return a.Kb%1==0?String(a.Kb):a.Kb.toFixed(6)}return a.tc}function rf(a){switch(a.Fb){case 0:return Math.floor(a.tc);case 1:return a.Lb;case 2:return a.Kb}return 0}function Q(a){switch(a.Fb){case 0:return Number(a.tc);case 1:return a.Lb;case 2:return a.Kb}return 0}function Zb(a,b){a.Fb=0;a.tc=b}function ac(a,b){a.Fb=1;a.Lb=b}function $b(a,b){a.Fb=2;a.Kb=b}
function $e(a,b){this.Tb=0;this.Ma=a;this.ie=this.Db=this.Ei=this.Cb=0;this.qh=false;this.df=this.Kh=0;this.zd=15;this.gb=new v;this.Di=this.gi=this.md=this.fd="";this.mf=t();this.zh=this.Od=this.Vd=this.Ud=this.Qd=this.gn=this.jk=this.Si=false;this.Ub=0;this.hj=false;this.Ui=true;this.Yh=false;this.Ia=b;this!=null&&b.xf.push(this);this!=null&&b.Ai.push(this)}$e.prototype=new $;n=$e.prototype;n.m=l("keyboardcontrolled");
n.h=function(){var a=new $e(this.Ma,this.Ia);a.Cb=this.Cb;a.Ei=this.Ei;a.Db=this.Db;a.ie=this.ie;a.zd=this.zd;a.gb=this.gb?this.gb.e():null;a.fd=this.fd;a.md=this.md;a.gi=this.gi;a.Di=this.Di;a.qh=this.qh;a.Kh=this.Kh;a.df=this.df;a.Yh=this.Yh;return a};
n.Ch=function(a,b){if(b==37||b==65){if(this.Qd=a)this.Ud=false;return true}if(b==39||b==68){if(this.Ud=a)this.Qd=false;return true}if(b==38||b==87){if(this.Vd=a)this.Od=false;return true}if(b==40||b==83){if(this.Od=a)this.Vd=false;return true}if(b==32){this.zh=a;return true}return false};n.Rd=function(a){this.jk=a.shiftKey==1;return this.Ch(true,a.keyCode)};n.Sd=function(a){this.jk=a.shiftKey==1;return this.Ch(false,a.keyCode)};
n.Wa=function(a,b){var c=b-this.Tb;if(c>250)c=250;this.Tb=b;var d=false;this.mf=b;if(this.Yh){b=a.$.fa;if(b!=null){b=M(b,"3rdpersoncamera");if(b!=null){if(b.Mb!==a)return false}else return false}}b=a.P;if(this.Qd){b.c-=c*this.Db*0.0010;d=true}if(this.Ud){b.c+=c*this.Db*0.0010;d=true}var e=new F;bb(e,b);b=new v(0,0,1);var f=new F;bb(f,this.gb);e=H(e,f);Sa(e,b);e=this.jk;var g=(e?this.Ei:this.Cb)*c,i=0;f=this.Od;var k=this.Vd;if(this.qh&&c)if(k||f){if(this.hj!=k)if(this.df==0)this.Ub*=-1;else this.Ub=
0;this.hj=!f;i=g/c;this.Ub+=this.Kh*i*(c/1E3);if(this.Ub>i)this.Ub=i;g=this.Ub*c}else if(this.df==0)this.Ub=0;else{i=g/Number(c);this.Ub-=this.df*i*(c/1E3);if(this.Ub<0)this.Ub=0;g=this.Ub*c}oa(b,g);if(k||f||this.qh&&this.Ub!=0){d=b.e();if(f||!(k||f)&&!this.hj)y(d,-1);a.f.ra(d);this.Si=d=true}if(k||f){this.Pc(a,e?3:1,f);d=this.Si=true}else if(this.Si){c=false;if(b=M(a,"collisionresponse"))c=b.yd;c||this.Pc(a,0,false);this.Si=false}if(this.zh)if((c=M(a,"collisionresponse"))&&!c.yd){ef(c,this.ie);this.Pc(a,
2,false);d=true}return d};n.Dk=function(a){switch(a){case 0:return this.fd;case 1:return this.md;case 2:return this.gi;case 3:return this.Di}return""};n.Pc=function(a,b,c){if(!a||a.m()!="animatedmesh")return 0;var d=a.lb;if(!d)return 0;if(d=Fc(d,this.Dk(b))){var e=1*d.Jb;if(c)e*=-1;if(!(a.ib==d.K&&a.Na==d.Tc&&q.O(a.jb,e))){te(a,d.Tc,d.K);e&&ue(a,e);a.Ab=b==0||b==1||b==3}return(d.K-d.Tc)*d.Jb*1E3}else{te(a,1,1);a.Ab=false}return 0};
function Ze(a){this.Tb=0;this.Ma=a;this.ah=-1;this.zd=15;this.gb=new v;this.Oi=this.ai=0;this.Vb=false;this.mf=this.ha=0;this.fe=new v;this.ug=new v;this.Mb=null;this.Nl=false;this.Ui=true}Ze.prototype=new $;Ze.prototype.m=l("3rdpersoncamera");Ze.prototype.h=function(){var a=new Ze(this.Ma);a.ah=this.ah;a.zd=this.zd;a.gb=this.gb.e();a.ai=this.ai;a.Oi=this.Oi;a.Vb=this.Vb;a.ha=this.ha;return a};
Ze.prototype.Wa=function(a,b){var c=b-this.Tb;if(c>250)c=250;this.Tb=b;var d=false;if(a==null)return false;d=a.$;if(!this.Nl)if(this.ah!=-1)if(d!=null){if((d=L(d,this.ah))&&d!==this.Mb){this.Mb=d;this.Ui=true}this.Nl=true}if(!this.Mb)return false;d=false;var e=a.ea.e();a.ea=N(this.Mb);a.ea.ra(this.ug);a.ea.c+=this.Oi;a.ea.O(e)||(d=true);if(this.Ui){P(this.Mb);P(a);this.ug=Fa(this.Mb.fb());this.ug.c/=2;this.ug.b=0;this.ug.d=0;this.Tb=b;this.Ui=false}if(a.$.fa!==a)return false;if(qa(this.fe)){this.fe=
N(this.Mb).substract(N(a));b=new F;bb(b,this.Mb.P);e=this.fe;var f=e.e();e.b=f.b*b.n+f.c*b.r+f.d*b.s;e.c=f.b*b.t+f.c*b.o+f.d*b.u;e.d=f.b*b.v+f.c*b.w+f.d*b.p}b=this.Mb.P;e=new F;bb(e,b);b=new F;bb(b,this.gb);e=H(e,b);b=a.f.e();switch(this.ai){case 0:break;case 2:b=N(this.Mb).substract(this.fe);break;case 1:b=this.fe.e();Sa(e,b);b=N(this.Mb).substract(b);e=N(a).pb(b);f=this.fe.getLength();f=e>f*2.2;if(q.O(this.zd,0)||f)b=b;else{c=Math.sqrt(e)*(c/1E3)*this.zd;if(c>e)c=e;b=b.substract(a.f);oa(b,c);b.ra(a.f);
b=b}break}if(this.Vb&&this.ha!=null&&!a.f.O(b)){this.ha.Dh(this.Mb);c=new Ba;c.Q=a.ea.e();c.K=b.e();var g=Ca(c);e=g.getLength();f=this.fe.getLength()/10;oa(g,f);c.K.ra(g);g=new B;g=this.ha.Tf(c.Q,c.K,true,g,true);if(g!=null){b=g.substract(c.Q);g=b.getLength();if(g<f)g=f;g-=f;if(g>e)g=e;oa(b,g);b=c.Q.add(b)}this.ha.Dh(null)}if(!a.f.O(b)){d=true;a.f=b}return d};function af(a){this.Gm=this.Cl=false;this.Ma=a;this.l=null}af.prototype=new $;af.prototype.m=l("onfirstframe");
af.prototype.Wa=function(a){if(this.Cl)return false;this.Cl=true;if(this.l){this.l.execute(a);return true}return false};function re(a,b,c){this.Ma=b;this.ma=c;this.Ga=a;this.tf=false;Ie(b,this);this.Aj=[];for(a=0;a<255;++a)this.Aj.push(false);this.$e=[];this.$e.push(new Da(-1,0));this.$e.push(new Da(0,-1));this.$e.push(new Da(1,0));this.$e.push(new Da(0,1))}re.prototype=new $;re.prototype.m=l("mobileinput");
re.prototype.Wa=function(){var a=false;if(this.ma.ei==1)sf(this,this.tf&&this.ma.ri,this.ma.kc);else if(Math.sqrt(this.ma.Hb*this.ma.Hb+this.ma.Ib*this.ma.Ib)<0.3||!this.tf){if(!this.tf){a=this.ma.Hb!=0&&this.ma.Ib!=0;this.ma.Hb=0;this.ma.Ib=0}sf(this,false,37);sf(this,false,38);sf(this,false,39);sf(this,false,40)}else for(var b=0;b<4;++b){var c=this.$e[b].b-this.ma.Hb,d=this.$e[b].c-this.ma.Ib;c=Math.sqrt(c*c+d*d)<1;sf(this,c,37+b)}return a};
function sf(a,b,c){if(a.Aj[c]!=b){a.Aj[c]=b;var d={};d.keyCode=c;b?ud(a.Ga,d):vd(a.Ga,d)}}re.prototype.Oc=function(){this.tf=false};re.prototype.nd=function(){this.tf=true};re.prototype.Td=function(a){if(this.tf&&this.ma.ri&&this.ma.ek!=0&&this.ma.dk!=0){var b=wd(this.Ga,a)-this.ma.zl;a=xd(this.Ga,a)-this.ma.Al;this.ma.Hb=b/this.ma.ek;this.ma.Ib=a/this.ma.dk;this.ma.Hb=q.Rb(this.ma.Hb,0,1);this.ma.Ib=q.Rb(this.ma.Ib,0,1);this.ma.Hb=this.ma.Hb*2-1;this.ma.Ib=this.ma.Ib*2-1}};function vector3d(a,b,c){if(a!==null){this.x=a;this.y=b;this.z=c}else this.z=this.y=this.x=0}n=vector3d.prototype;n.add=function(a){return new vector3d(this.x+a.x,this.y+a.y,this.z+a.z)};n.substract=function(a){return new vector3d(this.x-a.x,this.y-a.y,this.z-a.z)};n.getLength=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)};n.normalize=function(){var a=this.getLength();if(a!=0){a=1/a;this.x*=a;this.y*=a;this.z*=a}};
n.toString=function(){return"("+this.x+", "+this.y+", "+this.z+")"};n.x=0;n.y=0;n.z=0;function tf(){this.lm=-1;this.Jf=[];this.Ag=false;this.Ia=this.R=this.Xa=this.Uh=this.Wb=null;this.Oe=[]}q.Ya=null;function X(){if(q.Ya==null)q.Ya=new tf;return q.Ya}function rd(a,b){a.Ia=b}function Dd(a){return a.Oe.length!=0}function cf(a,b){try{eval(b)}catch(c){ia(q.oa,c)}}function uf(a){++a.lm;return a.lm}
function Fd(a,b){a.Ag=true;if(a.Oe.length!=null){a.R=b;for(b=0;b<a.Oe.length;++b)a.Oe[b]();a.R=null}a.Ag=false}
function vf(a,b,c){switch(c){case "Position Mode":return b.cd;case "Pos X (percent)":return b.qe*100;case "Pos Y (percent)":return b.re*100;case "Width (percent)":return b.Ce;case "Height (percent)":return b.Be;case "Pos X (pixels)":return b.oe;case "Pos Y (pixels)":return b.pe;case "Width (pixels)":return b.Ee*100;case "Height (pixels)":return b.De*100;case "Alpha":return q.Te(b.jc);case "Image":return b.ab?b.ab.q:null;case "Background Color":return b.jc;case "Draw Text":return b.ee;case "TextColor":return b.Fe;
case "Text":return b.Sa}return null}q.Zd=function(a){this.yb=null;this.Pb=[];this.wk=this.Ul=false;this.bd=-1;this.Wl=false;this.Ma=a};q.Zd.prototype=new $;function wf(a,b,c){a.Ul=b;a.wk=c;if(!a.Wl&&a.Ma){b=X().Ia;if(c){a!=null&&b.xf.push(a);a!=null&&b.Ai.push(a)}Ie(a.Ma,a)}}q.Zd.prototype.m=l("extensionscript");q.Zd.prototype.h=function(a,b,c,d){a=new q.Zd(b);a.yb=this.yb;for(b=0;b<this.Pb.length;++b){var e=this.Pb[b];e!=null?a.Pb.push(e.h(c,d)):a.Pb.push(null)}return a};
q.Zd.prototype.Wa=function(a,b){if(a==null)return false;if(this.yb==null||this.yb.length==0)return false;var c=X();c.Uh=this;this.bd==-1&&xf(this,a,c);if(this.bd!=-1)try{_ccbScriptCache[this.bd].onAnimate(a,b)}catch(d){ia(q.oa,this.yb+": "+d)}c.Uh=null;return true};
function xf(a,b,c){var d="";a.bd=uf(c);d+="if (typeof _ccbScriptCache == 'undefined') _ccbScriptCache = new Array(); ";d+="_ccbScriptCache[";d+=a.bd;d+="] = new ";d+=a.yb;d+="();";cf(c,d);var e="_ccbScriptCache[";e+=a.bd;e+="].";d="try {";d+=yf(e,a.Pb);d+="} catch(e) { }";cf(c,d);d=false;if(b.m()=="camera")d=true;a.Wl=d;d="try { ccbRegisterBehaviorEventReceiver(typeof ";d+=e;d+="onMouseEvent != 'undefined', typeof ";d+=e;d+="onKeyEvent != 'undefined'); } catch(e) { }";cf(c,d)}
function zf(a,b,c){a.Ul&&_ccbScriptCache[a.bd].onMouseEvent(b,c)}n=q.Zd.prototype;n.Oc=function(){zf(this,2,0)};n.Xe=function(a){zf(this,1,a)};n.nd=function(){zf(this,3,0)};n.Td=function(){zf(this,0,0)};n.Rd=function(a){this.wk&&_ccbScriptCache[this.bd].onKeyEvent(a.keyCode,true)};n.Sd=function(a){this.wk&&_ccbScriptCache[this.bd].onKeyEvent(a.keyCode,false)};function bf(){this.i=-1;this.Ke=this.tc=this.q=null;this.Lb=this.Kb=0;this.ih=this.dg=null}
bf.prototype.h=function(a,b){var c=new bf;c.i=this.i;c.q=this.q;c.tc=this.tc;c.Ke=this.Ke?this.Ke.e():null;c.Kb=this.Kb;c.Lb=this.Lb;if(this.dg)c.dg=this.dg.h(a,b);c.ih=this.ih;return c};
function yf(a,b){for(var c="",d=0;d<b.length;++d){var e=b[d];if(e!=null){c+=a;c+=e.q;c+=" = ";switch(e.i){case 1:c+=e.Kb;c+="; ";break;case 2:c+='"';var f=e.tc.split('"').join('\\"');c+=f;c+='"; ';break;case 3:c+=e.Lb?"true":"false";c+="; ";break;case 6:c+="new vector3d(";c+=e.Ke.b;c+=", ";c+=e.Ke.c;c+=", ";c+=e.Ke.d;c+="); ";break;case 7:c+='"';c+=e.ih?e.ih.q:"";c+='"; ';break;case 8:c+="ccbGetSceneNodeFromId(";c+=e.Lb;c+="); ";break;case 9:a:{f=X();e=e.dg;for(var g=0;g<f.Jf.length;++g)if(f.Jf[g]===
e){f=g;break a}f.Jf.push(e);f=f.Jf.length-1}c+=f;c+="; ";break;case 0:case 5:case 4:default:c+=e.Lb;c+="; ";break}}}return c}function df(){this.i="ExtensionScript";this.Pb=[];this.yb=null}df.prototype.h=function(a,b){var c=new df;c.yb=this.yb;for(var d=0;d<this.Pb.length;++d){var e=this.Pb[d];e!=null?c.Pb.push(e.h(a,b)):c.Pb.push(null)}return c};
df.prototype.execute=function(a){if(!(this.yb==null||this.yb.length==0||a==null)){var b=X(),c="";c="_ccbScriptTmp = new ";c+=this.yb;c+="();";cf(b,c);c="try { ";c+=yf("_ccbScriptTmp.",this.Pb);c+="} catch(e) { }";cf(b,c);c="try { _ccbScriptTmp.execute(ccbGetSceneNodeFromId(";c+=a.Qa;c+=")); } catch(e) { }";cf(b,c)}};function Af(a){var b=q.Ya.Wb;if(b==null)return null;return L(b,a)}function Bf(a){if(a==null)return null;var b=a.Qa,c=rc(q.Ya.Wb);a=a.h(a.ac,b,c);if(a!=null)a.Qa=c;return a}
function Cf(){var a=q.Ya.Wb;if(a==null)return null;return a.fa}function Df(a){var b=q.Ya.Wb;b!=null&&a!=null&&a.m()=="camera"&&Ce(b,a)}function Ef(a,b){if(a==null)return-1;if(b<0||b>=a.aa.length)return null;return a.aa[b]}function Ff(){var a=q.Ya.Wb;if(a==null)return null;return a.Aa}function Gf(a){if(a==null)return 0;return a.aa.length}function Hf(a){var b=q.Ya.Wb;if(b==null)return null;return Fe(b,a)}function If(a){var b=q.Ya.Wb;b!=null&&pc(b,a,0)}
function Jf(a){if(a==null)return 0;return a.xc()}
function Kf(a,b,c){if(a==null)return null;if(b<0||b>=a.xc())return null;a=a.gc(b);if(a==null)return null;if(c=="Type")switch(a.i){case 0:return"solid";case 2:return"lightmap";case 3:return"lightmap_add";case 4:return"lightmap_m2";case 5:return"lightmap_m4";case 11:return"reflection_2layer";case 12:return"trans_add";case 13:return"trans_alphach";case 16:return"trans_reflection_2layer"}else if(c=="Texture1")return a.$a==null?"":a.$a.q;else if(c=="Texture2")return a.dc==null?"":a.dc.q;else if(c=="Lighting")return a.Hc;
else if(c=="Backfaceculling")return a.Im;return null}function Lf(){}
function Mf(a,b,c,d){if(a!=null)if(!(b<0||b>=a.xc())){a=a.gc(b);if(a!=null){b=typeof d=="string"?d:null;var e=null;e=X();if(c=="Type")switch(b){case "solid":a.i=0;break;case "lightmap":case "lightmap_add":case "lightmap_m2":case "lightmap_m4":a.i=2;break;case "reflection_2layer":a.i=11;break;case "trans_add":a.i=12;break;case "trans_alphach":a.i=13;break;case "trans_reflection_2layer":a.i=16;break}else if(c=="Texture1"){if(b!=null&&e.Xa!=null){e=Ic(e.Xa,b);if(e!=null)a.$a=e}}else if(c=="Texture2"){if(b!=
null&&e.Xa!=null){e=Ic(e.Xa,b);if(e!=null)a.dc=e}}else if(c=="Lighting")a.Hc=d;else if(c=="Backfaceculling")a.Im=d}}}
function Nf(a,b,c,d,e){if(a!=null){var f=0,g=0,i=0;if(d==null&&typeof c.x!="undefined"){f=c.x;g=c.y;i=c.z}if(d!=null&&e!=null){f=c;g=d;i=e}var k=e=d=null,m=null,o=a.m();if(o=="camera")d=a;else if(o=="animatedmesh")e=a;else if(o=="light")k=a;else if(o=="2doverlay")m=a;if(b=="Visible")a.S=c;else if(b=="Position"){a.f.b=f;a.f.c=g;a.f.d=i}else if(b=="Rotation"){a.P.b=f;a.P.c=g;a.P.d=i}else if(b=="Scale"){a.na.b=f;a.na.c=g;a.na.d=i}else if(m!=null){X();a=m;switch(b){case "Position Mode":a.cd=c=="absolute (pixels)";
break;case "Pos X (percent)":a.qe=c/100;break;case "Pos Y (percent)":a.re=c/100;break;case "Width (percent)":a.Ce=c;break;case "Height (percent)":a.Be=c;break;case "Pos X (pixels)":a.oe=c;break;case "Pos Y (pixels)":a.pe=c;break;case "Width (pixels)":a.Ee=c/100;break;case "Height (pixels)":a.De=c/100;break;case "Alpha":a.jc=(c&255)<<24|a.jc&16777215;break;case "Image":b=Ic(TheTextureManager,c);a.ab=b;break;case "Background Color":a.jc=c;break;case "Draw Text":a.ee=c?true:false;break;case "TextColor":a.Fe=
c;break;case "Text":a.Sa=c;break}}else if(b=="Target")d!=null&&Nb(d,new v(f,g,i));else if(b=="UpVector"){if(d!=null)d.Qb=new v(f,g,i)}else if(b=="FieldOfView_Degrees")d!=null&&Ud(d,q.$l(c));else if(b=="AspectRatio")d!=null&&Jd(d,c);else if(b=="Animation")e!=null&&Hb(e,c,e.Ab);else if(b=="Looping")e!=null&&ve(e,c);else if(b=="FramesPerSecond")e!=null&&ue(e,c);else if(b=="Radius")if(k!=null)k.Gc.ta=c}}
function Of(a,b){if(a==null)return null;var c=null,d=null,e=null,f=null,g=a.m();if(g=="camera")c=a;else if(g=="animatedmesh")d=a;else if(g=="light")e=a;else if(g=="2doverlay")f=a;if(b=="Visible")return a.S;else if(b=="Position")return new vector3d(a.f.b,a.f.c,a.f.d);else if(b=="Rotation")return new vector3d(a.P.b,a.P.c,a.P.d);else if(b=="Scale")return new vector3d(a.na.b,a.na.c,a.na.d);else if(f!=null)return vf(X(),f,b);else if(b=="Target")return new vector3d(c.ea.b,c.ea.c,c.ea.d);else if(b=="UpVector"){if(c!=
null)return new vector3d(c.Qb.b,c.Qb.c,c.Qb.d)}else if(b=="FieldOfView_Degrees"){if(c!=null)return q.Bh(c.Fc)}else if(b=="AspectRatio"){if(c!=null)return c.ic}else if(b=="Animation")return"";else if(b=="Looping"){if(d!=null)return d.Ab}else if(b=="FramesPerSecond"){if(d!=null)return d.jb}else if(b=="Radius")if(e!=null)return e.Gc.ta;return null}function Pf(a,b,c,d){if(a!=null){a.f.b=b;a.f.c=c;a.f.d=d;for(b=0;b<a.ga.length;++b){c=a.ga[b];c!=null&&c.m()=="collisionresponse"&&c.reset()}}}
function Qf(a){X().Oe.push(a)}function Rf(a){var b=X();a=b.Oe.indexOf(a);a!=-1&&b.Oe.splice(a,1)}function Sf(a,b,c,d,e){var f=X();!f.Ag||f.R==null||Zc(f.R,b,c,d-b,e-c,a,true)}function Tf(a,b,c,d,e){a=X();!a.Ag||a.R==null||Zc(a.R,b,c,d-b,e-c,4278190080,true)}function Uf(a,b,c,d,e){a=X();!a.Ag||a.R==null||Zc(a.R,b,c,d-b,e-c,4278190080,true)}function Vf(a,b){var c=X().Ia;a=Od(c,a,b);if(a!=null)return new vector3d(a.b,a.c,a.d);return null}
function Wf(a,b,c){var d=X().Ia;a=Pd(d,new v(a,b,c));return new vector3d(a.b,a.c,0)}function Xf(a,b,c,d,e,f){var g=new Ba;g.Q=new v(a,b,c);g.K=new v(d,e,f);a=q.Ya.Wb;a=Ub(Vb.prototype,a,g.Q,g.K,a.lj,true);if(a<999999999){b=Ca(g);oa(b,a);g=g.Q.add(b);return new vector3d(g.b,g.c,g.d)}return null}function Yf(a,b,c,d,e,f,g){if(a==null)return false;if(a.Y==null)return false;a=new v(b,c,d);e=new v(e,f,g);return Ha(Z(s),a,e)}function Zf(){}function $f(){return false}
function ag(){var a=X().Ia;if(a)return a.lc;return 0}function bg(){var a=X().Ia;if(a)return a.mc;return 0}function cg(){var a=X().Ia;if(a!=null&&a.R)return a.R.hc();return 0}function dg(){var a=X().Ia;if(a!=null&&a.R)return a.R.fc();return 0}function eg(){}function fg(){}function gg(a){var b=X().Ia;if(b!=null)return Jb(b,a,true);return false}function hg(a){var b=q.Re;a=ed(b,a);a!=null&&fc(b,a,false,1)}
function ig(a){a=tb(a,true,q.Ya.Wb);if(a==null)return null;if(a.Fb==0)return ub(a);if(a.Fb==1)return rf(a);if(a.Fb==2)return Q(a);return null}function jg(a,b){var c=q.Ya.Wb;a=tb(a,true,c);if(a!=null){typeof b=="number"?$b(a,b):Zb(a,s);bc(a,c)}}function kg(){return null}function lg(){}function mg(){return"webgl"}function ng(a,b){var c=q.Ya.Wb;if(c!=null){if(b==null)b=c.Aa;if(a>=0&&a<q.Ya.Jf.length){a=q.Ya.Jf[a];a!=null&&a.execute(b)}}}function og(a){ia(q.oa,a)}function pg(){}
function qg(a,b){q.Ya.Uh!=null&&wf(q.Ya.Uh,a,b)};function md(){this.rg=-1;this.Hm="";this.bc=[];this.tn=2;this.Ql=false;this.qo=320;this.po=200;this.Tl=function(a){this.bc.push(a)};this.Uf=function(){if(this.rg<0||this.rg>=this.bc.length)return null;return this.bc[this.rg]};this.um=function(a){for(var b=0;b<this.bc.length;++b)if(this.bc[b]===a){this.rg=b;return}}};q.xn=new Array(-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1);
q.yn=function(a){var b,c,d,e,f,g=q.xn;e=a.length;d=0;for(f="";d<e;){do b=g[a.charCodeAt(d++)&255];while(d<e&&b==-1);if(b==-1)break;do c=g[a.charCodeAt(d++)&255];while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode(b<<2|(c&48)>>4);do{b=a.charCodeAt(d++)&255;if(b==61)return f;b=g[b]}while(d<e&&b==-1);if(b==-1)break;f+=String.fromCharCode((c&15)<<4|(b&60)>>2);do{c=a.charCodeAt(d++)&255;if(c==61)return f;c=g[c]}while(d<e&&c==-1);if(c==-1)break;f+=String.fromCharCode((b&3)<<6|c)}return f};function rg(){}n=rg.prototype;n.Se=aa();n.Vf=function(a,b,c){this.Se(b,c)};
n.Tf=function(a,b,c,d,e){if(!a||!b)return null;if(this.db!=null&&e&&this.db.S==false)return null;var f=new z;f.I=a.e();f.J=a.e();A(f,b);e=[];this.Vf(f,null,e);f=b.substract(a);f.normalize();for(var g,i=9.999999999E8,k=sa(b.substract(a)),m=Math.min(a.b,b.b),o=Math.max(a.b,b.b),p=Math.min(a.c,b.c),h=Math.max(a.c,b.c),u=Math.min(a.d,b.d),r=Math.max(a.d,b.d),J=null,D=0;D<e.length;++D){var w=e[D];if(!(c&&!La(Ma(w),f)))if(!(m>w.M.b&&m>w.V.b&&m>w.X.b))if(!(o<w.M.b&&o<w.V.b&&o<w.X.b))if(!(p>w.M.c&&p>w.V.c&&
p>w.X.c))if(!(h<w.M.c&&h<w.V.c&&h<w.X.c))if(!(u>w.M.d&&u>w.V.d&&u>w.X.d))if(!(r<w.M.d&&r<w.V.d&&r<w.X.d))if(!(ra(a,w.M)>=i&&ra(a,w.V)>=i&&ra(a,w.X)>=i))if(g=w.Ek(a,f)){var C=ra(g,a),E=ra(g,b);if(C<k&&E<k&&C<i){i=C;d&&w.xa(d);J=g}}}if(J)return J.e();return null};n.Vi=l(null);n.Dh=aa();function Le(a,b){if(a){this.db=b;this.ia=[];for(b=0;b<a.Ja.length;++b){var c=a.Ja[b];if(c)for(var d=c.Z.length,e=0;e<d;e+=3)this.ia.push(new B(c.j[c.Z[e]].f,c.j[c.Z[e+1]].f,c.j[c.Z[e+2]].f))}}}Le.prototype=new rg;
Le.prototype.Se=function(a,b){if(this.db.Y){a=a?H(a,this.db.Y):this.db.Y;var c;if(Pa(a))for(c=0;c<this.ia.length;++c)b.push(this.ia[c]);else if(Qa(a))for(c=0;c<this.ia.length;++c)b.push(new B(Wa(a,this.ia[c].M),Wa(a,this.ia[c].V),Wa(a,this.ia[c].X)));else for(c=0;c<this.ia.length;++c)b.push(new B(Ua(a,this.ia[c].M),Ua(a,this.ia[c].V),Ua(a,this.ia[c].X)))}};Le.prototype.Vf=function(a,b,c){this.Se(b,c)};Le.prototype.Vi=j("db");function Je(){this.Jd=[];this.Oj=null}Je.prototype=new rg;n=Je.prototype;
n.Se=function(a,b){for(var c=this.Oj,d=0;d<this.Jd.length;++d){var e=this.Jd[d];c!=null&&c==e.Vi()||e.Se(a,b)}};n.Vf=function(a,b,c){for(var d=this.Oj,e=0;e<this.Jd.length;++e){var f=this.Jd[e];d!=null&&d==f.Vi()||f.Vf(a,b,c)}};n.clear=function(){this.Jd=[]};n.Tf=function(a,b,c,d,e){var f=9.999999999E8,g=null,i=null;if(d)i=new B;for(var k=0;k<this.Jd.length;++k){var m=this.Jd[k].Tf(a,b,c,i,e);if(m!=null){var o=ra(m,a);if(o<f){g=m.e();f=o;d&&i.xa(d)}}}return g};n.Dh=ca("Oj");
q.Dl=function(){this.ia=[];this.g=new z;this.be=[]};function Ke(a,b,c){this.Lm=this.Km=0;this.Wm=c==null?64:c;if(a){this.db=b;this.Bi=new q.Dl;this.ia=[];for(b=0;b<a.Ja.length;++b)if(c=a.Ja[b])for(var d=c.Z.length,e=0;e<d;e+=3){var f=new B(c.j[c.Z[e]].f,c.j[c.Z[e+1]].f,c.j[c.Z[e+2]].f);this.Bi.ia.push(f);this.ia.push(f)}sg(this,this.Bi)}}Ke.prototype=new rg;
function sg(a,b){++a.Km;b.g.I=b.ia[0].M.e();b.g.J=b.g.I.e();for(var c,d=b.ia.length,e=0;e<d;++e){c=b.ia[e];A(b.g,c.M);A(b.g,c.V);A(b.g,c.X)}if(!b.g.I.O(b.g.J)&&d>a.Wm){d=Ea(b.g);for(var f=Ga(b.g),g=new z,i=0;i<8;++i){var k=[];g.I=d.e();g.J=d.e();A(g,f[i]);b.be.push(new q.Dl);for(e=0;e<b.ia.length;++e){c=b.ia[e];g.yh(c.M)&&g.yh(c.V)&&g.yh(c.X)?b.be[i].ia.push(c):k.push(c)}b.ia=k;if(b.be[i].ia.length==0)b.be[i]=null;else sg(a,b.be[i])}}a.Lm+=b.ia.length}
Ke.prototype.Se=function(a,b){Le.prototype.Se.call(this,a,b)};Ke.prototype.Vf=function(a,b,c){if(this.db.Y){var d=new F;a=a.e();if(this.db){d=this.db.Y.e();Ya(d);fb(d,a)}var e=d;e.n=1;e.r=0;e.s=0;e.A=0;e.t=0;e.o=1;e.u=0;e.B=0;e.v=0;e.w=0;e.p=1;e.C=0;e.D=0;e.F=0;e.G=0;e.H=1;e.Da=true;if(b)d=b.e();if(this.db)d=H(d,this.db.Y);this.Bi&&tg(this,this.Bi,c,a,d)}};
function tg(a,b,c,d,e){if(Ia(b.g,d)){var f=b.ia.length,g;if(Pa(e))for(g=0;g<f;++g)c.push(b.ia[g]);else if(Qa(e))for(g=0;g<f;++g)c.push(new B(Wa(e,b.ia[g].M),Wa(e,b.ia[g].V),Wa(e,b.ia[g].X)));else for(g=0;g<f;++g)c.push(new B(Ua(e,b.ia[g].M),Ua(e,b.ia[g].V),Ua(e,b.ia[g].X)));for(g=0;g<b.be.length;++g){f=b.be[g];f!=null&&tg(a,f,c,d,e)}}}Ke.prototype.Vi=j("db");window.startCopperLichtFromFile=function(a,b,c,d){a=new ld(a,true,null,false,c,d);a.load(b);return a};window.CL3D=q;window.ccbGetSceneNodeFromId=Af;window.ccbCloneSceneNode=Bf;window.ccbGetActiveCamera=Cf;window.ccbSetActiveCamera=Df;window.ccbGetChildSceneNode=Ef;window.ccbGetRootSceneNode=Ff;window.ccbGetSceneNodeChildCount=Gf;window.ccbGetSceneNodeFromName=Hf;window.ccbRemoveSceneNode=If;window.ccbGetSceneNodeMaterialCount=Jf;window.ccbGetSceneNodeMaterialProperty=Kf;
window.ccbSetSceneNodeMaterialProperty=Mf;window.ccbSetSceneNodeProperty=Nf;window.ccbGetSceneNodeProperty=Of;window.ccbSetSceneNodePositionWithoutCollision=Pf;window.ccbRegisterOnFrameEvent=Qf;window.ccbDrawColoredRectangle=Sf;window.ccbDrawTextureRectangle=Tf;window.ccbDrawTextureRectangleWithAlpha=Uf;window.ccbGet3DPosFrom2DPos=Vf;window.ccbGet2DPosFrom3DPos=Wf;window.ccbGetCollisionPointOfWorldWithLine=Xf;window.ccbEndProgram=Zf;window.ccbDoesLineCollideWithBoundingBoxOfSceneNode=Yf;
window.ccbLoadTexture=$f;window.ccbGetMousePosX=ag;window.ccbGetMousePosY=bg;window.ccbGetScreenWidth=cg;window.ccbGetScreenHeight=dg;window.ccbSetCloseOnEscapePressed=eg;window.ccbSetCursorVisible=fg;window.ccbSwitchToScene=gg;window.ccbPlaySound=hg;window.ccbGetCopperCubeVariable=ig;window.ccbSetCopperCubeVariable=jg;window.ccbReadFileContent=kg;window.ccbWriteFileContent=lg;window.ccbGetPlatform=mg;window.ccbInvokeAction=ng;window.ccbCleanMemory=Lf;window.print=og;window.system=pg;
window.ccbRegisterBehaviorEventReceiver=qg;window.ccbUnregisterOnFrameEvent=Rf;
